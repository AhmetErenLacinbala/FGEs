var xs=Object.defineProperty;var bs=(a,t,o)=>t in a?xs(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;var V=(a,t,o)=>bs(a,typeof t!="symbol"?t+"":t,o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(l){if(l.ep)return;l.ep=!0;const d=o(l);fetch(l.href,d)}})();var tn;let $n=(tn=class{constructor(){V(this,"texture");V(this,"sampler");V(this,"view");V(this,"bindGroup")}async init(t,o,c){const d=await(await fetch(o)).blob(),m=await createImageBitmap(d);await this.loadImageBitmap(t,m);const y={format:"rgba8unorm",dimension:"2d",aspect:"all",baseMipLevel:0,mipLevelCount:1,baseArrayLayer:0,arrayLayerCount:1};this.view=this.texture.createView(y);const N={addressModeU:"repeat",addressModeV:"repeat",magFilter:"linear",minFilter:"nearest",mipmapFilter:"nearest",maxAnisotropy:1};this.sampler=t.createSampler(N),this.bindGroup=t.createBindGroup({layout:c,entries:[{binding:0,resource:this.view},{binding:1,resource:this.sampler}]})}async loadImageBitmap(t,o){const c={size:{width:o.width,height:o.height},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT};this.texture=t.createTexture(c),t.queue.copyExternalImageToTexture({source:o},{texture:this.texture},c.size)}async initComputeShader(t){function o(...ne){const ie=document.createElement("pre");ie.textContent=ne.join(" "),document.body.appendChild(ie)}const c=[8,8,8],l=[8,8,2],d=ne=>ne.reduce((ie,fe)=>ie*fe),m=d(l),N=d(c)*m,D=N*4*4,G=`
        @group(0) @binding(0) var<storage, read_write> workgroupResult: array<vec3u>;
        @group(0) @binding(1) var<storage, read_write> localResult: array<vec3u>;
        @group(0) @binding(2) var<storage, read_write> globalResult: array<vec3u>;

        @compute @workgroup_size(${l.join(",")})
        fn main(
            @builtin(workgroup_id) workgroup_id : vec3<u32>,
            @builtin(local_invocation_id) local_invocation_id : vec3<u32>,
            @builtin(global_invocation_id) global_invocation_id : vec3<u32>,
            @builtin(local_invocation_index) local_invocation_index : u32,
            @builtin(num_workgroups) num_workgroups : vec3<u32>,
        ) {
            let workgroup_index =  
                workgroup_id.x +
                workgroup_id.y * num_workgroups.x +
                workgroup_id.z * num_workgroups.x * num_workgroups.y;

            let global_invocation_index =
                workgroup_index * ${m} +
                local_invocation_index;

            workgroupResult[global_invocation_index] = workgroup_id;
            localResult[global_invocation_index] = local_invocation_id;
            globalResult[global_invocation_index] = global_invocation_id;
        }
    `,Y=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC,$=t.createBuffer({size:D,usage:Y}),J=t.createBuffer({size:D,usage:Y}),B=t.createBuffer({size:D,usage:Y}),P=GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST,W=t.createBuffer({size:D,usage:P}),x=t.createBuffer({size:D,usage:P}),K=t.createBuffer({size:D,usage:P}),I=t.createShaderModule({code:G}),U=t.createComputePipeline({layout:"auto",compute:{module:I,entryPoint:"main"}}),L=t.createBindGroup({layout:U.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:$}},{binding:1,resource:{buffer:J}},{binding:2,resource:{buffer:B}}]}),j=t.createCommandEncoder(),n=j.beginComputePass();n.setPipeline(U),n.setBindGroup(0,L);const C=performance.now();n.dispatchWorkgroups(...c),n.end(),j.copyBufferToBuffer($,0,W,0,D),j.copyBufferToBuffer(J,0,x,0,D),j.copyBufferToBuffer(B,0,K,0,D),t.queue.submit([j.finish()]),await Promise.all([W.mapAsync(GPUMapMode.READ),x.mapAsync(GPUMapMode.READ),K.mapAsync(GPUMapMode.READ)]);const O=performance.now(),q=new Uint32Array(W.getMappedRange()),Q=new Uint32Array(x.getMappedRange()),ee=new Uint32Array(K.getMappedRange()),F=(ne,ie)=>{const fe=ie*4;return`${ne[fe]}, ${ne[fe+1]}, ${ne[fe+2]}`};o(`âœ… GPU Compute Shader Finished in ${(O-C).toFixed(2)} ms`),o(`Results for ${N} total threads:`);for(let ne=0;ne<N;++ne)ne%m===0&&o(`---------------------------------------
global                 local     global   dispatch: ${ne/m}
invoc.    workgroup    invoc.    invoc.
index     id           id        id
---------------------------------------`),o(`${ne.toString().padStart(3)}:      ${F(q,ne)}      ${F(Q,ne)}   ${F(ee,ne)}`);W.unmap(),x.unmap(),K.unmap()}},V(tn,"computeBindGroupLayout"),tn);const Yn=`struct TransformData{
    view: mat4x4<f32>,
    projection: mat4x4<f32>,
};

struct ObjectData{
    model: array<mat4x4<f32>>
}

@binding(0) @group(0) var<uniform> transformUBO: TransformData;
@binding(1) @group(0) var<storage,read> objects: ObjectData;

@binding(0) @group(1) var myTexture: texture_2d<f32>;
@binding(1) @group(1) var mySampler: sampler;

struct Fragment{
    @builtin(position) Position: vec4<f32>,
    @location(0) TexCoord: vec2<f32>,
};

@vertex
fn vs_main(
    @builtin(instance_index) ID: u32,
    @location(0) vertexPosition: vec3<f32>, 
    @location(1) vertexTextureCoord: vec2<f32>) -> Fragment {

    var output : Fragment;
    output.Position = transformUBO.projection * transformUBO.view * objects.model[ID]* vec4<f32>(vertexPosition, 1.0);
    output.TexCoord = vertexTextureCoord;
    return output;
}

@fragment
fn fs_main(@location(0) TexCoord: vec2<f32>) -> @location(0) vec4<f32>{
    return textureSample(myTexture, mySampler, TexCoord);
}


`;class Ts{constructor(t){V(this,"buffer");V(this,"bufferLayout");const o=new Float32Array([0,0,.5,.5,0,0,-.5,-.5,0,1,0,.5,-.5,1,1]),c=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,l={size:o.byteLength,usage:c,mappedAtCreation:!0};this.buffer=t.createBuffer(l),new Float32Array(this.buffer.getMappedRange()).set(o),this.buffer.unmap(),this.bufferLayout={arrayStride:5*4,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:3*4}]}}}var Kr=1e-6,ct=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var a=0,t=arguments.length;t--;)a+=arguments[t]*arguments[t];return Math.sqrt(a)});function Et(){var a=new ct(16);return ct!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function Es(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function un(a,t,o){var c=o[0],l=o[1],d=o[2],m,y,N,D,G,Y,$,J,B,P,W,x;return t===a?(a[12]=t[0]*c+t[4]*l+t[8]*d+t[12],a[13]=t[1]*c+t[5]*l+t[9]*d+t[13],a[14]=t[2]*c+t[6]*l+t[10]*d+t[14],a[15]=t[3]*c+t[7]*l+t[11]*d+t[15]):(m=t[0],y=t[1],N=t[2],D=t[3],G=t[4],Y=t[5],$=t[6],J=t[7],B=t[8],P=t[9],W=t[10],x=t[11],a[0]=m,a[1]=y,a[2]=N,a[3]=D,a[4]=G,a[5]=Y,a[6]=$,a[7]=J,a[8]=B,a[9]=P,a[10]=W,a[11]=x,a[12]=m*c+G*l+B*d+t[12],a[13]=y*c+Y*l+P*d+t[13],a[14]=N*c+$*l+W*d+t[14],a[15]=D*c+J*l+x*d+t[15]),a}function ws(a,t,o){var c=Math.sin(o),l=Math.cos(o),d=t[0],m=t[1],y=t[2],N=t[3],D=t[8],G=t[9],Y=t[10],$=t[11];return t!==a&&(a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=d*l-D*c,a[1]=m*l-G*c,a[2]=y*l-Y*c,a[3]=N*l-$*c,a[8]=d*c+D*l,a[9]=m*c+G*l,a[10]=y*c+Y*l,a[11]=N*c+$*l,a}function si(a,t,o){var c=Math.sin(o),l=Math.cos(o),d=t[0],m=t[1],y=t[2],N=t[3],D=t[4],G=t[5],Y=t[6],$=t[7];return t!==a&&(a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=d*l+D*c,a[1]=m*l+G*c,a[2]=y*l+Y*c,a[3]=N*l+$*c,a[4]=D*l-d*c,a[5]=G*l-m*c,a[6]=Y*l-y*c,a[7]=$*l-N*c,a}function Rs(a,t,o,c,l){var d=1/Math.tan(t/2),m;return a[0]=d/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,l!=null&&l!==1/0?(m=1/(c-l),a[10]=(l+c)*m,a[14]=2*l*c*m):(a[10]=-1,a[14]=-2*c),a}var As=Rs;function Ss(a,t,o,c){var l,d,m,y,N,D,G,Y,$,J,B=t[0],P=t[1],W=t[2],x=c[0],K=c[1],I=c[2],U=o[0],L=o[1],j=o[2];return Math.abs(B-U)<Kr&&Math.abs(P-L)<Kr&&Math.abs(W-j)<Kr?Es(a):(G=B-U,Y=P-L,$=W-j,J=1/Math.hypot(G,Y,$),G*=J,Y*=J,$*=J,l=K*$-I*Y,d=I*G-x*$,m=x*Y-K*G,J=Math.hypot(l,d,m),J?(J=1/J,l*=J,d*=J,m*=J):(l=0,d=0,m=0),y=Y*m-$*d,N=$*l-G*m,D=G*d-Y*l,J=Math.hypot(y,N,D),J?(J=1/J,y*=J,N*=J,D*=J):(y=0,N=0,D=0),a[0]=l,a[1]=y,a[2]=G,a[3]=0,a[4]=d,a[5]=N,a[6]=Y,a[7]=0,a[8]=m,a[9]=D,a[10]=$,a[11]=0,a[12]=-(l*B+d*P+m*W),a[13]=-(y*B+N*P+D*W),a[14]=-(G*B+Y*P+$*W),a[15]=1,a)}function ot(){var a=new ct(3);return ct!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Qr(a,t,o){var c=new ct(3);return c[0]=a,c[1]=t,c[2]=o,c}function Cs(a,t,o){return a[0]=t[0]+o[0],a[1]=t[1]+o[1],a[2]=t[2]+o[2],a}function Zr(a,t,o,c){return a[0]=t[0]+o[0]*c,a[1]=t[1]+o[1]*c,a[2]=t[2]+o[2]*c,a}function Xn(a,t,o){var c=t[0],l=t[1],d=t[2],m=o[0],y=o[1],N=o[2];return a[0]=l*N-d*y,a[1]=d*m-c*N,a[2]=c*y-l*m,a}(function(){var a=ot();return function(t,o,c,l,d,m){var y,N;for(o||(o=3),c||(c=0),l?N=Math.min(l*o+c,t.length):N=t.length,y=c;y<N;y+=o)a[0]=t[y],a[1]=t[y+1],a[2]=t[y+2],d(a,a,m),t[y]=a[0],t[y+1]=a[1],t[y+2]=a[2];return t}})();function oi(){var a=new ct(2);return ct!=Float32Array&&(a[0]=0,a[1]=0),a}function Ms(a,t){var o=new ct(2);return o[0]=a,o[1]=t,o}(function(){var a=oi();return function(t,o,c,l,d,m){var y,N;for(o||(o=2),c||(c=0),l?N=Math.min(l*o+c,t.length):N=t.length,y=c;y<N;y+=o)a[0]=t[y],a[1]=t[y+1],d(a,a,m),t[y]=a[0],t[y+1]=a[1];return t}})();var vt=(a=>(a[a.TRIANGLE=0]="TRIANGLE",a[a.QUAD=1]="QUAD",a))(vt||{});class Ns{constructor(t){V(this,"buffer");V(this,"bufferLayout");const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,.5,.5,0,1,1,-.5,.5,0,0,1,-.5,-.5,0,0,0]),c=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,l={size:o.byteLength,usage:c,mappedAtCreation:!0};this.buffer=t.createBuffer(l),new Float32Array(this.buffer.getMappedRange()).set(o),this.buffer.unmap(),this.bufferLayout={arrayStride:5*4,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:3*4}]}}}class ai{constructor(){this._listeners={}}addEventListener(t,o){const c=this._listeners;return c[t]===void 0&&(c[t]=[]),c[t].indexOf(o)===-1&&c[t].push(o),this}removeEventListener(t,o){const l=this._listeners[t];if(l!==void 0){const d=l.indexOf(o);d!==-1&&l.splice(d,1)}return this}dispatchEvent(t){const c=this._listeners[t.type];if(c!==void 0){const l=c.slice(0);for(let d=0,m=l.length;d<m;d++)l[d].call(this,t)}return this}dispose(){for(const t in this._listeners)delete this._listeners[t]}}class Bt{constructor(t,o,c,l={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=t,this._parent=o,this._child=c,this._attributes=l,!o.isOnGraph(c))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(t){return this._child=t,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class Is extends ai{constructor(...t){super(...t),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(t){return Array.from(this._childEdges.get(t)||this._emptySet)}listParents(t){const o=new Set;for(const c of this.listParentEdges(t))o.add(c.getParent());return Array.from(o)}listChildEdges(t){return Array.from(this._parentEdges.get(t)||this._emptySet)}listChildren(t){const o=new Set;for(const c of this.listChildEdges(t))o.add(c.getChild());return Array.from(o)}disconnectParents(t,o){for(const c of this.listParentEdges(t))(!o||o(c.getParent()))&&c.dispose();return this}_createEdge(t,o,c,l){const d=new Bt(t,o,c,l);this._edges.add(d);const m=d.getParent();this._parentEdges.has(m)||this._parentEdges.set(m,new Set),this._parentEdges.get(m).add(d);const y=d.getChild();return this._childEdges.has(y)||this._childEdges.set(y,new Set),this._childEdges.get(y).add(d),d}_destroyEdge(t){return this._edges.delete(t),this._parentEdges.get(t.getParent()).delete(t),this._childEdges.get(t.getChild()).delete(t),this}}function Jt(){return Jt=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a},Jt.apply(this,arguments)}class ut{constructor(t){if(this.list=[],t)for(const o of t)this.list.push(o)}add(t){this.list.push(t)}remove(t){const o=this.list.indexOf(t);o>=0&&this.list.splice(o,1)}removeChild(t){const o=[];for(const c of this.list)c.getChild()===t&&o.push(c);for(const c of o)this.remove(c);return o}listRefsByChild(t){const o=[];for(const c of this.list)c.getChild()===t&&o.push(c);return o}values(){return this.list}}class Te{constructor(t){if(this.set=new Set,this.map=new Map,t)for(const o of t)this.add(o)}add(t){const o=t.getChild();this.removeChild(o),this.set.add(t),this.map.set(o,t)}remove(t){this.set.delete(t),this.map.delete(t.getChild())}removeChild(t){const o=this.map.get(t)||null;return o&&this.remove(o),o}getRefByChild(t){return this.map.get(t)||null}values(){return Array.from(this.set)}}class Ke{constructor(t){this.map={},t&&Object.assign(this.map,t)}set(t,o){this.map[t]=o}delete(t){delete this.map[t]}get(t){return this.map[t]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const ve=Symbol("attributes"),mt=Symbol("immutableKeys");class fn extends ai{constructor(t){super(),this._disposed=!1,this.graph=void 0,this[ve]=void 0,this[mt]=void 0,this.graph=t,this[mt]=new Set,this[ve]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const t=this.getDefaults(),o={};for(const c in t){const l=t[c];if(l instanceof fn){const d=this.graph._createEdge(c,this,l);this[mt].add(c),o[c]=d}else o[c]=l}return o}isOnGraph(t){return this.graph===t.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(t=>t.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(t,o){for(const c in this[ve]){const l=this[ve][c];if(l instanceof Bt){const d=l;d.getChild()===t&&this.setRef(c,o,d.getAttributes())}else if(l instanceof ut)for(const d of l.listRefsByChild(t)){const m=d.getAttributes();this.removeRef(c,t),this.addRef(c,o,m)}else if(l instanceof Te){const d=l.getRefByChild(t);if(d){const m=d.getAttributes();this.removeRef(c,t),this.addRef(c,o,m)}}else if(l instanceof Ke)for(const d of l.keys()){const m=l.get(d);m.getChild()===t&&this.setRefMap(c,d,o,m.getAttributes())}}return this}get(t){return this[ve][t]}set(t,o){return this[ve][t]=o,this.dispatchEvent({type:"change",attribute:t})}getRef(t){const o=this[ve][t];return o?o.getChild():null}setRef(t,o,c){if(this[mt].has(t))throw new Error(`Cannot overwrite immutable attribute, "${t}".`);const l=this[ve][t];if(l&&l.dispose(),!o)return this;const d=this.graph._createEdge(t,this,o,c);return this[ve][t]=d,this.dispatchEvent({type:"change",attribute:t})}listRefs(t){return this.assertRefList(t).values().map(c=>c.getChild())}addRef(t,o,c){const l=this.graph._createEdge(t,this,o,c);return this.assertRefList(t).add(l),this.dispatchEvent({type:"change",attribute:t})}removeRef(t,o){const c=this.assertRefList(t);if(c instanceof ut)for(const l of c.listRefsByChild(o))l.dispose();else{const l=c.getRefByChild(o);l&&l.dispose()}return this}assertRefList(t){const o=this[ve][t];if(o instanceof ut||o instanceof Te)return o;throw new Error(`Expected RefList or RefSet for attribute "${t}"`)}listRefMapKeys(t){return this.assertRefMap(t).keys()}listRefMapValues(t){return this.assertRefMap(t).values().map(o=>o.getChild())}getRefMap(t,o){const l=this.assertRefMap(t).get(o);return l?l.getChild():null}setRefMap(t,o,c,l){const d=this.assertRefMap(t),m=d.get(o);if(m&&m.dispose(),!c)return this;l=Object.assign(l||{},{key:o});const y=this.graph._createEdge(t,this,c,Jt({},l,{key:o}));return d.set(o,y),this.dispatchEvent({type:"change",attribute:t,key:o})}assertRefMap(t){const o=this[ve][t];if(o instanceof Ke)return o;throw new Error(`Expected RefMap for attribute "${t}"`)}dispatchEvent(t){return super.dispatchEvent(Jt({},t,{target:this})),this.graph.dispatchEvent(Jt({},t,{target:this,type:`node:${t.type}`})),this}_destroyRef(t){const o=t.getName();if(this[ve][o]===t)this[ve][o]=null,this[mt].has(o)&&t.getChild().dispose();else if(this[ve][o]instanceof ut)this[ve][o].remove(t);else if(this[ve][o]instanceof Te)this[ve][o].remove(t);else if(this[ve][o]instanceof Ke){const c=this[ve][o];for(const l of c.keys())c.get(l)===t&&c.delete(l)}else return;this.graph._destroyEdge(t),this.dispatchEvent({type:"change",attribute:o})}}const ui="v4.1.2",br="@glb.bin";var te;(function(a){a.ACCESSOR="Accessor",a.ANIMATION="Animation",a.ANIMATION_CHANNEL="AnimationChannel",a.ANIMATION_SAMPLER="AnimationSampler",a.BUFFER="Buffer",a.CAMERA="Camera",a.MATERIAL="Material",a.MESH="Mesh",a.PRIMITIVE="Primitive",a.PRIMITIVE_TARGET="PrimitiveTarget",a.NODE="Node",a.ROOT="Root",a.SCENE="Scene",a.SKIN="Skin",a.TEXTURE="Texture",a.TEXTURE_INFO="TextureInfo"})(te||(te={}));var Tr;(function(a){a.INTERLEAVED="interleaved",a.SEPARATE="separate"})(Tr||(Tr={}));var Ue;(function(a){a.ARRAY_BUFFER="ARRAY_BUFFER",a.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",a.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",a.OTHER="OTHER",a.SPARSE="SPARSE"})(Ue||(Ue={}));var rn;(function(a){a[a.R=4096]="R",a[a.G=256]="G",a[a.B=16]="B",a[a.A=1]="A"})(rn||(rn={}));var ft;(function(a){a.GLTF="GLTF",a.GLB="GLB"})(ft||(ft={}));const Ar={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};var nn=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var a=0,t=arguments.length;t--;)a+=arguments[t]*arguments[t];return Math.sqrt(a)});function Os(){var a=new nn(3);return nn!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function en(a){var t=a[0],o=a[1],c=a[2];return Math.hypot(t,o,c)}(function(){var a=Os();return function(t,o,c,l,d,m){var y,N;for(o||(o=3),c||(c=0),l?N=Math.min(l*o+c,t.length):N=t.length,y=c;y<N;y+=o)a[0]=t[y],a[1]=t[y+1],a[2]=t[y+2],d(a,a,m),t[y]=a[0],t[y+1]=a[1],t[y+2]=a[2];return t}})();class me{static createBufferFromDataURI(t){if(typeof Buffer>"u"){const o=atob(t.split(",")[1]),c=new Uint8Array(o.length);for(let l=0;l<o.length;l++)c[l]=o.charCodeAt(l);return c}else{const o=t.split(",")[1],c=t.indexOf("base64")>=0;return Buffer.from(o,c?"base64":"utf8")}}static encodeText(t){return new TextEncoder().encode(t)}static decodeText(t){return new TextDecoder().decode(t)}static concat(t){let o=0;for(const d of t)o+=d.byteLength;const c=new Uint8Array(o);let l=0;for(const d of t)c.set(d,l),l+=d.byteLength;return c}static pad(t,o=0){const c=this.padNumber(t.byteLength);if(c===t.byteLength)return t;const l=new Uint8Array(c);if(l.set(t),o!==0)for(let d=t.byteLength;d<c;d++)l[d]=o;return l}static padNumber(t){return Math.ceil(t/4)*4}static equals(t,o){if(t===o)return!0;if(t.byteLength!==o.byteLength)return!1;let c=t.byteLength;for(;c--;)if(t[c]!==o[c])return!1;return!0}static toView(t,o=0,c=1/0){return new Uint8Array(t.buffer,t.byteOffset+o,Math.min(t.byteLength,c))}static assertView(t){if(t&&!ArrayBuffer.isView(t))throw new Error(`Method requires Uint8Array parameter; received "${typeof t}".`);return t}}class _s{match(t){return t.length>=3&&t[0]===255&&t[1]===216&&t[2]===255}getSize(t){let o=new DataView(t.buffer,t.byteOffset+4),c,l;for(;o.byteLength;){if(c=o.getUint16(0,!1),Ls(o,c),l=o.getUint8(c+1),l===192||l===193||l===194)return[o.getUint16(c+7,!1),o.getUint16(c+5,!1)];o=new DataView(t.buffer,o.byteOffset+c+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(t){return 3}}class Sr{match(t){return t.length>=8&&t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10}getSize(t){const o=new DataView(t.buffer,t.byteOffset);return me.decodeText(t.slice(12,16))===Sr.PNG_FRIED_CHUNK_NAME?[o.getUint32(32,!1),o.getUint32(36,!1)]:[o.getUint32(16,!1),o.getUint32(20,!1)]}getChannels(t){return 4}}Sr.PNG_FRIED_CHUNK_NAME="CgBI";class bt{static registerFormat(t,o){this.impls[t]=o}static getMimeType(t){for(const o in this.impls)if(this.impls[o].match(t))return o;return null}static getSize(t,o){return this.impls[o]?this.impls[o].getSize(t):null}static getChannels(t,o){return this.impls[o]?this.impls[o].getChannels(t):null}static getVRAMByteLength(t,o){if(!this.impls[o])return null;if(this.impls[o].getVRAMByteLength)return this.impls[o].getVRAMByteLength(t);let c=0;const l=4,d=this.getSize(t,o);if(!d)return null;for(;d[0]>1||d[1]>1;)c+=d[0]*d[1]*l,d[0]=Math.max(Math.floor(d[0]/2),1),d[1]=Math.max(Math.floor(d[1]/2),1);return c+=1*1*l,c}static mimeTypeToExtension(t){return t==="image/jpeg"?"jpg":t.split("/").pop()}static extensionToMimeType(t){return t==="jpg"?"image/jpeg":t?`image/${t}`:""}}bt.impls={"image/jpeg":new _s,"image/png":new Sr};function Ls(a,t){if(t>a.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(a.getUint8(t)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return a}class Ut{static basename(t){const o=t.split(/[\\/]/).pop();return o.substring(0,o.lastIndexOf("."))}static extension(t){if(t.startsWith("data:image/")){const o=t.match(/data:(image\/\w+)/)[1];return bt.mimeTypeToExtension(o)}else{if(t.startsWith("data:model/gltf+json"))return"gltf";if(t.startsWith("data:model/gltf-binary"))return"glb";if(t.startsWith("data:application/"))return"bin"}return t.split(/[\\/]/).pop().split(/[.]/).pop()}}function Jn(a){return Object.prototype.toString.call(a)==="[object Object]"}function xt(a){if(Jn(a)===!1)return!1;const t=a.constructor;if(t===void 0)return!0;const o=t.prototype;return!(Jn(o)===!1||Object.prototype.hasOwnProperty.call(o,"isPrototypeOf")===!1)}var sn,on;(function(a){a[a.SILENT=4]="SILENT",a[a.ERROR=3]="ERROR",a[a.WARN=2]="WARN",a[a.INFO=1]="INFO",a[a.DEBUG=0]="DEBUG"})(on||(on={}));class je{constructor(t){this.verbosity=void 0,this.verbosity=t}debug(t){this.verbosity<=je.Verbosity.DEBUG&&console.debug(t)}info(t){this.verbosity<=je.Verbosity.INFO&&console.info(t)}warn(t){this.verbosity<=je.Verbosity.WARN&&console.warn(t)}error(t){this.verbosity<=je.Verbosity.ERROR&&console.error(t)}}sn=je;je.Verbosity=on;je.DEFAULT_INSTANCE=new sn(sn.Verbosity.INFO);function Ps(a){var t=a[0],o=a[1],c=a[2],l=a[3],d=a[4],m=a[5],y=a[6],N=a[7],D=a[8],G=a[9],Y=a[10],$=a[11],J=a[12],B=a[13],P=a[14],W=a[15],x=t*m-o*d,K=t*y-c*d,I=t*N-l*d,U=o*y-c*m,L=o*N-l*m,j=c*N-l*y,n=D*B-G*J,C=D*P-Y*J,O=D*W-$*J,q=G*P-Y*B,Q=G*W-$*B,ee=Y*W-$*P;return x*ee-K*Q+I*q+U*O-L*C+j*n}function Bs(a,t,o){var c=t[0],l=t[1],d=t[2],m=t[3],y=t[4],N=t[5],D=t[6],G=t[7],Y=t[8],$=t[9],J=t[10],B=t[11],P=t[12],W=t[13],x=t[14],K=t[15],I=o[0],U=o[1],L=o[2],j=o[3];return a[0]=I*c+U*y+L*Y+j*P,a[1]=I*l+U*N+L*$+j*W,a[2]=I*d+U*D+L*J+j*x,a[3]=I*m+U*G+L*B+j*K,I=o[4],U=o[5],L=o[6],j=o[7],a[4]=I*c+U*y+L*Y+j*P,a[5]=I*l+U*N+L*$+j*W,a[6]=I*d+U*D+L*J+j*x,a[7]=I*m+U*G+L*B+j*K,I=o[8],U=o[9],L=o[10],j=o[11],a[8]=I*c+U*y+L*Y+j*P,a[9]=I*l+U*N+L*$+j*W,a[10]=I*d+U*D+L*J+j*x,a[11]=I*m+U*G+L*B+j*K,I=o[12],U=o[13],L=o[14],j=o[15],a[12]=I*c+U*y+L*Y+j*P,a[13]=I*l+U*N+L*$+j*W,a[14]=I*d+U*D+L*J+j*x,a[15]=I*m+U*G+L*B+j*K,a}function Us(a,t){var o=t[0],c=t[1],l=t[2],d=t[4],m=t[5],y=t[6],N=t[8],D=t[9],G=t[10];return a[0]=Math.hypot(o,c,l),a[1]=Math.hypot(d,m,y),a[2]=Math.hypot(N,D,G),a}function Ds(a,t){var o=new nn(3);Us(o,t);var c=1/o[0],l=1/o[1],d=1/o[2],m=t[0]*c,y=t[1]*l,N=t[2]*d,D=t[4]*c,G=t[5]*l,Y=t[6]*d,$=t[8]*c,J=t[9]*l,B=t[10]*d,P=m+G+B,W=0;return P>0?(W=Math.sqrt(P+1)*2,a[3]=.25*W,a[0]=(Y-J)/W,a[1]=($-N)/W,a[2]=(y-D)/W):m>G&&m>B?(W=Math.sqrt(1+m-G-B)*2,a[3]=(Y-J)/W,a[0]=.25*W,a[1]=(y+D)/W,a[2]=($+N)/W):G>B?(W=Math.sqrt(1+G-m-B)*2,a[3]=($-N)/W,a[0]=(y+D)/W,a[1]=.25*W,a[2]=(Y+J)/W):(W=Math.sqrt(1+B-m-G)*2,a[3]=(y-D)/W,a[0]=($+N)/W,a[1]=(Y+J)/W,a[2]=.25*W),a}class Ee{static identity(t){return t}static eq(t,o,c=1e-5){if(t.length!==o.length)return!1;for(let l=0;l<t.length;l++)if(Math.abs(t[l]-o[l])>c)return!1;return!0}static clamp(t,o,c){return t<o?o:t>c?c:t}static decodeNormalizedInt(t,o){switch(o){case 5126:return t;case 5123:return t/65535;case 5121:return t/255;case 5122:return Math.max(t/32767,-1);case 5120:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(t,o){switch(o){case 5126:return t;case 5123:return Math.round(Ee.clamp(t,0,1)*65535);case 5121:return Math.round(Ee.clamp(t,0,1)*255);case 5122:return Math.round(Ee.clamp(t,-1,1)*32767);case 5120:return Math.round(Ee.clamp(t,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(t,o,c,l){let d=en([t[0],t[1],t[2]]);const m=en([t[4],t[5],t[6]]),y=en([t[8],t[9],t[10]]);Ps(t)<0&&(d=-d),o[0]=t[12],o[1]=t[13],o[2]=t[14];const D=t.slice(),G=1/d,Y=1/m,$=1/y;D[0]*=G,D[1]*=G,D[2]*=G,D[4]*=Y,D[5]*=Y,D[6]*=Y,D[8]*=$,D[9]*=$,D[10]*=$,Ds(c,D),l[0]=d,l[1]=m,l[2]=y}static compose(t,o,c,l){const d=l,m=o[0],y=o[1],N=o[2],D=o[3],G=m+m,Y=y+y,$=N+N,J=m*G,B=m*Y,P=m*$,W=y*Y,x=y*$,K=N*$,I=D*G,U=D*Y,L=D*$,j=c[0],n=c[1],C=c[2];return d[0]=(1-(W+K))*j,d[1]=(B+L)*j,d[2]=(P-U)*j,d[3]=0,d[4]=(B-L)*n,d[5]=(1-(J+K))*n,d[6]=(x+I)*n,d[7]=0,d[8]=(P+U)*C,d[9]=(x-I)*C,d[10]=(1-(J+W))*C,d[11]=0,d[12]=t[0],d[13]=t[1],d[14]=t[2],d[15]=1,d}}function Fs(a,t){if(!!a!=!!t)return!1;const o=a.getChild(),c=t.getChild();return o===c||o.equals(c)}function ks(a,t){if(!!a!=!!t)return!1;const o=a.values(),c=t.values();if(o.length!==c.length)return!1;for(let l=0;l<o.length;l++){const d=o[l],m=c[l];if(d.getChild()!==m.getChild()&&!d.getChild().equals(m.getChild()))return!1}return!0}function js(a,t){if(!!a!=!!t)return!1;const o=a.keys(),c=t.keys();if(o.length!==c.length)return!1;for(const l of o){const d=a.get(l),m=t.get(l);if(!!d!=!!m)return!1;const y=d.getChild(),N=m.getChild();if(y!==N&&!y.equals(N))return!1}return!0}function fi(a,t){if(a===t)return!0;if(!!a!=!!t||!a||!t||a.length!==t.length)return!1;for(let o=0;o<a.length;o++)if(a[o]!==t[o])return!1;return!0}function ci(a,t){if(a===t)return!0;if(!!a!=!!t)return!1;if(!xt(a)||!xt(t))return a===t;const o=a,c=t;let l=0,d=0,m;for(m in o)l++;for(m in c)d++;if(l!==d)return!1;for(m in o){const y=o[m],N=c[m];if(Er(y)&&Er(N)){if(!fi(y,N))return!1}else if(xt(y)&&xt(N)){if(!ci(y,N))return!1}else if(y!==N)return!1}return!0}function Er(a){return Array.isArray(a)||ArrayBuffer.isView(a)}const Kn="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",qs=999,Gs=6,Qn=new Set,Vs=function(){let t="";for(let o=0;o<Gs;o++)t+=Kn.charAt(Math.floor(Math.random()*Kn.length));return t},zs=function(){for(let t=0;t<qs;t++){const o=Vs();if(!Qn.has(o))return Qn.add(o),o}return""},Zn="https://null.example";class Kt{static dirname(t){const o=t.lastIndexOf("/");return o===-1?"./":t.substring(0,o+1)}static basename(t){return Ut.basename(new URL(t,Zn).pathname)}static extension(t){return Ut.extension(new URL(t,Zn).pathname)}static resolve(t,o){if(!this.isRelativePath(o))return o;const c=t.split("/"),l=o.split("/");c.pop();for(let d=0;d<l.length;d++)l[d]!=="."&&(l[d]===".."?c.pop():c.push(l[d]));return c.join("/")}static isAbsoluteURL(t){return this.PROTOCOL_REGEXP.test(t)}static isRelativePath(t){return!/^(?:[a-zA-Z]+:)?\//.test(t)}}Kt.DEFAULT_INIT={};Kt.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const lt=a=>a,Hs=new Set;class cn extends fn{constructor(t,o=""){super(t),this[ve].name=o,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(t,o){return Array.isArray(o)&&(o=o.slice()),super.set(t,o)}getName(){return this.get("name")}setName(t){return this.set("name",t)}getExtras(){return this.get("extras")}setExtras(t){return this.set("extras",t)}clone(){const t=this.constructor;return new t(this.graph).copy(this,lt)}copy(t,o=lt){for(const c in this[ve]){const l=this[ve][c];if(l instanceof Bt)this[mt].has(c)||l.dispose();else if(l instanceof ut||l instanceof Te)for(const d of l.values())d.dispose();else if(l instanceof Ke)for(const d of l.values())d.dispose()}for(const c in t[ve]){const l=this[ve][c],d=t[ve][c];if(d instanceof Bt)this[mt].has(c)?l.getChild().copy(o(d.getChild()),o):this.setRef(c,o(d.getChild()),d.getAttributes());else if(d instanceof Te||d instanceof ut)for(const m of d.values())this.addRef(c,o(m.getChild()),m.getAttributes());else if(d instanceof Ke)for(const m of d.keys()){const y=d.get(m);this.setRefMap(c,m,o(y.getChild()),y.getAttributes())}else xt(d)?this[ve][c]=JSON.parse(JSON.stringify(d)):Array.isArray(d)||d instanceof ArrayBuffer||ArrayBuffer.isView(d)?this[ve][c]=d.slice():this[ve][c]=d}return this}equals(t,o=Hs){if(this===t)return!0;if(this.propertyType!==t.propertyType)return!1;for(const c in this[ve]){if(o.has(c))continue;const l=this[ve][c],d=t[ve][c];if(l instanceof Bt||d instanceof Bt){if(!Fs(l,d))return!1}else if(l instanceof Te||d instanceof Te||l instanceof ut||d instanceof ut){if(!ks(l,d))return!1}else if(l instanceof Ke||d instanceof Ke){if(!js(l,d))return!1}else if(xt(l)||xt(d)){if(!ci(l,d))return!1}else if(Er(l)||Er(d)){if(!fi(l,d))return!1}else if(l!==d)return!1}return!0}detach(){return this.graph.disconnectParents(this,t=>t.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class Oe extends cn{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new Ke})}getExtension(t){return this.getRefMap("extensions",t)}setExtension(t,o){return o&&o._validateParent(this),this.setRefMap("extensions",t,o)}listExtensions(){return this.listRefMapValues("extensions")}}class ue extends Oe{init(){this.propertyType=te.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:ue.Type.SCALAR,componentType:ue.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(t){switch(t){case ue.Type.SCALAR:return 1;case ue.Type.VEC2:return 2;case ue.Type.VEC3:return 3;case ue.Type.VEC4:return 4;case ue.Type.MAT2:return 4;case ue.Type.MAT3:return 9;case ue.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+t)}}static getComponentSize(t){switch(t){case ue.ComponentType.BYTE:return 1;case ue.ComponentType.UNSIGNED_BYTE:return 1;case ue.ComponentType.SHORT:return 2;case ue.ComponentType.UNSIGNED_SHORT:return 2;case ue.ComponentType.UNSIGNED_INT:return 4;case ue.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+t)}}getMinNormalized(t){const o=this.getNormalized(),c=this.getElementSize(),l=this.getComponentType();if(this.getMin(t),o)for(let d=0;d<c;d++)t[d]=Ee.decodeNormalizedInt(t[d],l);return t}getMin(t){const o=this.getArray(),c=this.getCount(),l=this.getElementSize();for(let d=0;d<l;d++)t[d]=1/0;for(let d=0;d<c*l;d+=l)for(let m=0;m<l;m++){const y=o[d+m];Number.isFinite(y)&&(t[m]=Math.min(t[m],y))}return t}getMaxNormalized(t){const o=this.getNormalized(),c=this.getElementSize(),l=this.getComponentType();if(this.getMax(t),o)for(let d=0;d<c;d++)t[d]=Ee.decodeNormalizedInt(t[d],l);return t}getMax(t){const o=this.get("array"),c=this.getCount(),l=this.getElementSize();for(let d=0;d<l;d++)t[d]=-1/0;for(let d=0;d<c*l;d+=l)for(let m=0;m<l;m++){const y=o[d+m];Number.isFinite(y)&&(t[m]=Math.max(t[m],y))}return t}getCount(){const t=this.get("array");return t?t.length/this.getElementSize():0}getType(){return this.get("type")}setType(t){return this.set("type",t)}getElementSize(){return ue.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(t){return this.set("normalized",t)}getScalar(t){const o=this.getElementSize(),c=this.getComponentType(),l=this.getArray();return this.getNormalized()?Ee.decodeNormalizedInt(l[t*o],c):l[t*o]}setScalar(t,o){const c=this.getElementSize(),l=this.getComponentType(),d=this.getArray();return this.getNormalized()?d[t*c]=Ee.encodeNormalizedInt(o,l):d[t*c]=o,this}getElement(t,o){const c=this.getNormalized(),l=this.getElementSize(),d=this.getComponentType(),m=this.getArray();for(let y=0;y<l;y++)c?o[y]=Ee.decodeNormalizedInt(m[t*l+y],d):o[y]=m[t*l+y];return o}setElement(t,o){const c=this.getNormalized(),l=this.getElementSize(),d=this.getComponentType(),m=this.getArray();for(let y=0;y<l;y++)c?m[t*l+y]=Ee.encodeNormalizedInt(o[y],d):m[t*l+y]=o[y];return this}getSparse(){return this.get("sparse")}setSparse(t){return this.set("sparse",t)}getBuffer(){return this.getRef("buffer")}setBuffer(t){return this.setRef("buffer",t)}getArray(){return this.get("array")}setArray(t){return this.set("componentType",t?Ws(t):ue.ComponentType.FLOAT),this.set("array",t),this}getByteLength(){const t=this.get("array");return t?t.byteLength:0}}ue.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};ue.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function Ws(a){switch(a.constructor){case Float32Array:return ue.ComponentType.FLOAT;case Uint32Array:return ue.ComponentType.UNSIGNED_INT;case Uint16Array:return ue.ComponentType.UNSIGNED_SHORT;case Uint8Array:return ue.ComponentType.UNSIGNED_BYTE;case Int16Array:return ue.ComponentType.SHORT;case Int8Array:return ue.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class li extends Oe{init(){this.propertyType=te.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new Te,samplers:new Te})}addChannel(t){return this.addRef("channels",t)}removeChannel(t){return this.removeRef("channels",t)}listChannels(){return this.listRefs("channels")}addSampler(t){return this.addRef("samplers",t)}removeSampler(t){return this.removeRef("samplers",t)}listSamplers(){return this.listRefs("samplers")}}class hi extends Oe{init(){this.propertyType=te.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(t){return this.set("targetPath",t)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(t){return this.setRef("targetNode",t)}getSampler(){return this.getRef("sampler")}setSampler(t){return this.setRef("sampler",t)}}hi.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class er extends Oe{init(){this.propertyType=te.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:er.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(t){return this.set("interpolation",t)}getInput(){return this.getRef("input")}setInput(t){return this.setRef("input",t,{usage:Ue.OTHER})}getOutput(){return this.getRef("output")}setOutput(t){return this.setRef("output",t,{usage:Ue.OTHER})}}er.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class di extends Oe{init(){this.propertyType=te.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(t){return this.set("uri",t)}}let tr=class pi extends Oe{init(){this.propertyType=te.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:pi.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(t){return this.set("type",t)}getZNear(){return this.get("znear")}setZNear(t){return this.set("znear",t)}getZFar(){return this.get("zfar")}setZFar(t){return this.set("zfar",t)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(t){return this.set("aspectRatio",t)}getYFov(){return this.get("yfov")}setYFov(t){return this.set("yfov",t)}getXMag(){return this.get("xmag")}setXMag(t){return this.set("xmag",t)}getYMag(){return this.get("ymag")}setYMag(t){return this.set("ymag",t)}};tr.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class $s extends cn{_validateParent(t){if(!this.parentTypes.includes(t.propertyType))throw new Error(`Parent "${t.propertyType}" invalid for child "${this.propertyType}".`)}}$s.EXTENSION_NAME=void 0;class Ve extends Oe{init(){this.propertyType=te.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Ve.WrapMode.REPEAT,wrapT:Ve.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(t){return this.set("texCoord",t)}getMagFilter(){return this.get("magFilter")}setMagFilter(t){return this.set("magFilter",t)}getMinFilter(){return this.get("minFilter")}setMinFilter(t){return this.set("minFilter",t)}getWrapS(){return this.get("wrapS")}setWrapS(t){return this.set("wrapS",t)}getWrapT(){return this.get("wrapT")}setWrapT(t){return this.set("wrapT",t)}}Ve.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};Ve.MagFilter={NEAREST:9728,LINEAR:9729};Ve.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:pr,G:gr,B:yr,A:Ys}=rn;class wt extends Oe{init(){this.propertyType=te.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:wt.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Ve(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Ve(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Ve(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Ve(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Ve(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(t){return this.set("doubleSided",t)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(t){const o=this.get("baseColorFactor").slice();return o[3]=t,this.set("baseColorFactor",o)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(t){return this.set("alphaMode",t)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(t){return this.set("alphaCutoff",t)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(t){return this.set("baseColorFactor",t)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(t){return this.setRef("baseColorTexture",t,{channels:pr|gr|yr|Ys,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(t){return this.set("emissiveFactor",t)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(t){return this.setRef("emissiveTexture",t,{channels:pr|gr|yr,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(t){return this.set("normalScale",t)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(t){return this.setRef("normalTexture",t,{channels:pr|gr|yr})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(t){return this.set("occlusionStrength",t)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(t){return this.setRef("occlusionTexture",t,{channels:pr})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(t){return this.set("roughnessFactor",t)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(t){return this.set("metallicFactor",t)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(t){return this.setRef("metallicRoughnessTexture",t,{channels:gr|yr})}}wt.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class gi extends Oe{init(){this.propertyType=te.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new Te})}addPrimitive(t){return this.addRef("primitives",t)}removePrimitive(t){return this.removeRef("primitives",t)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(t){return this.set("weights",t)}}class yi extends Oe{init(){this.propertyType=te.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new Te})}copy(t,o=lt){if(o===lt)throw new Error("Node cannot be copied.");return super.copy(t,o)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(t){return this.set("translation",t)}setRotation(t){return this.set("rotation",t)}setScale(t){return this.set("scale",t)}getMatrix(){return Ee.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(t){const o=this.get("translation").slice(),c=this.get("rotation").slice(),l=this.get("scale").slice();return Ee.decompose(t,o,c,l),this.set("translation",o).set("rotation",c).set("scale",l)}getWorldTranslation(){const t=[0,0,0];return Ee.decompose(this.getWorldMatrix(),t,[0,0,0,1],[1,1,1]),t}getWorldRotation(){const t=[0,0,0,1];return Ee.decompose(this.getWorldMatrix(),[0,0,0],t,[1,1,1]),t}getWorldScale(){const t=[1,1,1];return Ee.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],t),t}getWorldMatrix(){const t=[];for(let l=this;l!=null;l=l.getParentNode())t.push(l);let o;const c=t.pop().getMatrix();for(;o=t.pop();)Bs(c,c,o.getMatrix());return c}addChild(t){const o=t.getParentNode();o&&o.removeChild(t);for(const c of t.listParents())c.propertyType===te.SCENE&&c.removeChild(t);return this.addRef("children",t)}removeChild(t){return this.removeRef("children",t)}listChildren(){return this.listRefs("children")}getParentNode(){for(const t of this.listParents())if(t.propertyType===te.NODE)return t;return null}getMesh(){return this.getRef("mesh")}setMesh(t){return this.setRef("mesh",t)}getCamera(){return this.getRef("camera")}setCamera(t){return this.setRef("camera",t)}getSkin(){return this.getRef("skin")}setSkin(t){return this.setRef("skin",t)}getWeights(){return this.get("weights")}setWeights(t){return this.set("weights",t)}traverse(t){t(this);for(const o of this.listChildren())o.traverse(t);return this}}class Cr extends Oe{init(){this.propertyType=te.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:Cr.Mode.TRIANGLES,material:null,indices:null,attributes:new Ke,targets:new Te})}getIndices(){return this.getRef("indices")}setIndices(t){return this.setRef("indices",t,{usage:Ue.ELEMENT_ARRAY_BUFFER})}getAttribute(t){return this.getRefMap("attributes",t)}setAttribute(t,o){return this.setRefMap("attributes",t,o,{usage:Ue.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(t){return this.setRef("material",t)}getMode(){return this.get("mode")}setMode(t){return this.set("mode",t)}listTargets(){return this.listRefs("targets")}addTarget(t){return this.addRef("targets",t)}removeTarget(t){return this.removeRef("targets",t)}}Cr.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Xs extends cn{init(){this.propertyType=te.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new Ke})}getAttribute(t){return this.getRefMap("attributes",t)}setAttribute(t,o){return this.setRefMap("attributes",t,o,{usage:Ue.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Ie(){return Ie=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var c in o)({}).hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a},Ie.apply(null,arguments)}let mi=class extends Oe{init(){this.propertyType=te.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new Te})}copy(t,o=lt){if(o===lt)throw new Error("Scene cannot be copied.");return super.copy(t,o)}addChild(t){const o=t.getParentNode();return o&&o.removeChild(t),this.addRef("children",t)}removeChild(t){return this.removeRef("children",t)}listChildren(){return this.listRefs("children")}traverse(t){for(const o of this.listChildren())o.traverse(t);return this}};class vi extends Oe{init(){this.propertyType=te.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new Te})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(t){return this.setRef("skeleton",t)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(t){return this.setRef("inverseBindMatrices",t,{usage:Ue.INVERSE_BIND_MATRICES})}addJoint(t){return this.addRef("joints",t)}removeJoint(t){return this.removeRef("joints",t)}listJoints(){return this.listRefs("joints")}}class xi extends Oe{init(){this.propertyType=te.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||bt.extensionToMimeType(Ut.extension(this.get("uri")))}setMimeType(t){return this.set("mimeType",t)}getURI(){return this.get("uri")}setURI(t){this.set("uri",t);const o=bt.extensionToMimeType(Ut.extension(t));return o&&this.set("mimeType",o),this}getImage(){return this.get("image")}setImage(t){return this.set("image",me.assertView(t))}getSize(){const t=this.get("image");return t?bt.getSize(t,this.getMimeType()):null}}class Js extends Oe{init(){this.propertyType=te.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${ui}`,version:"2.0"},defaultScene:null,accessors:new Te,animations:new Te,buffers:new Te,cameras:new Te,materials:new Te,meshes:new Te,nodes:new Te,scenes:new Te,skins:new Te,textures:new Te})}constructor(t){super(t),this._extensions=new Set,t.addEventListener("node:create",o=>{this._addChildOfRoot(o.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(t,o=lt){if(o===lt)throw new Error("Root cannot be copied.");this.set("asset",Ie({},t.get("asset"))),this.setName(t.getName()),this.setExtras(Ie({},t.getExtras())),this.setDefaultScene(t.getDefaultScene()?o(t.getDefaultScene()):null);for(const c of t.listRefMapKeys("extensions")){const l=t.getExtension(c);this.setExtension(c,o(l))}return this}_addChildOfRoot(t){return t instanceof mi?this.addRef("scenes",t):t instanceof yi?this.addRef("nodes",t):t instanceof tr?this.addRef("cameras",t):t instanceof vi?this.addRef("skins",t):t instanceof gi?this.addRef("meshes",t):t instanceof wt?this.addRef("materials",t):t instanceof xi?this.addRef("textures",t):t instanceof li?this.addRef("animations",t):t instanceof ue?this.addRef("accessors",t):t instanceof di&&this.addRef("buffers",t),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(t=>t.isRequired())}_enableExtension(t){return this._extensions.add(t),this}_disableExtension(t){return this._extensions.delete(t),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(t){return this.setRef("defaultScene",t)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class Qt{static fromGraph(t){return Qt._GRAPH_DOCUMENTS.get(t)||null}constructor(){this._graph=new Is,this._root=new Js(this._graph),this._logger=je.DEFAULT_INSTANCE,Qt._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(t){return this._logger=t,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(t){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...t){const o=t.map(c=>c.name);for(const c of t)await c(this,{stack:o});return this}createExtension(t){const o=t.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(l=>l.extensionName===o)||new t(this)}createScene(t=""){return new mi(this._graph,t)}createNode(t=""){return new yi(this._graph,t)}createCamera(t=""){return new tr(this._graph,t)}createSkin(t=""){return new vi(this._graph,t)}createMesh(t=""){return new gi(this._graph,t)}createPrimitive(){return new Cr(this._graph)}createPrimitiveTarget(t=""){return new Xs(this._graph,t)}createMaterial(t=""){return new wt(this._graph,t)}createTexture(t=""){return new xi(this._graph,t)}createAnimation(t=""){return new li(this._graph,t)}createAnimationChannel(t=""){return new hi(this._graph,t)}createAnimationSampler(t=""){return new er(this._graph,t)}createAccessor(t="",o=null){return o||(o=this.getRoot().listBuffers()[0]),new ue(this._graph,t).setBuffer(o)}createBuffer(t=""){return new di(this._graph,t)}}Qt._GRAPH_DOCUMENTS=new WeakMap;class Ks{constructor(t){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=t}setTextureInfo(t,o){this.textureInfos.set(t,o),o.texCoord!==void 0&&t.setTexCoord(o.texCoord),o.extras!==void 0&&t.setExtras(o.extras);const c=this.jsonDoc.json.textures[o.index];if(c.sampler===void 0)return;const l=this.jsonDoc.json.samplers[c.sampler];l.magFilter!==void 0&&t.setMagFilter(l.magFilter),l.minFilter!==void 0&&t.setMinFilter(l.minFilter),l.wrapS!==void 0&&t.setWrapS(l.wrapS),l.wrapT!==void 0&&t.setWrapT(l.wrapT)}}const ei={logger:je.DEFAULT_INSTANCE,extensions:[],dependencies:{}},Qs=new Set([te.BUFFER,te.TEXTURE,te.MATERIAL,te.MESH,te.PRIMITIVE,te.NODE,te.SCENE]);class Zs{static read(t,o=ei){const c=Ie({},ei,o),{json:l}=t,d=new Qt().setLogger(c.logger);this.validate(t,c);const m=new Ks(t),y=l.asset,N=d.getRoot().getAsset();y.copyright&&(N.copyright=y.copyright),y.extras&&(N.extras=y.extras),l.extras!==void 0&&d.getRoot().setExtras(Ie({},l.extras));const D=l.extensionsUsed||[],G=l.extensionsRequired||[];c.extensions.sort((n,C)=>n.EXTENSION_NAME>C.EXTENSION_NAME?1:-1);for(const n of c.extensions)if(D.includes(n.EXTENSION_NAME)){const C=d.createExtension(n).setRequired(G.includes(n.EXTENSION_NAME)),O=C.prereadTypes.filter(q=>!Qs.has(q));O.length&&c.logger.warn(`Preread hooks for some types (${O.join()}), requested by extension ${C.extensionName}, are unsupported. Please file an issue or a PR.`);for(const q of C.readDependencies)C.install(q,c.dependencies[q])}const Y=l.buffers||[];d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.BUFFER)).forEach(n=>n.preread(m,te.BUFFER)),m.buffers=Y.map(n=>{const C=d.createBuffer(n.name);return n.extras&&C.setExtras(n.extras),n.uri&&n.uri.indexOf("__")!==0&&C.setURI(n.uri),C});const $=l.bufferViews||[];m.bufferViewBuffers=$.map((n,C)=>{if(!m.bufferViews[C]){const O=t.json.buffers[n.buffer],q=O.uri?t.resources[O.uri]:t.resources[br],Q=n.byteOffset||0;m.bufferViews[C]=me.toView(q,Q,n.byteLength)}return m.buffers[n.buffer]});const J=l.accessors||[];m.accessors=J.map(n=>{const C=m.bufferViewBuffers[n.bufferView],O=d.createAccessor(n.name,C).setType(n.type);return n.extras&&O.setExtras(n.extras),n.normalized!==void 0&&O.setNormalized(n.normalized),n.bufferView===void 0||O.setArray(vr(n,m)),O});const B=l.images||[],P=l.textures||[];d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.TEXTURE)).forEach(n=>n.preread(m,te.TEXTURE)),m.textures=B.map(n=>{const C=d.createTexture(n.name);if(n.extras&&C.setExtras(n.extras),n.bufferView!==void 0){const O=l.bufferViews[n.bufferView],q=t.json.buffers[O.buffer],Q=q.uri?t.resources[q.uri]:t.resources[br],ee=O.byteOffset||0,F=O.byteLength,ne=Q.slice(ee,ee+F);C.setImage(ne)}else n.uri!==void 0&&(C.setImage(t.resources[n.uri]),n.uri.indexOf("__")!==0&&C.setURI(n.uri));if(n.mimeType!==void 0)C.setMimeType(n.mimeType);else if(n.uri){const O=Ut.extension(n.uri);C.setMimeType(bt.extensionToMimeType(O))}return C}),d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.MATERIAL)).forEach(n=>n.preread(m,te.MATERIAL));const W=l.materials||[];m.materials=W.map(n=>{const C=d.createMaterial(n.name);n.extras&&C.setExtras(n.extras),n.alphaMode!==void 0&&C.setAlphaMode(n.alphaMode),n.alphaCutoff!==void 0&&C.setAlphaCutoff(n.alphaCutoff),n.doubleSided!==void 0&&C.setDoubleSided(n.doubleSided);const O=n.pbrMetallicRoughness||{};if(O.baseColorFactor!==void 0&&C.setBaseColorFactor(O.baseColorFactor),n.emissiveFactor!==void 0&&C.setEmissiveFactor(n.emissiveFactor),O.metallicFactor!==void 0&&C.setMetallicFactor(O.metallicFactor),O.roughnessFactor!==void 0&&C.setRoughnessFactor(O.roughnessFactor),O.baseColorTexture!==void 0){const q=O.baseColorTexture,Q=m.textures[P[q.index].source];C.setBaseColorTexture(Q),m.setTextureInfo(C.getBaseColorTextureInfo(),q)}if(n.emissiveTexture!==void 0){const q=n.emissiveTexture,Q=m.textures[P[q.index].source];C.setEmissiveTexture(Q),m.setTextureInfo(C.getEmissiveTextureInfo(),q)}if(n.normalTexture!==void 0){const q=n.normalTexture,Q=m.textures[P[q.index].source];C.setNormalTexture(Q),m.setTextureInfo(C.getNormalTextureInfo(),q),n.normalTexture.scale!==void 0&&C.setNormalScale(n.normalTexture.scale)}if(n.occlusionTexture!==void 0){const q=n.occlusionTexture,Q=m.textures[P[q.index].source];C.setOcclusionTexture(Q),m.setTextureInfo(C.getOcclusionTextureInfo(),q),n.occlusionTexture.strength!==void 0&&C.setOcclusionStrength(n.occlusionTexture.strength)}if(O.metallicRoughnessTexture!==void 0){const q=O.metallicRoughnessTexture,Q=m.textures[P[q.index].source];C.setMetallicRoughnessTexture(Q),m.setTextureInfo(C.getMetallicRoughnessTextureInfo(),q)}return C}),d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.MESH)).forEach(n=>n.preread(m,te.MESH));const x=l.meshes||[];d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.PRIMITIVE)).forEach(n=>n.preread(m,te.PRIMITIVE)),m.meshes=x.map(n=>{const C=d.createMesh(n.name);return n.extras&&C.setExtras(n.extras),n.weights!==void 0&&C.setWeights(n.weights),(n.primitives||[]).forEach(q=>{const Q=d.createPrimitive();q.extras&&Q.setExtras(q.extras),q.material!==void 0&&Q.setMaterial(m.materials[q.material]),q.mode!==void 0&&Q.setMode(q.mode);for(const[ne,ie]of Object.entries(q.attributes||{}))Q.setAttribute(ne,m.accessors[ie]);q.indices!==void 0&&Q.setIndices(m.accessors[q.indices]);const ee=n.extras&&n.extras.targetNames||[];(q.targets||[]).forEach((ne,ie)=>{const fe=ee[ie]||ie.toString(),ge=d.createPrimitiveTarget(fe);for(const[Me,Re]of Object.entries(ne))ge.setAttribute(Me,m.accessors[Re]);Q.addTarget(ge)}),C.addPrimitive(Q)}),C});const K=l.cameras||[];m.cameras=K.map(n=>{const C=d.createCamera(n.name).setType(n.type);if(n.extras&&C.setExtras(n.extras),n.type===tr.Type.PERSPECTIVE){const O=n.perspective;C.setYFov(O.yfov),C.setZNear(O.znear),O.zfar!==void 0&&C.setZFar(O.zfar),O.aspectRatio!==void 0&&C.setAspectRatio(O.aspectRatio)}else{const O=n.orthographic;C.setZNear(O.znear).setZFar(O.zfar).setXMag(O.xmag).setYMag(O.ymag)}return C});const I=l.nodes||[];d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.NODE)).forEach(n=>n.preread(m,te.NODE)),m.nodes=I.map(n=>{const C=d.createNode(n.name);if(n.extras&&C.setExtras(n.extras),n.translation!==void 0&&C.setTranslation(n.translation),n.rotation!==void 0&&C.setRotation(n.rotation),n.scale!==void 0&&C.setScale(n.scale),n.matrix!==void 0){const O=[0,0,0],q=[0,0,0,1],Q=[1,1,1];Ee.decompose(n.matrix,O,q,Q),C.setTranslation(O),C.setRotation(q),C.setScale(Q)}return n.weights!==void 0&&C.setWeights(n.weights),C});const U=l.skins||[];m.skins=U.map(n=>{const C=d.createSkin(n.name);n.extras&&C.setExtras(n.extras),n.inverseBindMatrices!==void 0&&C.setInverseBindMatrices(m.accessors[n.inverseBindMatrices]),n.skeleton!==void 0&&C.setSkeleton(m.nodes[n.skeleton]);for(const O of n.joints)C.addJoint(m.nodes[O]);return C}),I.map((n,C)=>{const O=m.nodes[C];(n.children||[]).forEach(Q=>O.addChild(m.nodes[Q])),n.mesh!==void 0&&O.setMesh(m.meshes[n.mesh]),n.camera!==void 0&&O.setCamera(m.cameras[n.camera]),n.skin!==void 0&&O.setSkin(m.skins[n.skin])});const L=l.animations||[];m.animations=L.map(n=>{const C=d.createAnimation(n.name);n.extras&&C.setExtras(n.extras);const q=(n.samplers||[]).map(ee=>{const F=d.createAnimationSampler().setInput(m.accessors[ee.input]).setOutput(m.accessors[ee.output]).setInterpolation(ee.interpolation||er.Interpolation.LINEAR);return ee.extras&&F.setExtras(ee.extras),C.addSampler(F),F});return(n.channels||[]).forEach(ee=>{const F=d.createAnimationChannel().setSampler(q[ee.sampler]).setTargetPath(ee.target.path);ee.target.node!==void 0&&F.setTargetNode(m.nodes[ee.target.node]),ee.extras&&F.setExtras(ee.extras),C.addChannel(F)}),C});const j=l.scenes||[];return d.getRoot().listExtensionsUsed().filter(n=>n.prereadTypes.includes(te.SCENE)).forEach(n=>n.preread(m,te.SCENE)),m.scenes=j.map(n=>{const C=d.createScene(n.name);return n.extras&&C.setExtras(n.extras),(n.nodes||[]).map(q=>m.nodes[q]).forEach(q=>C.addChild(q)),C}),l.scene!==void 0&&d.getRoot().setDefaultScene(m.scenes[l.scene]),d.getRoot().listExtensionsUsed().forEach(n=>n.read(m)),J.forEach((n,C)=>{const O=m.accessors[C],q=!!n.sparse,Q=!n.bufferView&&!O.getArray();(q||Q)&&O.setSparse(!0).setArray(to(n,m))}),d}static validate(t,o){const c=t.json;if(c.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${c.asset.version}".`);if(c.extensionsRequired){for(const l of c.extensionsRequired)if(!o.extensions.find(d=>d.EXTENSION_NAME===l))throw new Error(`Missing required extension, "${l}".`)}if(c.extensionsUsed)for(const l of c.extensionsUsed)o.extensions.find(d=>d.EXTENSION_NAME===l)||o.logger.warn(`Missing optional extension, "${l}".`)}}function eo(a,t){const o=t.jsonDoc,c=t.bufferViews[a.bufferView],l=o.json.bufferViews[a.bufferView],d=Ar[a.componentType],m=ue.getElementSize(a.type),y=d.BYTES_PER_ELEMENT,N=a.byteOffset||0,D=new d(a.count*m),G=new DataView(c.buffer,c.byteOffset,c.byteLength),Y=l.byteStride;for(let $=0;$<a.count;$++)for(let J=0;J<m;J++){const B=N+$*Y+J*y;let P;switch(a.componentType){case ue.ComponentType.FLOAT:P=G.getFloat32(B,!0);break;case ue.ComponentType.UNSIGNED_INT:P=G.getUint32(B,!0);break;case ue.ComponentType.UNSIGNED_SHORT:P=G.getUint16(B,!0);break;case ue.ComponentType.UNSIGNED_BYTE:P=G.getUint8(B);break;case ue.ComponentType.SHORT:P=G.getInt16(B,!0);break;case ue.ComponentType.BYTE:P=G.getInt8(B);break;default:throw new Error(`Unexpected componentType "${a.componentType}".`)}D[$*m+J]=P}return D}function vr(a,t){const o=t.jsonDoc,c=t.bufferViews[a.bufferView],l=o.json.bufferViews[a.bufferView],d=Ar[a.componentType],m=ue.getElementSize(a.type),y=d.BYTES_PER_ELEMENT,N=m*y;if(l.byteStride!==void 0&&l.byteStride!==N)return eo(a,t);const D=c.byteOffset+(a.byteOffset||0),G=a.count*m*y;return new d(c.buffer.slice(D,D+G))}function to(a,t){const o=Ar[a.componentType],c=ue.getElementSize(a.type);let l;a.bufferView!==void 0?l=vr(a,t):l=new o(a.count*c);const d=a.sparse;if(!d)return l;const m=d.count,y=Ie({},a,d.indices,{count:m,type:"SCALAR"}),N=Ie({},a,d.values,{count:m}),D=vr(y,t),G=vr(N,t);for(let Y=0;Y<y.count;Y++)for(let $=0;$<c;$++)l[D[Y]*c+$]=G[Y*c+$];return l}var Zt;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(Zt||(Zt={}));class Tt{constructor(t,o,c){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=t,this.jsonDoc=o,this.options=c;const l=t.getRoot(),d=l.listBuffers().length,m=l.listTextures().length;this.bufferURIGenerator=new ti(d>1,()=>c.basename||"buffer"),this.imageURIGenerator=new ti(m>1,y=>ro(t,y)||c.basename||"texture"),this.logger=t.getLogger()}createTextureInfoDef(t,o){const c={magFilter:o.getMagFilter()||void 0,minFilter:o.getMinFilter()||void 0,wrapS:o.getWrapS(),wrapT:o.getWrapT()},l=JSON.stringify(c);this.samplerDefIndexMap.has(l)||(this.samplerDefIndexMap.set(l,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(c));const d={source:this.imageIndexMap.get(t),sampler:this.samplerDefIndexMap.get(l)},m=JSON.stringify(d);this.textureDefIndexMap.has(m)||(this.textureDefIndexMap.set(m,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(d));const y={index:this.textureDefIndexMap.get(m)};return o.getTexCoord()!==0&&(y.texCoord=o.getTexCoord()),Object.keys(o.getExtras()).length>0&&(y.extras=o.getExtras()),this.textureInfoDefMap.set(o,y),y}createPropertyDef(t){const o={};return t.getName()&&(o.name=t.getName()),Object.keys(t.getExtras()).length>0&&(o.extras=t.getExtras()),o}createAccessorDef(t){const o=this.createPropertyDef(t);return o.type=t.getType(),o.componentType=t.getComponentType(),o.count=t.getCount(),this._doc.getGraph().listParentEdges(t).some(l=>l.getName()==="attributes"&&l.getAttributes().key==="POSITION"||l.getName()==="input")&&(o.max=t.getMax([]).map(Math.fround),o.min=t.getMin([]).map(Math.fround)),t.getNormalized()&&(o.normalized=t.getNormalized()),o}createImageData(t,o,c){if(this.options.format===ft.GLB)this.imageBufferViews.push(o),t.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:o.byteLength});else{const l=bt.mimeTypeToExtension(c.getMimeType());t.uri=this.imageURIGenerator.createURI(c,l),this.assignResourceURI(t.uri,o,!1)}}assignResourceURI(t,o,c){const l=this.jsonDoc.resources;if(!(t in l)){l[t]=o;return}if(o===l[t]){this.logger.warn(`Duplicate resource URI, "${t}".`);return}const d=`Resource URI "${t}" already assigned to different data.`;if(!c){this.logger.warn(d);return}throw new Error(d)}getAccessorUsage(t){const o=this._accessorUsageMap.get(t);if(o)return o;if(t.getSparse())return Ue.SPARSE;for(const c of this._doc.getGraph().listParentEdges(t)){const{usage:l}=c.getAttributes();if(l)return l;c.getParent().propertyType!==te.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${c.getName()}".`)}return Ue.OTHER}addAccessorToUsageGroup(t,o){const c=this._accessorUsageMap.get(t);if(c&&c!==o)throw new Error(`Accessor with usage "${c}" cannot be reused as "${o}".`);return this._accessorUsageMap.set(t,o),this}}Tt.BufferViewTarget=Zt;Tt.BufferViewUsage=Ue;Tt.USAGE_TO_TARGET={[Ue.ARRAY_BUFFER]:Zt.ARRAY_BUFFER,[Ue.ELEMENT_ARRAY_BUFFER]:Zt.ELEMENT_ARRAY_BUFFER};class ti{constructor(t,o){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=t,this.basename=o}createURI(t,o){if(t.getURI())return t.getURI();if(this.multiple){const c=this.basename(t);return this.counter[c]=this.counter[c]||1,`${c}_${this.counter[c]++}.${o}`}else return`${this.basename(t)}.${o}`}}function ro(a,t){const o=a.getGraph().listParentEdges(t).find(c=>c.getParent()!==a.getRoot());return o?o.getName().replace(/texture$/i,""):""}const{BufferViewUsage:mr}=Tt,{UNSIGNED_INT:no,UNSIGNED_SHORT:io,UNSIGNED_BYTE:so}=ue.ComponentType,oo=new Set([te.ACCESSOR,te.BUFFER,te.MATERIAL,te.MESH]);class ao{static write(t,o){const c=t.getGraph(),l=t.getRoot(),d={asset:Ie({generator:`glTF-Transform ${ui}`},l.getAsset()),extras:Ie({},l.getExtras())},m={json:d,resources:{}},y=new Tt(t,m,o),N=o.logger||je.DEFAULT_INSTANCE,D=new Set(o.extensions.map(x=>x.EXTENSION_NAME)),G=t.getRoot().listExtensionsUsed().filter(x=>D.has(x.extensionName)).sort((x,K)=>x.extensionName>K.extensionName?1:-1),Y=t.getRoot().listExtensionsRequired().filter(x=>D.has(x.extensionName)).sort((x,K)=>x.extensionName>K.extensionName?1:-1);G.length<t.getRoot().listExtensionsUsed().length&&N.warn("Some extensions were not registered for I/O, and will not be written.");for(const x of G){const K=x.prewriteTypes.filter(I=>!oo.has(I));K.length&&N.warn(`Prewrite hooks for some types (${K.join()}), requested by extension ${x.extensionName}, are unsupported. Please file an issue or a PR.`);for(const I of x.writeDependencies)x.install(I,o.dependencies[I])}function $(x,K,I,U){const L=[];let j=0;for(const O of x){const q=y.createAccessorDef(O);q.bufferView=d.bufferViews.length;const Q=O.getArray(),ee=me.pad(me.toView(Q));q.byteOffset=j,j+=ee.byteLength,L.push(ee),y.accessorIndexMap.set(O,d.accessors.length),d.accessors.push(q)}const n=me.concat(L),C={buffer:K,byteOffset:I,byteLength:n.byteLength};return U&&(C.target=U),d.bufferViews.push(C),{buffers:L,byteLength:j}}function J(x,K,I){const U=x[0].getCount();let L=0;for(const q of x){const Q=y.createAccessorDef(q);Q.bufferView=d.bufferViews.length,Q.byteOffset=L;const ee=q.getElementSize(),F=q.getComponentSize();L+=me.padNumber(ee*F),y.accessorIndexMap.set(q,d.accessors.length),d.accessors.push(Q)}const j=U*L,n=new ArrayBuffer(j),C=new DataView(n);for(let q=0;q<U;q++){let Q=0;for(const ee of x){const F=ee.getElementSize(),ne=ee.getComponentSize(),ie=ee.getComponentType(),fe=ee.getArray();for(let ge=0;ge<F;ge++){const Me=q*L+Q+ge*ne,Re=fe[q*F+ge];switch(ie){case ue.ComponentType.FLOAT:C.setFloat32(Me,Re,!0);break;case ue.ComponentType.BYTE:C.setInt8(Me,Re);break;case ue.ComponentType.SHORT:C.setInt16(Me,Re,!0);break;case ue.ComponentType.UNSIGNED_BYTE:C.setUint8(Me,Re);break;case ue.ComponentType.UNSIGNED_SHORT:C.setUint16(Me,Re,!0);break;case ue.ComponentType.UNSIGNED_INT:C.setUint32(Me,Re,!0);break;default:throw new Error("Unexpected component type: "+ie)}}Q+=me.padNumber(F*ne)}}const O={buffer:K,byteOffset:I,byteLength:j,byteStride:L,target:Tt.BufferViewTarget.ARRAY_BUFFER};return d.bufferViews.push(O),{byteLength:j,buffers:[new Uint8Array(n)]}}function B(x,K,I){const U=[];let L=0;const j=new Map;let n=-1/0,C=!1;for(const ie of x){const fe=y.createAccessorDef(ie);d.accessors.push(fe),y.accessorIndexMap.set(ie,d.accessors.length-1);const ge=[],Me=[],Re=[],rr=new Array(ie.getElementSize()).fill(0);for(let rt=0,Mr=ie.getCount();rt<Mr;rt++)if(ie.getElement(rt,Re),!Ee.eq(Re,rr,0)){n=Math.max(rt,n),ge.push(rt);for(let Ft=0;Ft<Re.length;Ft++)Me.push(Re[Ft])}const Rt=ge.length,At={accessorDef:fe,count:Rt};if(j.set(ie,At),Rt===0)continue;Rt>ie.getCount()/2&&(C=!0);const Dt=Ar[ie.getComponentType()];At.indices=ge,At.values=new Dt(Me)}if(!Number.isFinite(n))return{buffers:U,byteLength:L};C&&N.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const O=n<255?Uint8Array:n<65535?Uint16Array:Uint32Array,q=n<255?so:n<65535?io:no,Q={buffer:K,byteOffset:I+L,byteLength:0};for(const ie of x){const fe=j.get(ie);if(fe.count===0)continue;fe.indicesByteOffset=Q.byteLength;const ge=me.pad(me.toView(new O(fe.indices)));U.push(ge),L+=ge.byteLength,Q.byteLength+=ge.byteLength}d.bufferViews.push(Q);const ee=d.bufferViews.length-1,F={buffer:K,byteOffset:I+L,byteLength:0};for(const ie of x){const fe=j.get(ie);if(fe.count===0)continue;fe.valuesByteOffset=F.byteLength;const ge=me.pad(me.toView(fe.values));U.push(ge),L+=ge.byteLength,F.byteLength+=ge.byteLength}d.bufferViews.push(F);const ne=d.bufferViews.length-1;for(const ie of x){const fe=j.get(ie);fe.count!==0&&(fe.accessorDef.sparse={count:fe.count,indices:{bufferView:ee,byteOffset:fe.indicesByteOffset,componentType:q},values:{bufferView:ne,byteOffset:fe.valuesByteOffset}})}return{buffers:U,byteLength:L}}if(d.accessors=[],d.bufferViews=[],d.samplers=[],d.textures=[],d.images=l.listTextures().map((x,K)=>{const I=y.createPropertyDef(x);x.getMimeType()&&(I.mimeType=x.getMimeType());const U=x.getImage();return U&&y.createImageData(I,U,x),y.imageIndexMap.set(x,K),I}),G.filter(x=>x.prewriteTypes.includes(te.ACCESSOR)).forEach(x=>x.prewrite(y,te.ACCESSOR)),l.listAccessors().forEach(x=>{const K=y.accessorUsageGroupedByParent,I=y.accessorParents;if(y.accessorIndexMap.has(x))return;const U=y.getAccessorUsage(x);if(y.addAccessorToUsageGroup(x,U),K.has(U)){const L=c.listParents(x).find(j=>j.propertyType!==te.ROOT);I.set(x,L)}}),G.filter(x=>x.prewriteTypes.includes(te.BUFFER)).forEach(x=>x.prewrite(y,te.BUFFER)),(l.listAccessors().length>0||y.otherBufferViews.size>0||l.listTextures().length>0&&o.format===ft.GLB)&&l.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");d.buffers=[],l.listBuffers().forEach((x,K)=>{const I=y.createPropertyDef(x),U=y.accessorUsageGroupedByParent,L=x.listParents().filter(F=>F instanceof ue),j=new Set(L.map(F=>y.accessorParents.get(F))),n=new Map(Array.from(j).map((F,ne)=>[F,ne])),C={};for(const F of L){var O;if(y.accessorIndexMap.has(F))continue;const ne=y.getAccessorUsage(F);let ie=ne;if(U.has(ne)){const fe=y.accessorParents.get(F);ie+=`:${n.get(fe)}`}C[O=ie]||(C[O]={usage:ne,accessors:[]}),C[ie].accessors.push(F)}const q=[],Q=d.buffers.length;let ee=0;for(const{usage:F,accessors:ne}of Object.values(C))if(F===mr.ARRAY_BUFFER&&o.vertexLayout===Tr.INTERLEAVED){const ie=J(ne,Q,ee);ee+=ie.byteLength;for(const fe of ie.buffers)q.push(fe)}else if(F===mr.ARRAY_BUFFER)for(const ie of ne){const fe=J([ie],Q,ee);ee+=fe.byteLength;for(const ge of fe.buffers)q.push(ge)}else if(F===mr.SPARSE){const ie=B(ne,Q,ee);ee+=ie.byteLength;for(const fe of ie.buffers)q.push(fe)}else if(F===mr.ELEMENT_ARRAY_BUFFER){const ie=Tt.BufferViewTarget.ELEMENT_ARRAY_BUFFER,fe=$(ne,Q,ee,ie);ee+=fe.byteLength;for(const ge of fe.buffers)q.push(ge)}else{const ie=$(ne,Q,ee);ee+=ie.byteLength;for(const fe of ie.buffers)q.push(fe)}if(y.imageBufferViews.length&&K===0){for(let F=0;F<y.imageBufferViews.length;F++)if(d.bufferViews[d.images[F].bufferView].byteOffset=ee,ee+=y.imageBufferViews[F].byteLength,q.push(y.imageBufferViews[F]),ee%8){const ne=8-ee%8;ee+=ne,q.push(new Uint8Array(ne))}}if(y.otherBufferViews.has(x))for(const F of y.otherBufferViews.get(x))d.bufferViews.push({buffer:Q,byteOffset:ee,byteLength:F.byteLength}),y.otherBufferViewsIndexMap.set(F,d.bufferViews.length-1),ee+=F.byteLength,q.push(F);if(ee){let F;o.format===ft.GLB?F=br:(F=y.bufferURIGenerator.createURI(x,"bin"),I.uri=F),I.byteLength=ee,y.assignResourceURI(F,me.concat(q),!0)}d.buffers.push(I),y.bufferIndexMap.set(x,K)}),l.listAccessors().find(x=>!x.getBuffer())&&N.warn("Skipped writing one or more Accessors: no Buffer assigned."),G.filter(x=>x.prewriteTypes.includes(te.MATERIAL)).forEach(x=>x.prewrite(y,te.MATERIAL)),d.materials=l.listMaterials().map((x,K)=>{const I=y.createPropertyDef(x);if(x.getAlphaMode()!==wt.AlphaMode.OPAQUE&&(I.alphaMode=x.getAlphaMode()),x.getAlphaMode()===wt.AlphaMode.MASK&&(I.alphaCutoff=x.getAlphaCutoff()),x.getDoubleSided()&&(I.doubleSided=!0),I.pbrMetallicRoughness={},Ee.eq(x.getBaseColorFactor(),[1,1,1,1])||(I.pbrMetallicRoughness.baseColorFactor=x.getBaseColorFactor()),Ee.eq(x.getEmissiveFactor(),[0,0,0])||(I.emissiveFactor=x.getEmissiveFactor()),x.getRoughnessFactor()!==1&&(I.pbrMetallicRoughness.roughnessFactor=x.getRoughnessFactor()),x.getMetallicFactor()!==1&&(I.pbrMetallicRoughness.metallicFactor=x.getMetallicFactor()),x.getBaseColorTexture()){const U=x.getBaseColorTexture(),L=x.getBaseColorTextureInfo();I.pbrMetallicRoughness.baseColorTexture=y.createTextureInfoDef(U,L)}if(x.getEmissiveTexture()){const U=x.getEmissiveTexture(),L=x.getEmissiveTextureInfo();I.emissiveTexture=y.createTextureInfoDef(U,L)}if(x.getNormalTexture()){const U=x.getNormalTexture(),L=x.getNormalTextureInfo(),j=y.createTextureInfoDef(U,L);x.getNormalScale()!==1&&(j.scale=x.getNormalScale()),I.normalTexture=j}if(x.getOcclusionTexture()){const U=x.getOcclusionTexture(),L=x.getOcclusionTextureInfo(),j=y.createTextureInfoDef(U,L);x.getOcclusionStrength()!==1&&(j.strength=x.getOcclusionStrength()),I.occlusionTexture=j}if(x.getMetallicRoughnessTexture()){const U=x.getMetallicRoughnessTexture(),L=x.getMetallicRoughnessTextureInfo();I.pbrMetallicRoughness.metallicRoughnessTexture=y.createTextureInfoDef(U,L)}return y.materialIndexMap.set(x,K),I}),G.filter(x=>x.prewriteTypes.includes(te.MESH)).forEach(x=>x.prewrite(y,te.MESH)),d.meshes=l.listMeshes().map((x,K)=>{const I=y.createPropertyDef(x);let U=null;return I.primitives=x.listPrimitives().map(L=>{const j={attributes:{}};j.mode=L.getMode();const n=L.getMaterial();n&&(j.material=y.materialIndexMap.get(n)),Object.keys(L.getExtras()).length&&(j.extras=L.getExtras());const C=L.getIndices();C&&(j.indices=y.accessorIndexMap.get(C));for(const O of L.listSemantics())j.attributes[O]=y.accessorIndexMap.get(L.getAttribute(O));for(const O of L.listTargets()){const q={};for(const Q of O.listSemantics())q[Q]=y.accessorIndexMap.get(O.getAttribute(Q));j.targets=j.targets||[],j.targets.push(q)}return L.listTargets().length&&!U&&(U=L.listTargets().map(O=>O.getName())),j}),x.getWeights().length&&(I.weights=x.getWeights()),U&&(I.extras=I.extras||{},I.extras.targetNames=U),y.meshIndexMap.set(x,K),I}),d.cameras=l.listCameras().map((x,K)=>{const I=y.createPropertyDef(x);if(I.type=x.getType(),I.type===tr.Type.PERSPECTIVE){I.perspective={znear:x.getZNear(),zfar:x.getZFar(),yfov:x.getYFov()};const U=x.getAspectRatio();U!==null&&(I.perspective.aspectRatio=U)}else I.orthographic={znear:x.getZNear(),zfar:x.getZFar(),xmag:x.getXMag(),ymag:x.getYMag()};return y.cameraIndexMap.set(x,K),I}),d.nodes=l.listNodes().map((x,K)=>{const I=y.createPropertyDef(x);return Ee.eq(x.getTranslation(),[0,0,0])||(I.translation=x.getTranslation()),Ee.eq(x.getRotation(),[0,0,0,1])||(I.rotation=x.getRotation()),Ee.eq(x.getScale(),[1,1,1])||(I.scale=x.getScale()),x.getWeights().length&&(I.weights=x.getWeights()),y.nodeIndexMap.set(x,K),I}),d.skins=l.listSkins().map((x,K)=>{const I=y.createPropertyDef(x),U=x.getInverseBindMatrices();U&&(I.inverseBindMatrices=y.accessorIndexMap.get(U));const L=x.getSkeleton();return L&&(I.skeleton=y.nodeIndexMap.get(L)),I.joints=x.listJoints().map(j=>y.nodeIndexMap.get(j)),y.skinIndexMap.set(x,K),I}),l.listNodes().forEach((x,K)=>{const I=d.nodes[K],U=x.getMesh();U&&(I.mesh=y.meshIndexMap.get(U));const L=x.getCamera();L&&(I.camera=y.cameraIndexMap.get(L));const j=x.getSkin();j&&(I.skin=y.skinIndexMap.get(j)),x.listChildren().length>0&&(I.children=x.listChildren().map(n=>y.nodeIndexMap.get(n)))}),d.animations=l.listAnimations().map((x,K)=>{const I=y.createPropertyDef(x),U=new Map;return I.samplers=x.listSamplers().map((L,j)=>{const n=y.createPropertyDef(L);return n.input=y.accessorIndexMap.get(L.getInput()),n.output=y.accessorIndexMap.get(L.getOutput()),n.interpolation=L.getInterpolation(),U.set(L,j),n}),I.channels=x.listChannels().map(L=>{const j=y.createPropertyDef(L);return j.sampler=U.get(L.getSampler()),j.target={node:y.nodeIndexMap.get(L.getTargetNode()),path:L.getTargetPath()},j}),y.animationIndexMap.set(x,K),I}),d.scenes=l.listScenes().map((x,K)=>{const I=y.createPropertyDef(x);return I.nodes=x.listChildren().map(U=>y.nodeIndexMap.get(U)),y.sceneIndexMap.set(x,K),I});const W=l.getDefaultScene();return W&&(d.scene=l.listScenes().indexOf(W)),d.extensionsUsed=G.map(x=>x.extensionName),d.extensionsRequired=Y.map(x=>x.extensionName),G.forEach(x=>x.write(y)),uo(d),m}}function uo(a){const t=[];for(const o in a){const c=a[o];(Array.isArray(c)&&c.length===0||c===null||c===""||c&&typeof c=="object"&&Object.keys(c).length===0)&&t.push(o)}for(const o of t)delete a[o]}var wr;(function(a){a[a.JSON=1313821514]="JSON",a[a.BIN=5130562]="BIN"})(wr||(wr={}));class fo{constructor(){this._logger=je.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=Tr.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(t){return this._logger=t,this}registerExtensions(t){for(const o of t)this._extensions.add(o),o.register();return this}registerDependencies(t){return Object.assign(this._dependencies,t),this}setVertexLayout(t){return this._vertexLayout=t,this}async read(t){return await this.readJSON(await this.readAsJSON(t))}async readAsJSON(t){const o=await this.readURI(t,"view");this.lastReadBytes=o.byteLength;const c=ri(o)?this._binaryToJSON(o):{json:JSON.parse(me.decodeText(o)),resources:{}};return await this._readResourcesExternal(c,this.dirname(t)),this._readResourcesInternal(c),c}async readJSON(t){return t=this._copyJSON(t),this._readResourcesInternal(t),Zs.read(t,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(t){const o=this._binaryToJSON(me.assertView(t));this._readResourcesInternal(o);const c=o.json;if(c.buffers&&c.buffers.some(l=>co(o,l)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(c.images&&c.images.some(l=>lo(o,l)))throw new Error("Cannot resolve external images with binaryToJSON().");return o}async readBinary(t){return this.readJSON(await this.binaryToJSON(me.assertView(t)))}async writeJSON(t,o={}){if(o.format===ft.GLB&&t.getRoot().listBuffers().length>1)throw new Error("GLB must have 0â€“1 buffers.");return ao.write(t,{format:o.format||ft.GLTF,basename:o.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Ie({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(t){const{json:o,resources:c}=await this.writeJSON(t,{format:ft.GLB}),l=new Uint32Array([1179937895,2,12]),d=JSON.stringify(o),m=me.pad(me.encodeText(d),32),y=me.toView(new Uint32Array([m.byteLength,1313821514])),N=me.concat([y,m]);l[l.length-1]+=N.byteLength;const D=Object.values(c)[0];if(!D||!D.byteLength)return me.concat([me.toView(l),N]);const G=me.pad(D,0),Y=me.toView(new Uint32Array([G.byteLength,5130562])),$=me.concat([Y,G]);return l[l.length-1]+=$.byteLength,me.concat([me.toView(l),N,$])}async _readResourcesExternal(t,o){var c=this;const l=t.json.images||[],d=t.json.buffers||[],m=[...l,...d].map(async function(y){const N=y.uri;if(!N||N.match(/data:/))return Promise.resolve();t.resources[N]=await c.readURI(c.resolve(o,N),"view"),c.lastReadBytes+=t.resources[N].byteLength});await Promise.all(m)}_readResourcesInternal(t){function o(d){if(d.uri){if(d.uri in t.resources){me.assertView(t.resources[d.uri]);return}if(d.uri.match(/data:/)){const m=`__${zs()}.${Ut.extension(d.uri)}`;t.resources[m]=me.createBufferFromDataURI(d.uri),d.uri=m}}}(t.json.images||[]).forEach(d=>{if(d.bufferView===void 0&&d.uri===void 0)throw new Error("Missing resource URI or buffer view.");o(d)}),(t.json.buffers||[]).forEach(o)}_copyJSON(t){const{images:o,buffers:c}=t.json;return t={json:Ie({},t.json),resources:Ie({},t.resources)},o&&(t.json.images=o.map(l=>Ie({},l))),c&&(t.json.buffers=c.map(l=>Ie({},l))),t}_binaryToJSON(t){if(!ri(t))throw new Error("Invalid glTF 2.0 binary.");const o=new Uint32Array(t.buffer,t.byteOffset+12,2);if(o[1]!==wr.JSON)throw new Error("Missing required GLB JSON chunk.");const c=20,l=o[0],d=me.decodeText(me.toView(t,c,l)),m=JSON.parse(d),y=c+l;if(t.byteLength<=y)return{json:m,resources:{}};const N=new Uint32Array(t.buffer,t.byteOffset+y,2);if(N[1]!==wr.BIN)return{json:m,resources:{}};const D=N[0],G=me.toView(t,y+8,D);return{json:m,resources:{[br]:G}}}}function co(a,t){return t.uri!==void 0&&!(t.uri in a.resources)}function lo(a,t){return t.uri!==void 0&&!(t.uri in a.resources)&&t.bufferView===void 0}function ri(a){if(a.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const t=new Uint32Array(a.buffer,a.byteOffset,3);return t[0]===1179937895&&t[1]===2}class ho extends fo{constructor(t=Kt.DEFAULT_INIT){super(),this._fetchConfig=void 0,this._fetchConfig=t}async readURI(t,o){const c=await fetch(t,this._fetchConfig);switch(o){case"view":return new Uint8Array(await c.arrayBuffer());case"text":return c.text()}}resolve(t,o){return Kt.resolve(t,o)}dirname(t){return Kt.dirname(t)}}class po{constructor(){V(this,"vertices");V(this,"indices");V(this,"vertexCount");V(this,"indexCount");this.vertices=[],this.indices=[]}async loadGLTF(t){var $,J,B,P;const d=(await new ho().read(t)).getRoot().listMeshes()[0];if(console.log(d),!d){console.error("No meshes found in glTF file.");return}const m=d.listPrimitives()[0];if(!m){console.error("No primitives found in the mesh.");return}const y=($=m.getAttribute("POSITION"))==null?void 0:$.getArray(),N=(J=m.getAttribute("NORMAL"))==null?void 0:J.getArray(),D=(B=m.getAttribute("TEXCOORD_0"))==null?void 0:B.getArray(),G=(P=m.getIndices())==null?void 0:P.getArray();if(!y||!G){console.error("Missing position or index data!");return}const Y=y.length/3;for(let W=0;W<Y;W++)this.vertices.push({position:Qr(y[W*3],y[W*3+1],y[W*3+2]),color:Qr(1,1,1),normal:N?Qr(N[W*3],N[W*3+1],N[W*3+2]):ot(),uv:D?Ms(D[W*2],D[W*2+1]):oi()});this.indices=Array.from(G)}getFlattenedVertices(){const t=new Float32Array(this.vertices.length*5);for(let o=0;o<this.vertices.length;o++){const c=this.vertices[o];t.set([...c.position,...c.uv],o*5)}return t}getIndexArray(){return new Uint32Array(this.indices)}async loadFile(t){return await(await(await fetch(t)).blob()).text()}}class go{constructor(t,o){V(this,"device");V(this,"vertices");V(this,"buffer");V(this,"bufferLayout");V(this,"indices");V(this,"vertexBuffer");V(this,"indexBuffer");V(this,"material");V(this,"vertexCount");V(this,"indexCount");this.device=t;const c=o.getFlattenedVertices(),l=o.getIndexArray();this.vertexCount=o.vertices.length,this.indexCount=o.indices.length,this.createBuffers(c,l)}init(){this.vertexCount=this.vertices.length/5;const t=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,o={size:this.vertices.byteLength,usage:t,mappedAtCreation:!0};this.buffer=this.device.createBuffer(o),new Float32Array(this.buffer.getMappedRange()).set(this.vertices),this.buffer.unmap(),this.bufferLayout={arrayStride:5*4,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:3*4}]}}createBuffers(t,o){this.vertexBuffer=this.device.createBuffer({size:t.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0}),new Float32Array(this.vertexBuffer.getMappedRange()).set(t),this.vertexBuffer.unmap(),this.indexBuffer=this.device.createBuffer({size:o.byteLength,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0}),new Uint32Array(this.indexBuffer.getMappedRange()).set(o),this.indexBuffer.unmap(),this.bufferLayout={arrayStride:5*4,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:3*4}]}}bind(t){t.setVertexBuffer(0,this.vertexBuffer),t.setIndexBuffer(this.indexBuffer,"uint32")}draw(t,o){t.drawIndexed(this.indexCount,1,0,0,o)}}class yo{constructor(t){V(this,"canvas");V(this,"adaptor");V(this,"device");V(this,"context");V(this,"format");V(this,"uniformBuffer");V(this,"pipeline");V(this,"frameGroupLayout");V(this,"materialGroupLayout");V(this,"frameBindGroup");V(this,"depthStencilState");V(this,"depthStencilBuffer");V(this,"depthStencilView");V(this,"depthStencilAttachment");V(this,"triangleMesh");V(this,"quadMesh");V(this,"model");V(this,"triangleMaterial");V(this,"quadMaterial");V(this,"objectBuffer");V(this,"builder");this.canvas=t}async init(){await this.setupDevice(),await this.setupBindGroupLayouts(),await this.createAssets(),await this.setupDepthBufferResources(),await this.setupPipeline(),await this.setupBindGroup()}async setupDevice(){var o,c;this.adaptor=await((o=navigator.gpu)==null?void 0:o.requestAdapter()),this.device=await((c=this.adaptor)==null?void 0:c.requestDevice());const t=document.querySelector("#compcheck");if(this.adaptor)t.innerHTML="WebGPU is supported. Click to the canvas";else{t.innerHTML="WebGPU is not supported",console.error("WebGPU is not supported on this device!");return}this.context=this.canvas.getContext("webgpu"),this.format="bgra8unorm",this.context.configure({device:this.device,format:this.format,alphaMode:"opaque"})}async setupBindGroupLayouts(){this.frameGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"read-only-storage",hasDynamicOffset:!1}}]}),this.materialGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}}]})}async setupDepthBufferResources(){this.depthStencilState={format:"depth24plus-stencil8",depthWriteEnabled:!0,depthCompare:"less-equal"};const o={size:{width:this.canvas.width,height:this.canvas.height,depthOrArrayLayers:1},format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT};this.depthStencilBuffer=this.device.createTexture(o);const c={format:"depth24plus-stencil8",dimension:"2d",aspect:"all"};this.depthStencilView=this.depthStencilBuffer.createView(c),this.depthStencilAttachment={view:this.depthStencilView,depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store",stencilLoadOp:"clear",stencilStoreOp:"discard"}}async setupPipeline(){const t=this.device.createPipelineLayout({bindGroupLayouts:[this.frameGroupLayout,this.materialGroupLayout]});this.pipeline=this.device.createRenderPipeline({layout:t,vertex:{module:this.device.createShaderModule({code:Yn}),entryPoint:"vs_main",buffers:[this.triangleMesh.bufferLayout]},fragment:{module:this.device.createShaderModule({code:Yn}),entryPoint:"fs_main",targets:[{format:this.format}]},primitive:{topology:"triangle-list"},depthStencil:this.depthStencilState})}async createAssets(){this.triangleMesh=new Ts(this.device),this.triangleMaterial=new $n,this.quadMesh=new Ns(this.device),this.quadMaterial=new $n,await this.quadMaterial.initComputeShader(this.device),this.builder=new po,await this.builder.loadGLTF("models/flat_vase.glb"),this.model=new go(this.device,this.builder),this.uniformBuffer=this.device.createBuffer({size:64*2,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const t={size:64*1024,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.STORAGE};this.objectBuffer=this.device.createBuffer(t),await this.triangleMaterial.init(this.device,"img/img.jpeg",this.materialGroupLayout),await this.quadMaterial.init(this.device,"img/floor.jpg",this.materialGroupLayout)}async render(t){if(!this.device){console.error("DEVICE IS NOT CREATED");return}if(!this.pipeline){console.error("PIPELINE IS NOT CREATED");return}const o=Et();As(o,Math.PI/4,800/600,.1,50);const c=t.viewTransform;this.device.queue.writeBuffer(this.objectBuffer,0,t.modelTransform,0,t.modelTransform.length),this.device.queue.writeBuffer(this.uniformBuffer,0,new Float32Array(c)),this.device.queue.writeBuffer(this.uniformBuffer,64,new Float32Array(o));const l=this.device.createCommandEncoder(),d=this.context.getCurrentTexture().createView(),m=l.beginRenderPass({colorAttachments:[{view:d,clearValue:{r:.5,g:0,b:.25,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:this.depthStencilAttachment});m.setPipeline(this.pipeline),m.setBindGroup(0,this.frameBindGroup);let y=0;m.setVertexBuffer(0,this.triangleMesh.buffer),m.setBindGroup(1,this.triangleMaterial.bindGroup),m.draw(3,t.objectCounts[vt.TRIANGLE],0,y),y+=t.objectCounts[vt.TRIANGLE],m.setVertexBuffer(0,this.quadMesh.buffer),m.setBindGroup(1,this.quadMaterial.bindGroup),m.draw(6,t.objectCounts[vt.QUAD],0,y),y+=t.objectCounts[vt.QUAD],this.model.bind(m),m.setBindGroup(1,this.triangleMaterial.bindGroup),this.model.draw(m,y),y+=1,m.end(),this.device.queue.submit([l.finish()])}async setupBindGroup(){this.frameBindGroup=this.device.createBindGroup({layout:this.frameGroupLayout,entries:[{binding:0,resource:{buffer:this.uniformBuffer}},{binding:1,resource:{buffer:this.objectBuffer}}]})}}function at(a){return a*Math.PI/180}class mo{constructor(t,o){V(this,"position");V(this,"eulers");V(this,"model");this.position=t,this.eulers=ot(),this.eulers[2]=o}update(){this.eulers[2]+=6,this.eulers[2]%=360,this.model=Et(),un(this.model,this.model,this.position),si(this.model,this.model,at(this.eulers[2]))}getModel(){return this.model}}class vo{constructor(t,o,c){V(this,"position");V(this,"eulers");V(this,"view");V(this,"forwards");V(this,"right");V(this,"up");this.position=t,this.eulers=ot(),this.eulers=[0,c,o],this.forwards=ot(),this.right=ot(),this.up=ot()}update(){this.forwards=[Math.cos(at(this.eulers[2]))*Math.cos(at(this.eulers[1])),Math.sin(at(this.eulers[2]))*Math.cos(at(this.eulers[1])),Math.sin(at(this.eulers[1]))],Xn(this.right,this.forwards,[0,0,1]),Xn(this.up,this.right,this.forwards);const t=ot();Cs(t,this.position,this.forwards),this.view=Et(),Ss(this.view,this.position,t,this.up)}getView(){return this.view}}class xo{constructor(t){V(this,"position");V(this,"model");this.position=t}update(){this.model=Et(),un(this.model,this.model,this.position)}getModel(){return this.model}}const Rr=class Rr{constructor(t,o){V(this,"id");V(this,"position");V(this,"eulers");V(this,"model");this.id=Rr.idCounter++,this.position=t,this.eulers=o}update(){this.eulers[2]+=6,this.eulers[2]%=360,this.model=Et(),un(this.model,this.model,this.position),ws(this.model,this.model,at(this.eulers[1])),si(this.model,this.model,at(this.eulers[2]))}getModel(){return this.model}getId(){return this.id}};V(Rr,"idCounter",0);let an=Rr;class bo{constructor(){V(this,"triangles");V(this,"quads");V(this,"player");V(this,"object_data");V(this,"triangle_count");V(this,"quad_count");V(this,"vase");this.triangles=[],this.quads=[],this.object_data=new Float32Array(16*1024),this.triangle_count=0,this.quad_count=0,this.makeTriangles(),this.makeQuads(),this.vase=new an([0,0,0],[0,0,0]),this.player=new vo([-10,0,0],0,0)}makeTriangles(){let t=0;for(let o=-5;o<=5;o++){this.triangles.push(new mo([2,o,0],0));let c=Et();for(let l=0;l<16;l++)this.object_data[16*t+l]=c.at(l);t++,this.triangle_count++}}makeQuads(){var t=this.triangle_count;for(let o=-10;o<=10;o++)for(let c=-10;c<=10;c++){this.quads.push(new xo([o,c,-.5]));let l=Et();for(let d=0;d<16;d++)this.object_data[16*t+d]=l.at(d);t++,this.quad_count++}}update(){let t=0;this.triangles.forEach(c=>{c.update();let l=c.getModel();for(let d=0;d<16;d++)this.object_data[16*t+d]=l.at(d);t++}),this.quads.forEach(c=>{c.update();let l=c.getModel();for(let d=0;d<16;d++)this.object_data[16*t+d]=l.at(d);t++}),this.vase.update();let o=this.vase.getModel();for(let c=0;c<16;c++)this.object_data[16*t+c]=o.at(c);t++,this.player.update()}getPlayer(){return this.player}getObjects(){return{viewTransform:this.player.getView(),modelTransform:this.object_data,objectCounts:{[vt.TRIANGLE]:this.triangle_count,[vt.QUAD]:this.quad_count}}}spinPlayer(t,o){this.player.eulers[2]-=t,this.player.eulers[2]%=360,this.player.eulers[1]=Math.min(89,Math.max(-89,this.player.eulers[1]+o))}movePlayer(t,o,c){Zr(this.player.position,this.player.position,this.player.forwards,t),Zr(this.player.position,this.player.position,this.player.right,o),Zr(this.player.position,this.player.position,this.player.up,c)}}function To(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var xr={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Eo=xr.exports,ni;function wo(){return ni||(ni=1,function(a){(function(t,o){a.exports=t.document?o(t,!0):function(c){if(!c.document)throw new Error("jQuery requires a window with a document");return o(c)}})(typeof window<"u"?window:Eo,function(t,o){var c=[],l=Object.getPrototypeOf,d=c.slice,m=c.flat?function(e){return c.flat.call(e)}:function(e){return c.concat.apply([],e)},y=c.push,N=c.indexOf,D={},G=D.toString,Y=D.hasOwnProperty,$=Y.toString,J=$.call(Object),B={},P=function(r){return typeof r=="function"&&typeof r.nodeType!="number"&&typeof r.item!="function"},W=function(r){return r!=null&&r===r.window},x=t.document,K={type:!0,src:!0,nonce:!0,noModule:!0};function I(e,r,i){i=i||x;var s,u,f=i.createElement("script");if(f.text=e,r)for(s in K)u=r[s]||r.getAttribute&&r.getAttribute(s),u&&f.setAttribute(s,u);i.head.appendChild(f).parentNode.removeChild(f)}function U(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?D[G.call(e)]||"object":typeof e}var L="3.7.1",j=/HTML$/i,n=function(e,r){return new n.fn.init(e,r)};n.fn=n.prototype={jquery:L,constructor:n,length:0,toArray:function(){return d.call(this)},get:function(e){return e==null?d.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var r=n.merge(this.constructor(),e);return r.prevObject=this,r},each:function(e){return n.each(this,e)},map:function(e){return this.pushStack(n.map(this,function(r,i){return e.call(r,i,r)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(n.grep(this,function(e,r){return(r+1)%2}))},odd:function(){return this.pushStack(n.grep(this,function(e,r){return r%2}))},eq:function(e){var r=this.length,i=+e+(e<0?r:0);return this.pushStack(i>=0&&i<r?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:y,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,r,i,s,u,f,h=arguments[0]||{},v=1,g=arguments.length,T=!1;for(typeof h=="boolean"&&(T=h,h=arguments[v]||{},v++),typeof h!="object"&&!P(h)&&(h={}),v===g&&(h=this,v--);v<g;v++)if((e=arguments[v])!=null)for(r in e)s=e[r],!(r==="__proto__"||h===s)&&(T&&s&&(n.isPlainObject(s)||(u=Array.isArray(s)))?(i=h[r],u&&!Array.isArray(i)?f=[]:!u&&!n.isPlainObject(i)?f={}:f=i,u=!1,h[r]=n.extend(T,f,s)):s!==void 0&&(h[r]=s));return h},n.extend({expando:"jQuery"+(L+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var r,i;return!e||G.call(e)!=="[object Object]"?!1:(r=l(e),r?(i=Y.call(r,"constructor")&&r.constructor,typeof i=="function"&&$.call(i)===J):!0)},isEmptyObject:function(e){var r;for(r in e)return!1;return!0},globalEval:function(e,r,i){I(e,{nonce:r&&r.nonce},i)},each:function(e,r){var i,s=0;if(C(e))for(i=e.length;s<i&&r.call(e[s],s,e[s])!==!1;s++);else for(s in e)if(r.call(e[s],s,e[s])===!1)break;return e},text:function(e){var r,i="",s=0,u=e.nodeType;if(!u)for(;r=e[s++];)i+=n.text(r);return u===1||u===11?e.textContent:u===9?e.documentElement.textContent:u===3||u===4?e.nodeValue:i},makeArray:function(e,r){var i=r||[];return e!=null&&(C(Object(e))?n.merge(i,typeof e=="string"?[e]:e):y.call(i,e)),i},inArray:function(e,r,i){return r==null?-1:N.call(r,e,i)},isXMLDoc:function(e){var r=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!j.test(r||i&&i.nodeName||"HTML")},merge:function(e,r){for(var i=+r.length,s=0,u=e.length;s<i;s++)e[u++]=r[s];return e.length=u,e},grep:function(e,r,i){for(var s,u=[],f=0,h=e.length,v=!i;f<h;f++)s=!r(e[f],f),s!==v&&u.push(e[f]);return u},map:function(e,r,i){var s,u,f=0,h=[];if(C(e))for(s=e.length;f<s;f++)u=r(e[f],f,i),u!=null&&h.push(u);else for(f in e)u=r(e[f],f,i),u!=null&&h.push(u);return m(h)},guid:1,support:B}),typeof Symbol=="function"&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,r){D["[object "+r+"]"]=r.toLowerCase()});function C(e){var r=!!e&&"length"in e&&e.length,i=U(e);return P(e)||W(e)?!1:i==="array"||r===0||typeof r=="number"&&r>0&&r-1 in e}function O(e,r){return e.nodeName&&e.nodeName.toLowerCase()===r.toLowerCase()}var q=c.pop,Q=c.sort,ee=c.splice,F="[\\x20\\t\\r\\n\\f]",ne=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g");n.contains=function(e,r){var i=r&&r.parentNode;return e===i||!!(i&&i.nodeType===1&&(e.contains?e.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))};var ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function fe(e,r){return r?e==="\0"?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}n.escapeSelector=function(e){return(e+"").replace(ie,fe)};var ge=x,Me=y;(function(){var e,r,i,s,u,f=Me,h,v,g,T,A,M=n.expando,w=0,_=0,oe=cr(),pe=cr(),ce=cr(),Se=cr(),Ae=function(p,b){return p===b&&(u=!0),0},We="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$e="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",de="\\["+F+"*("+$e+")(?:"+F+"*([*^$|!~]?=)"+F+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+$e+"))|)"+F+"*\\]",gt=":("+$e+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+de+")*)|.*)\\)|)",ye=new RegExp(F+"+","g"),we=new RegExp("^"+F+"*,"+F+"*"),$t=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),zr=new RegExp(F+"|>"),Ye=new RegExp(gt),Yt=new RegExp("^"+$e+"$"),Xe={ID:new RegExp("^#("+$e+")"),CLASS:new RegExp("^\\.("+$e+")"),TAG:new RegExp("^("+$e+"|[*])"),ATTR:new RegExp("^"+de),PSEUDO:new RegExp("^"+gt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+We+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},nt=/^(?:input|select|textarea|button)$/i,it=/^h\d$/i,Fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Hr=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),tt=function(p,b){var E="0x"+p.slice(1)-65536;return b||(E<0?String.fromCharCode(E+65536):String.fromCharCode(E>>10|55296,E&1023|56320))},hs=function(){st()},ds=hr(function(p){return p.disabled===!0&&O(p,"fieldset")},{dir:"parentNode",next:"legend"});function ps(){try{return h.activeElement}catch{}}try{f.apply(c=d.call(ge.childNodes),ge.childNodes),c[ge.childNodes.length].nodeType}catch{f={apply:function(b,E){Me.apply(b,d.call(E))},call:function(b){Me.apply(b,d.call(arguments,1))}}}function xe(p,b,E,R){var S,k,z,X,H,le,se,ae=b&&b.ownerDocument,he=b?b.nodeType:9;if(E=E||[],typeof p!="string"||!p||he!==1&&he!==9&&he!==11)return E;if(!R&&(st(b),b=b||h,g)){if(he!==11&&(H=Fe.exec(p)))if(S=H[1]){if(he===9)if(z=b.getElementById(S)){if(z.id===S)return f.call(E,z),E}else return E;else if(ae&&(z=ae.getElementById(S))&&xe.contains(b,z)&&z.id===S)return f.call(E,z),E}else{if(H[2])return f.apply(E,b.getElementsByTagName(p)),E;if((S=H[3])&&b.getElementsByClassName)return f.apply(E,b.getElementsByClassName(S)),E}if(!Se[p+" "]&&(!T||!T.test(p))){if(se=p,ae=b,he===1&&(zr.test(p)||$t.test(p))){for(ae=Hr.test(p)&&Wr(b.parentNode)||b,(ae!=b||!B.scope)&&((X=b.getAttribute("id"))?X=n.escapeSelector(X):b.setAttribute("id",X=M)),le=Xt(p),k=le.length;k--;)le[k]=(X?"#"+X:":scope")+" "+lr(le[k]);se=le.join(",")}try{return f.apply(E,ae.querySelectorAll(se)),E}catch{Se(p,!0)}finally{X===M&&b.removeAttribute("id")}}}return Wn(p.replace(ne,"$1"),b,E,R)}function cr(){var p=[];function b(E,R){return p.push(E+" ")>r.cacheLength&&delete b[p.shift()],b[E+" "]=R}return b}function Ge(p){return p[M]=!0,p}function Lt(p){var b=h.createElement("fieldset");try{return!!p(b)}catch{return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function gs(p){return function(b){return O(b,"input")&&b.type===p}}function ys(p){return function(b){return(O(b,"input")||O(b,"button"))&&b.type===p}}function zn(p){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===p:b.disabled===p:b.isDisabled===p||b.isDisabled!==!p&&ds(b)===p:b.disabled===p:"label"in b?b.disabled===p:!1}}function yt(p){return Ge(function(b){return b=+b,Ge(function(E,R){for(var S,k=p([],E.length,b),z=k.length;z--;)E[S=k[z]]&&(E[S]=!(R[S]=E[S]))})})}function Wr(p){return p&&typeof p.getElementsByTagName<"u"&&p}function st(p){var b,E=p?p.ownerDocument||p:ge;return E==h||E.nodeType!==9||!E.documentElement||(h=E,v=h.documentElement,g=!n.isXMLDoc(h),A=v.matches||v.webkitMatchesSelector||v.msMatchesSelector,v.msMatchesSelector&&ge!=h&&(b=h.defaultView)&&b.top!==b&&b.addEventListener("unload",hs),B.getById=Lt(function(R){return v.appendChild(R).id=n.expando,!h.getElementsByName||!h.getElementsByName(n.expando).length}),B.disconnectedMatch=Lt(function(R){return A.call(R,"*")}),B.scope=Lt(function(){return h.querySelectorAll(":scope")}),B.cssHas=Lt(function(){try{return h.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),B.getById?(r.filter.ID=function(R){var S=R.replace(et,tt);return function(k){return k.getAttribute("id")===S}},r.find.ID=function(R,S){if(typeof S.getElementById<"u"&&g){var k=S.getElementById(R);return k?[k]:[]}}):(r.filter.ID=function(R){var S=R.replace(et,tt);return function(k){var z=typeof k.getAttributeNode<"u"&&k.getAttributeNode("id");return z&&z.value===S}},r.find.ID=function(R,S){if(typeof S.getElementById<"u"&&g){var k,z,X,H=S.getElementById(R);if(H){if(k=H.getAttributeNode("id"),k&&k.value===R)return[H];for(X=S.getElementsByName(R),z=0;H=X[z++];)if(k=H.getAttributeNode("id"),k&&k.value===R)return[H]}return[]}}),r.find.TAG=function(R,S){return typeof S.getElementsByTagName<"u"?S.getElementsByTagName(R):S.querySelectorAll(R)},r.find.CLASS=function(R,S){if(typeof S.getElementsByClassName<"u"&&g)return S.getElementsByClassName(R)},T=[],Lt(function(R){var S;v.appendChild(R).innerHTML="<a id='"+M+"' href='' disabled='disabled'></a><select id='"+M+"-\r\\' disabled='disabled'><option selected=''></option></select>",R.querySelectorAll("[selected]").length||T.push("\\["+F+"*(?:value|"+We+")"),R.querySelectorAll("[id~="+M+"-]").length||T.push("~="),R.querySelectorAll("a#"+M+"+*").length||T.push(".#.+[+~]"),R.querySelectorAll(":checked").length||T.push(":checked"),S=h.createElement("input"),S.setAttribute("type","hidden"),R.appendChild(S).setAttribute("name","D"),v.appendChild(R).disabled=!0,R.querySelectorAll(":disabled").length!==2&&T.push(":enabled",":disabled"),S=h.createElement("input"),S.setAttribute("name",""),R.appendChild(S),R.querySelectorAll("[name='']").length||T.push("\\["+F+"*name"+F+"*="+F+`*(?:''|"")`)}),B.cssHas||T.push(":has"),T=T.length&&new RegExp(T.join("|")),Ae=function(R,S){if(R===S)return u=!0,0;var k=!R.compareDocumentPosition-!S.compareDocumentPosition;return k||(k=(R.ownerDocument||R)==(S.ownerDocument||S)?R.compareDocumentPosition(S):1,k&1||!B.sortDetached&&S.compareDocumentPosition(R)===k?R===h||R.ownerDocument==ge&&xe.contains(ge,R)?-1:S===h||S.ownerDocument==ge&&xe.contains(ge,S)?1:s?N.call(s,R)-N.call(s,S):0:k&4?-1:1)}),h}xe.matches=function(p,b){return xe(p,null,null,b)},xe.matchesSelector=function(p,b){if(st(p),g&&!Se[b+" "]&&(!T||!T.test(b)))try{var E=A.call(p,b);if(E||B.disconnectedMatch||p.document&&p.document.nodeType!==11)return E}catch{Se(b,!0)}return xe(b,h,null,[p]).length>0},xe.contains=function(p,b){return(p.ownerDocument||p)!=h&&st(p),n.contains(p,b)},xe.attr=function(p,b){(p.ownerDocument||p)!=h&&st(p);var E=r.attrHandle[b.toLowerCase()],R=E&&Y.call(r.attrHandle,b.toLowerCase())?E(p,b,!g):void 0;return R!==void 0?R:p.getAttribute(b)},xe.error=function(p){throw new Error("Syntax error, unrecognized expression: "+p)},n.uniqueSort=function(p){var b,E=[],R=0,S=0;if(u=!B.sortStable,s=!B.sortStable&&d.call(p,0),Q.call(p,Ae),u){for(;b=p[S++];)b===p[S]&&(R=E.push(S));for(;R--;)ee.call(p,E[R],1)}return s=null,p},n.fn.uniqueSort=function(){return this.pushStack(n.uniqueSort(d.apply(this)))},r=n.expr={cacheLength:50,createPseudo:Ge,match:Xe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(p){return p[1]=p[1].replace(et,tt),p[3]=(p[3]||p[4]||p[5]||"").replace(et,tt),p[2]==="~="&&(p[3]=" "+p[3]+" "),p.slice(0,4)},CHILD:function(p){return p[1]=p[1].toLowerCase(),p[1].slice(0,3)==="nth"?(p[3]||xe.error(p[0]),p[4]=+(p[4]?p[5]+(p[6]||1):2*(p[3]==="even"||p[3]==="odd")),p[5]=+(p[7]+p[8]||p[3]==="odd")):p[3]&&xe.error(p[0]),p},PSEUDO:function(p){var b,E=!p[6]&&p[2];return Xe.CHILD.test(p[0])?null:(p[3]?p[2]=p[4]||p[5]||"":E&&Ye.test(E)&&(b=Xt(E,!0))&&(b=E.indexOf(")",E.length-b)-E.length)&&(p[0]=p[0].slice(0,b),p[2]=E.slice(0,b)),p.slice(0,3))}},filter:{TAG:function(p){var b=p.replace(et,tt).toLowerCase();return p==="*"?function(){return!0}:function(E){return O(E,b)}},CLASS:function(p){var b=oe[p+" "];return b||(b=new RegExp("(^|"+F+")"+p+"("+F+"|$)"))&&oe(p,function(E){return b.test(typeof E.className=="string"&&E.className||typeof E.getAttribute<"u"&&E.getAttribute("class")||"")})},ATTR:function(p,b,E){return function(R){var S=xe.attr(R,p);return S==null?b==="!=":b?(S+="",b==="="?S===E:b==="!="?S!==E:b==="^="?E&&S.indexOf(E)===0:b==="*="?E&&S.indexOf(E)>-1:b==="$="?E&&S.slice(-E.length)===E:b==="~="?(" "+S.replace(ye," ")+" ").indexOf(E)>-1:b==="|="?S===E||S.slice(0,E.length+1)===E+"-":!1):!0}},CHILD:function(p,b,E,R,S){var k=p.slice(0,3)!=="nth",z=p.slice(-4)!=="last",X=b==="of-type";return R===1&&S===0?function(H){return!!H.parentNode}:function(H,le,se){var ae,he,re,be,Be,Ce=k!==z?"nextSibling":"previousSibling",ke=H.parentNode,Je=X&&H.nodeName.toLowerCase(),Pt=!se&&!X,Ne=!1;if(ke){if(k){for(;Ce;){for(re=H;re=re[Ce];)if(X?O(re,Je):re.nodeType===1)return!1;Be=Ce=p==="only"&&!Be&&"nextSibling"}return!0}if(Be=[z?ke.firstChild:ke.lastChild],z&&Pt){for(he=ke[M]||(ke[M]={}),ae=he[p]||[],be=ae[0]===w&&ae[1],Ne=be&&ae[2],re=be&&ke.childNodes[be];re=++be&&re&&re[Ce]||(Ne=be=0)||Be.pop();)if(re.nodeType===1&&++Ne&&re===H){he[p]=[w,be,Ne];break}}else if(Pt&&(he=H[M]||(H[M]={}),ae=he[p]||[],be=ae[0]===w&&ae[1],Ne=be),Ne===!1)for(;(re=++be&&re&&re[Ce]||(Ne=be=0)||Be.pop())&&!((X?O(re,Je):re.nodeType===1)&&++Ne&&(Pt&&(he=re[M]||(re[M]={}),he[p]=[w,Ne]),re===H)););return Ne-=S,Ne===R||Ne%R===0&&Ne/R>=0}}},PSEUDO:function(p,b){var E,R=r.pseudos[p]||r.setFilters[p.toLowerCase()]||xe.error("unsupported pseudo: "+p);return R[M]?R(b):R.length>1?(E=[p,p,"",b],r.setFilters.hasOwnProperty(p.toLowerCase())?Ge(function(S,k){for(var z,X=R(S,b),H=X.length;H--;)z=N.call(S,X[H]),S[z]=!(k[z]=X[H])}):function(S){return R(S,0,E)}):R}},pseudos:{not:Ge(function(p){var b=[],E=[],R=Jr(p.replace(ne,"$1"));return R[M]?Ge(function(S,k,z,X){for(var H,le=R(S,null,X,[]),se=S.length;se--;)(H=le[se])&&(S[se]=!(k[se]=H))}):function(S,k,z){return b[0]=S,R(b,null,z,E),b[0]=null,!E.pop()}}),has:Ge(function(p){return function(b){return xe(p,b).length>0}}),contains:Ge(function(p){return p=p.replace(et,tt),function(b){return(b.textContent||n.text(b)).indexOf(p)>-1}}),lang:Ge(function(p){return Yt.test(p||"")||xe.error("unsupported lang: "+p),p=p.replace(et,tt).toLowerCase(),function(b){var E;do if(E=g?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return E=E.toLowerCase(),E===p||E.indexOf(p+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(p){var b=t.location&&t.location.hash;return b&&b.slice(1)===p.id},root:function(p){return p===v},focus:function(p){return p===ps()&&h.hasFocus()&&!!(p.type||p.href||~p.tabIndex)},enabled:zn(!1),disabled:zn(!0),checked:function(p){return O(p,"input")&&!!p.checked||O(p,"option")&&!!p.selected},selected:function(p){return p.parentNode&&p.parentNode.selectedIndex,p.selected===!0},empty:function(p){for(p=p.firstChild;p;p=p.nextSibling)if(p.nodeType<6)return!1;return!0},parent:function(p){return!r.pseudos.empty(p)},header:function(p){return it.test(p.nodeName)},input:function(p){return nt.test(p.nodeName)},button:function(p){return O(p,"input")&&p.type==="button"||O(p,"button")},text:function(p){var b;return O(p,"input")&&p.type==="text"&&((b=p.getAttribute("type"))==null||b.toLowerCase()==="text")},first:yt(function(){return[0]}),last:yt(function(p,b){return[b-1]}),eq:yt(function(p,b,E){return[E<0?E+b:E]}),even:yt(function(p,b){for(var E=0;E<b;E+=2)p.push(E);return p}),odd:yt(function(p,b){for(var E=1;E<b;E+=2)p.push(E);return p}),lt:yt(function(p,b,E){var R;for(E<0?R=E+b:E>b?R=b:R=E;--R>=0;)p.push(R);return p}),gt:yt(function(p,b,E){for(var R=E<0?E+b:E;++R<b;)p.push(R);return p})}},r.pseudos.nth=r.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=gs(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ys(e);function Hn(){}Hn.prototype=r.filters=r.pseudos,r.setFilters=new Hn;function Xt(p,b){var E,R,S,k,z,X,H,le=pe[p+" "];if(le)return b?0:le.slice(0);for(z=p,X=[],H=r.preFilter;z;){(!E||(R=we.exec(z)))&&(R&&(z=z.slice(R[0].length)||z),X.push(S=[])),E=!1,(R=$t.exec(z))&&(E=R.shift(),S.push({value:E,type:R[0].replace(ne," ")}),z=z.slice(E.length));for(k in r.filter)(R=Xe[k].exec(z))&&(!H[k]||(R=H[k](R)))&&(E=R.shift(),S.push({value:E,type:k,matches:R}),z=z.slice(E.length));if(!E)break}return b?z.length:z?xe.error(p):pe(p,X).slice(0)}function lr(p){for(var b=0,E=p.length,R="";b<E;b++)R+=p[b].value;return R}function hr(p,b,E){var R=b.dir,S=b.next,k=S||R,z=E&&k==="parentNode",X=_++;return b.first?function(H,le,se){for(;H=H[R];)if(H.nodeType===1||z)return p(H,le,se);return!1}:function(H,le,se){var ae,he,re=[w,X];if(se){for(;H=H[R];)if((H.nodeType===1||z)&&p(H,le,se))return!0}else for(;H=H[R];)if(H.nodeType===1||z)if(he=H[M]||(H[M]={}),S&&O(H,S))H=H[R]||H;else{if((ae=he[k])&&ae[0]===w&&ae[1]===X)return re[2]=ae[2];if(he[k]=re,re[2]=p(H,le,se))return!0}return!1}}function $r(p){return p.length>1?function(b,E,R){for(var S=p.length;S--;)if(!p[S](b,E,R))return!1;return!0}:p[0]}function ms(p,b,E){for(var R=0,S=b.length;R<S;R++)xe(p,b[R],E);return E}function dr(p,b,E,R,S){for(var k,z=[],X=0,H=p.length,le=b!=null;X<H;X++)(k=p[X])&&(!E||E(k,R,S))&&(z.push(k),le&&b.push(X));return z}function Yr(p,b,E,R,S,k){return R&&!R[M]&&(R=Yr(R)),S&&!S[M]&&(S=Yr(S,k)),Ge(function(z,X,H,le){var se,ae,he,re,be=[],Be=[],Ce=X.length,ke=z||ms(b||"*",H.nodeType?[H]:H,[]),Je=p&&(z||!b)?dr(ke,be,p,H,le):ke;if(E?(re=S||(z?p:Ce||R)?[]:X,E(Je,re,H,le)):re=Je,R)for(se=dr(re,Be),R(se,[],H,le),ae=se.length;ae--;)(he=se[ae])&&(re[Be[ae]]=!(Je[Be[ae]]=he));if(z){if(S||p){if(S){for(se=[],ae=re.length;ae--;)(he=re[ae])&&se.push(Je[ae]=he);S(null,re=[],se,le)}for(ae=re.length;ae--;)(he=re[ae])&&(se=S?N.call(z,he):be[ae])>-1&&(z[se]=!(X[se]=he))}}else re=dr(re===X?re.splice(Ce,re.length):re),S?S(null,X,re,le):f.apply(X,re)})}function Xr(p){for(var b,E,R,S=p.length,k=r.relative[p[0].type],z=k||r.relative[" "],X=k?1:0,H=hr(function(ae){return ae===b},z,!0),le=hr(function(ae){return N.call(b,ae)>-1},z,!0),se=[function(ae,he,re){var be=!k&&(re||he!=i)||((b=he).nodeType?H(ae,he,re):le(ae,he,re));return b=null,be}];X<S;X++)if(E=r.relative[p[X].type])se=[hr($r(se),E)];else{if(E=r.filter[p[X].type].apply(null,p[X].matches),E[M]){for(R=++X;R<S&&!r.relative[p[R].type];R++);return Yr(X>1&&$r(se),X>1&&lr(p.slice(0,X-1).concat({value:p[X-2].type===" "?"*":""})).replace(ne,"$1"),E,X<R&&Xr(p.slice(X,R)),R<S&&Xr(p=p.slice(R)),R<S&&lr(p))}se.push(E)}return $r(se)}function vs(p,b){var E=b.length>0,R=p.length>0,S=function(k,z,X,H,le){var se,ae,he,re=0,be="0",Be=k&&[],Ce=[],ke=i,Je=k||R&&r.find.TAG("*",le),Pt=w+=ke==null?1:Math.random()||.1,Ne=Je.length;for(le&&(i=z==h||z||le);be!==Ne&&(se=Je[be])!=null;be++){if(R&&se){for(ae=0,!z&&se.ownerDocument!=h&&(st(se),X=!g);he=p[ae++];)if(he(se,z||h,X)){f.call(H,se);break}le&&(w=Pt)}E&&((se=!he&&se)&&re--,k&&Be.push(se))}if(re+=be,E&&be!==re){for(ae=0;he=b[ae++];)he(Be,Ce,z,X);if(k){if(re>0)for(;be--;)Be[be]||Ce[be]||(Ce[be]=q.call(H));Ce=dr(Ce)}f.apply(H,Ce),le&&!k&&Ce.length>0&&re+b.length>1&&n.uniqueSort(H)}return le&&(w=Pt,i=ke),Be};return E?Ge(S):S}function Jr(p,b){var E,R=[],S=[],k=ce[p+" "];if(!k){for(b||(b=Xt(p)),E=b.length;E--;)k=Xr(b[E]),k[M]?R.push(k):S.push(k);k=ce(p,vs(S,R)),k.selector=p}return k}function Wn(p,b,E,R){var S,k,z,X,H,le=typeof p=="function"&&p,se=!R&&Xt(p=le.selector||p);if(E=E||[],se.length===1){if(k=se[0]=se[0].slice(0),k.length>2&&(z=k[0]).type==="ID"&&b.nodeType===9&&g&&r.relative[k[1].type]){if(b=(r.find.ID(z.matches[0].replace(et,tt),b)||[])[0],b)le&&(b=b.parentNode);else return E;p=p.slice(k.shift().value.length)}for(S=Xe.needsContext.test(p)?0:k.length;S--&&(z=k[S],!r.relative[X=z.type]);)if((H=r.find[X])&&(R=H(z.matches[0].replace(et,tt),Hr.test(k[0].type)&&Wr(b.parentNode)||b))){if(k.splice(S,1),p=R.length&&lr(k),!p)return f.apply(E,R),E;break}}return(le||Jr(p,se))(R,b,!g,E,!b||Hr.test(p)&&Wr(b.parentNode)||b),E}B.sortStable=M.split("").sort(Ae).join("")===M,st(),B.sortDetached=Lt(function(p){return p.compareDocumentPosition(h.createElement("fieldset"))&1}),n.find=xe,n.expr[":"]=n.expr.pseudos,n.unique=n.uniqueSort,xe.compile=Jr,xe.select=Wn,xe.setDocument=st,xe.tokenize=Xt,xe.escape=n.escapeSelector,xe.getText=n.text,xe.isXML=n.isXMLDoc,xe.selectors=n.expr,xe.support=n.support,xe.uniqueSort=n.uniqueSort})();var Re=function(e,r,i){for(var s=[],u=i!==void 0;(e=e[r])&&e.nodeType!==9;)if(e.nodeType===1){if(u&&n(e).is(i))break;s.push(e)}return s},rr=function(e,r){for(var i=[];e;e=e.nextSibling)e.nodeType===1&&e!==r&&i.push(e);return i},Rt=n.expr.match.needsContext,At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Dt(e,r,i){return P(r)?n.grep(e,function(s,u){return!!r.call(s,u,s)!==i}):r.nodeType?n.grep(e,function(s){return s===r!==i}):typeof r!="string"?n.grep(e,function(s){return N.call(r,s)>-1!==i}):n.filter(r,e,i)}n.filter=function(e,r,i){var s=r[0];return i&&(e=":not("+e+")"),r.length===1&&s.nodeType===1?n.find.matchesSelector(s,e)?[s]:[]:n.find.matches(e,n.grep(r,function(u){return u.nodeType===1}))},n.fn.extend({find:function(e){var r,i,s=this.length,u=this;if(typeof e!="string")return this.pushStack(n(e).filter(function(){for(r=0;r<s;r++)if(n.contains(u[r],this))return!0}));for(i=this.pushStack([]),r=0;r<s;r++)n.find(e,u[r],i);return s>1?n.uniqueSort(i):i},filter:function(e){return this.pushStack(Dt(this,e||[],!1))},not:function(e){return this.pushStack(Dt(this,e||[],!0))},is:function(e){return!!Dt(this,typeof e=="string"&&Rt.test(e)?n(e):e||[],!1).length}});var rt,Mr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ft=n.fn.init=function(e,r,i){var s,u;if(!e)return this;if(i=i||rt,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?s=[null,e,null]:s=Mr.exec(e),s&&(s[1]||!r))if(s[1]){if(r=r instanceof n?r[0]:r,n.merge(this,n.parseHTML(s[1],r&&r.nodeType?r.ownerDocument||r:x,!0)),At.test(s[1])&&n.isPlainObject(r))for(s in r)P(this[s])?this[s](r[s]):this.attr(s,r[s]);return this}else return u=x.getElementById(s[2]),u&&(this[0]=u,this.length=1),this;else return!r||r.jquery?(r||i).find(e):this.constructor(r).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(P(e))return i.ready!==void 0?i.ready(e):e(n)}return n.makeArray(e,this)};Ft.prototype=n.fn,rt=n(x);var bi=/^(?:parents|prev(?:Until|All))/,Ti={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(e){var r=n(e,this),i=r.length;return this.filter(function(){for(var s=0;s<i;s++)if(n.contains(this,r[s]))return!0})},closest:function(e,r){var i,s=0,u=this.length,f=[],h=typeof e!="string"&&n(e);if(!Rt.test(e)){for(;s<u;s++)for(i=this[s];i&&i!==r;i=i.parentNode)if(i.nodeType<11&&(h?h.index(i)>-1:i.nodeType===1&&n.find.matchesSelector(i,e))){f.push(i);break}}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(e){return e?typeof e=="string"?N.call(n(e),this[0]):N.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,r){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(e,r))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function ln(e,r){for(;(e=e[r])&&e.nodeType!==1;);return e}n.each({parent:function(e){var r=e.parentNode;return r&&r.nodeType!==11?r:null},parents:function(e){return Re(e,"parentNode")},parentsUntil:function(e,r,i){return Re(e,"parentNode",i)},next:function(e){return ln(e,"nextSibling")},prev:function(e){return ln(e,"previousSibling")},nextAll:function(e){return Re(e,"nextSibling")},prevAll:function(e){return Re(e,"previousSibling")},nextUntil:function(e,r,i){return Re(e,"nextSibling",i)},prevUntil:function(e,r,i){return Re(e,"previousSibling",i)},siblings:function(e){return rr((e.parentNode||{}).firstChild,e)},children:function(e){return rr(e.firstChild)},contents:function(e){return e.contentDocument!=null&&l(e.contentDocument)?e.contentDocument:(O(e,"template")&&(e=e.content||e),n.merge([],e.childNodes))}},function(e,r){n.fn[e]=function(i,s){var u=n.map(this,r,i);return e.slice(-5)!=="Until"&&(s=i),s&&typeof s=="string"&&(u=n.filter(s,u)),this.length>1&&(Ti[e]||n.uniqueSort(u),bi.test(e)&&u.reverse()),this.pushStack(u)}});var ze=/[^\x20\t\r\n\f]+/g;function Ei(e){var r={};return n.each(e.match(ze)||[],function(i,s){r[s]=!0}),r}n.Callbacks=function(e){e=typeof e=="string"?Ei(e):n.extend({},e);var r,i,s,u,f=[],h=[],v=-1,g=function(){for(u=u||e.once,s=r=!0;h.length;v=-1)for(i=h.shift();++v<f.length;)f[v].apply(i[0],i[1])===!1&&e.stopOnFalse&&(v=f.length,i=!1);e.memory||(i=!1),r=!1,u&&(i?f=[]:f="")},T={add:function(){return f&&(i&&!r&&(v=f.length-1,h.push(i)),function A(M){n.each(M,function(w,_){P(_)?(!e.unique||!T.has(_))&&f.push(_):_&&_.length&&U(_)!=="string"&&A(_)})}(arguments),i&&!r&&g()),this},remove:function(){return n.each(arguments,function(A,M){for(var w;(w=n.inArray(M,f,w))>-1;)f.splice(w,1),w<=v&&v--}),this},has:function(A){return A?n.inArray(A,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return u=h=[],f=i="",this},disabled:function(){return!f},lock:function(){return u=h=[],!i&&!r&&(f=i=""),this},locked:function(){return!!u},fireWith:function(A,M){return u||(M=M||[],M=[A,M.slice?M.slice():M],h.push(M),r||g()),this},fire:function(){return T.fireWith(this,arguments),this},fired:function(){return!!s}};return T};function St(e){return e}function nr(e){throw e}function hn(e,r,i,s){var u;try{e&&P(u=e.promise)?u.call(e).done(r).fail(i):e&&P(u=e.then)?u.call(e,r,i):r.apply(void 0,[e].slice(s))}catch(f){i.apply(void 0,[f])}}n.extend({Deferred:function(e){var r=[["notify","progress",n.Callbacks("memory"),n.Callbacks("memory"),2],["resolve","done",n.Callbacks("once memory"),n.Callbacks("once memory"),0,"resolved"],["reject","fail",n.Callbacks("once memory"),n.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return u.done(arguments).fail(arguments),this},catch:function(f){return s.then(null,f)},pipe:function(){var f=arguments;return n.Deferred(function(h){n.each(r,function(v,g){var T=P(f[g[4]])&&f[g[4]];u[g[1]](function(){var A=T&&T.apply(this,arguments);A&&P(A.promise)?A.promise().progress(h.notify).done(h.resolve).fail(h.reject):h[g[0]+"With"](this,T?[A]:arguments)})}),f=null}).promise()},then:function(f,h,v){var g=0;function T(A,M,w,_){return function(){var oe=this,pe=arguments,ce=function(){var Ae,We;if(!(A<g)){if(Ae=w.apply(oe,pe),Ae===M.promise())throw new TypeError("Thenable self-resolution");We=Ae&&(typeof Ae=="object"||typeof Ae=="function")&&Ae.then,P(We)?_?We.call(Ae,T(g,M,St,_),T(g,M,nr,_)):(g++,We.call(Ae,T(g,M,St,_),T(g,M,nr,_),T(g,M,St,M.notifyWith))):(w!==St&&(oe=void 0,pe=[Ae]),(_||M.resolveWith)(oe,pe))}},Se=_?ce:function(){try{ce()}catch(Ae){n.Deferred.exceptionHook&&n.Deferred.exceptionHook(Ae,Se.error),A+1>=g&&(w!==nr&&(oe=void 0,pe=[Ae]),M.rejectWith(oe,pe))}};A?Se():(n.Deferred.getErrorHook?Se.error=n.Deferred.getErrorHook():n.Deferred.getStackHook&&(Se.error=n.Deferred.getStackHook()),t.setTimeout(Se))}}return n.Deferred(function(A){r[0][3].add(T(0,A,P(v)?v:St,A.notifyWith)),r[1][3].add(T(0,A,P(f)?f:St)),r[2][3].add(T(0,A,P(h)?h:nr))}).promise()},promise:function(f){return f!=null?n.extend(f,s):s}},u={};return n.each(r,function(f,h){var v=h[2],g=h[5];s[h[1]]=v.add,g&&v.add(function(){i=g},r[3-f][2].disable,r[3-f][3].disable,r[0][2].lock,r[0][3].lock),v.add(h[3].fire),u[h[0]]=function(){return u[h[0]+"With"](this===u?void 0:this,arguments),this},u[h[0]+"With"]=v.fireWith}),s.promise(u),e&&e.call(u,u),u},when:function(e){var r=arguments.length,i=r,s=Array(i),u=d.call(arguments),f=n.Deferred(),h=function(v){return function(g){s[v]=this,u[v]=arguments.length>1?d.call(arguments):g,--r||f.resolveWith(s,u)}};if(r<=1&&(hn(e,f.done(h(i)).resolve,f.reject,!r),f.state()==="pending"||P(u[i]&&u[i].then)))return f.then();for(;i--;)hn(u[i],h(i),f.reject);return f.promise()}});var wi=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;n.Deferred.exceptionHook=function(e,r){t.console&&t.console.warn&&e&&wi.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,r)},n.readyException=function(e){t.setTimeout(function(){throw e})};var Nr=n.Deferred();n.fn.ready=function(e){return Nr.then(e).catch(function(r){n.readyException(r)}),this},n.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,!(e!==!0&&--n.readyWait>0)&&Nr.resolveWith(x,[n]))}}),n.ready.then=Nr.then;function ir(){x.removeEventListener("DOMContentLoaded",ir),t.removeEventListener("load",ir),n.ready()}x.readyState==="complete"||x.readyState!=="loading"&&!x.documentElement.doScroll?t.setTimeout(n.ready):(x.addEventListener("DOMContentLoaded",ir),t.addEventListener("load",ir));var Qe=function(e,r,i,s,u,f,h){var v=0,g=e.length,T=i==null;if(U(i)==="object"){u=!0;for(v in i)Qe(e,r,v,i[v],!0,f,h)}else if(s!==void 0&&(u=!0,P(s)||(h=!0),T&&(h?(r.call(e,s),r=null):(T=r,r=function(A,M,w){return T.call(n(A),w)})),r))for(;v<g;v++)r(e[v],i,h?s:s.call(e[v],v,r(e[v],i)));return u?e:T?r.call(e):g?r(e[0],i):f},Ri=/^-ms-/,Ai=/-([a-z])/g;function Si(e,r){return r.toUpperCase()}function He(e){return e.replace(Ri,"ms-").replace(Ai,Si)}var kt=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function jt(){this.expando=n.expando+jt.uid++}jt.uid=1,jt.prototype={cache:function(e){var r=e[this.expando];return r||(r={},kt(e)&&(e.nodeType?e[this.expando]=r:Object.defineProperty(e,this.expando,{value:r,configurable:!0}))),r},set:function(e,r,i){var s,u=this.cache(e);if(typeof r=="string")u[He(r)]=i;else for(s in r)u[He(s)]=r[s];return u},get:function(e,r){return r===void 0?this.cache(e):e[this.expando]&&e[this.expando][He(r)]},access:function(e,r,i){return r===void 0||r&&typeof r=="string"&&i===void 0?this.get(e,r):(this.set(e,r,i),i!==void 0?i:r)},remove:function(e,r){var i,s=e[this.expando];if(s!==void 0){if(r!==void 0)for(Array.isArray(r)?r=r.map(He):(r=He(r),r=r in s?[r]:r.match(ze)||[]),i=r.length;i--;)delete s[r[i]];(r===void 0||n.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var r=e[this.expando];return r!==void 0&&!n.isEmptyObject(r)}};var Z=new jt,_e=new jt,Ci=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mi=/[A-Z]/g;function Ni(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:Ci.test(e)?JSON.parse(e):e}function dn(e,r,i){var s;if(i===void 0&&e.nodeType===1)if(s="data-"+r.replace(Mi,"-$&").toLowerCase(),i=e.getAttribute(s),typeof i=="string"){try{i=Ni(i)}catch{}_e.set(e,r,i)}else i=void 0;return i}n.extend({hasData:function(e){return _e.hasData(e)||Z.hasData(e)},data:function(e,r,i){return _e.access(e,r,i)},removeData:function(e,r){_e.remove(e,r)},_data:function(e,r,i){return Z.access(e,r,i)},_removeData:function(e,r){Z.remove(e,r)}}),n.fn.extend({data:function(e,r){var i,s,u,f=this[0],h=f&&f.attributes;if(e===void 0){if(this.length&&(u=_e.get(f),f.nodeType===1&&!Z.get(f,"hasDataAttrs"))){for(i=h.length;i--;)h[i]&&(s=h[i].name,s.indexOf("data-")===0&&(s=He(s.slice(5)),dn(f,s,u[s])));Z.set(f,"hasDataAttrs",!0)}return u}return typeof e=="object"?this.each(function(){_e.set(this,e)}):Qe(this,function(v){var g;if(f&&v===void 0)return g=_e.get(f,e),g!==void 0||(g=dn(f,e),g!==void 0)?g:void 0;this.each(function(){_e.set(this,e,v)})},null,r,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){_e.remove(this,e)})}}),n.extend({queue:function(e,r,i){var s;if(e)return r=(r||"fx")+"queue",s=Z.get(e,r),i&&(!s||Array.isArray(i)?s=Z.access(e,r,n.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,r){r=r||"fx";var i=n.queue(e,r),s=i.length,u=i.shift(),f=n._queueHooks(e,r),h=function(){n.dequeue(e,r)};u==="inprogress"&&(u=i.shift(),s--),u&&(r==="fx"&&i.unshift("inprogress"),delete f.stop,u.call(e,h,f)),!s&&f&&f.empty.fire()},_queueHooks:function(e,r){var i=r+"queueHooks";return Z.get(e,i)||Z.access(e,i,{empty:n.Callbacks("once memory").add(function(){Z.remove(e,[r+"queue",i])})})}}),n.fn.extend({queue:function(e,r){var i=2;return typeof e!="string"&&(r=e,e="fx",i--),arguments.length<i?n.queue(this[0],e):r===void 0?this:this.each(function(){var s=n.queue(this,e,r);n._queueHooks(this,e),e==="fx"&&s[0]!=="inprogress"&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,r){var i,s=1,u=n.Deferred(),f=this,h=this.length,v=function(){--s||u.resolveWith(f,[f])};for(typeof e!="string"&&(r=e,e=void 0),e=e||"fx";h--;)i=Z.get(f[h],e+"queueHooks"),i&&i.empty&&(s++,i.empty.add(v));return v(),u.promise(r)}});var pn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,qt=new RegExp("^(?:([+-])=|)("+pn+")([a-z%]*)$","i"),Ze=["Top","Right","Bottom","Left"],ht=x.documentElement,Ct=function(e){return n.contains(e.ownerDocument,e)},Ii={composed:!0};ht.getRootNode&&(Ct=function(e){return n.contains(e.ownerDocument,e)||e.getRootNode(Ii)===e.ownerDocument});var sr=function(e,r){return e=r||e,e.style.display==="none"||e.style.display===""&&Ct(e)&&n.css(e,"display")==="none"};function gn(e,r,i,s){var u,f,h=20,v=s?function(){return s.cur()}:function(){return n.css(e,r,"")},g=v(),T=i&&i[3]||(n.cssNumber[r]?"":"px"),A=e.nodeType&&(n.cssNumber[r]||T!=="px"&&+g)&&qt.exec(n.css(e,r));if(A&&A[3]!==T){for(g=g/2,T=T||A[3],A=+g||1;h--;)n.style(e,r,A+T),(1-f)*(1-(f=v()/g||.5))<=0&&(h=0),A=A/f;A=A*2,n.style(e,r,A+T),i=i||[]}return i&&(A=+A||+g||0,u=i[1]?A+(i[1]+1)*i[2]:+i[2],s&&(s.unit=T,s.start=A,s.end=u)),u}var yn={};function Oi(e){var r,i=e.ownerDocument,s=e.nodeName,u=yn[s];return u||(r=i.body.appendChild(i.createElement(s)),u=n.css(r,"display"),r.parentNode.removeChild(r),u==="none"&&(u="block"),yn[s]=u,u)}function Mt(e,r){for(var i,s,u=[],f=0,h=e.length;f<h;f++)s=e[f],s.style&&(i=s.style.display,r?(i==="none"&&(u[f]=Z.get(s,"display")||null,u[f]||(s.style.display="")),s.style.display===""&&sr(s)&&(u[f]=Oi(s))):i!=="none"&&(u[f]="none",Z.set(s,"display",i)));for(f=0;f<h;f++)u[f]!=null&&(e[f].style.display=u[f]);return e}n.fn.extend({show:function(){return Mt(this,!0)},hide:function(){return Mt(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){sr(this)?n(this).show():n(this).hide()})}});var Gt=/^(?:checkbox|radio)$/i,mn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=x.createDocumentFragment(),r=e.appendChild(x.createElement("div")),i=x.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),r.appendChild(i),B.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,r.innerHTML="<textarea>x</textarea>",B.noCloneChecked=!!r.cloneNode(!0).lastChild.defaultValue,r.innerHTML="<option></option>",B.option=!!r.lastChild})();var De={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};De.tbody=De.tfoot=De.colgroup=De.caption=De.thead,De.th=De.td,B.option||(De.optgroup=De.option=[1,"<select multiple='multiple'>","</select>"]);function Le(e,r){var i;return typeof e.getElementsByTagName<"u"?i=e.getElementsByTagName(r||"*"):typeof e.querySelectorAll<"u"?i=e.querySelectorAll(r||"*"):i=[],r===void 0||r&&O(e,r)?n.merge([e],i):i}function Ir(e,r){for(var i=0,s=e.length;i<s;i++)Z.set(e[i],"globalEval",!r||Z.get(r[i],"globalEval"))}var _i=/<|&#?\w+;/;function xn(e,r,i,s,u){for(var f,h,v,g,T,A,M=r.createDocumentFragment(),w=[],_=0,oe=e.length;_<oe;_++)if(f=e[_],f||f===0)if(U(f)==="object")n.merge(w,f.nodeType?[f]:f);else if(!_i.test(f))w.push(r.createTextNode(f));else{for(h=h||M.appendChild(r.createElement("div")),v=(mn.exec(f)||["",""])[1].toLowerCase(),g=De[v]||De._default,h.innerHTML=g[1]+n.htmlPrefilter(f)+g[2],A=g[0];A--;)h=h.lastChild;n.merge(w,h.childNodes),h=M.firstChild,h.textContent=""}for(M.textContent="",_=0;f=w[_++];){if(s&&n.inArray(f,s)>-1){u&&u.push(f);continue}if(T=Ct(f),h=Le(M.appendChild(f),"script"),T&&Ir(h),i)for(A=0;f=h[A++];)vn.test(f.type||"")&&i.push(f)}return M}var bn=/^([^.]*)(?:\.(.+)|)/;function Nt(){return!0}function It(){return!1}function Or(e,r,i,s,u,f){var h,v;if(typeof r=="object"){typeof i!="string"&&(s=s||i,i=void 0);for(v in r)Or(e,v,i,s,r[v],f);return e}if(s==null&&u==null?(u=i,s=i=void 0):u==null&&(typeof i=="string"?(u=s,s=void 0):(u=s,s=i,i=void 0)),u===!1)u=It;else if(!u)return e;return f===1&&(h=u,u=function(g){return n().off(g),h.apply(this,arguments)},u.guid=h.guid||(h.guid=n.guid++)),e.each(function(){n.event.add(this,r,u,s,i)})}n.event={global:{},add:function(e,r,i,s,u){var f,h,v,g,T,A,M,w,_,oe,pe,ce=Z.get(e);if(kt(e))for(i.handler&&(f=i,i=f.handler,u=f.selector),u&&n.find.matchesSelector(ht,u),i.guid||(i.guid=n.guid++),(g=ce.events)||(g=ce.events=Object.create(null)),(h=ce.handle)||(h=ce.handle=function(Se){return typeof n<"u"&&n.event.triggered!==Se.type?n.event.dispatch.apply(e,arguments):void 0}),r=(r||"").match(ze)||[""],T=r.length;T--;)v=bn.exec(r[T])||[],_=pe=v[1],oe=(v[2]||"").split(".").sort(),_&&(M=n.event.special[_]||{},_=(u?M.delegateType:M.bindType)||_,M=n.event.special[_]||{},A=n.extend({type:_,origType:pe,data:s,handler:i,guid:i.guid,selector:u,needsContext:u&&n.expr.match.needsContext.test(u),namespace:oe.join(".")},f),(w=g[_])||(w=g[_]=[],w.delegateCount=0,(!M.setup||M.setup.call(e,s,oe,h)===!1)&&e.addEventListener&&e.addEventListener(_,h)),M.add&&(M.add.call(e,A),A.handler.guid||(A.handler.guid=i.guid)),u?w.splice(w.delegateCount++,0,A):w.push(A),n.event.global[_]=!0)},remove:function(e,r,i,s,u){var f,h,v,g,T,A,M,w,_,oe,pe,ce=Z.hasData(e)&&Z.get(e);if(!(!ce||!(g=ce.events))){for(r=(r||"").match(ze)||[""],T=r.length;T--;){if(v=bn.exec(r[T])||[],_=pe=v[1],oe=(v[2]||"").split(".").sort(),!_){for(_ in g)n.event.remove(e,_+r[T],i,s,!0);continue}for(M=n.event.special[_]||{},_=(s?M.delegateType:M.bindType)||_,w=g[_]||[],v=v[2]&&new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"),h=f=w.length;f--;)A=w[f],(u||pe===A.origType)&&(!i||i.guid===A.guid)&&(!v||v.test(A.namespace))&&(!s||s===A.selector||s==="**"&&A.selector)&&(w.splice(f,1),A.selector&&w.delegateCount--,M.remove&&M.remove.call(e,A));h&&!w.length&&((!M.teardown||M.teardown.call(e,oe,ce.handle)===!1)&&n.removeEvent(e,_,ce.handle),delete g[_])}n.isEmptyObject(g)&&Z.remove(e,"handle events")}},dispatch:function(e){var r,i,s,u,f,h,v=new Array(arguments.length),g=n.event.fix(e),T=(Z.get(this,"events")||Object.create(null))[g.type]||[],A=n.event.special[g.type]||{};for(v[0]=g,r=1;r<arguments.length;r++)v[r]=arguments[r];if(g.delegateTarget=this,!(A.preDispatch&&A.preDispatch.call(this,g)===!1)){for(h=n.event.handlers.call(this,g,T),r=0;(u=h[r++])&&!g.isPropagationStopped();)for(g.currentTarget=u.elem,i=0;(f=u.handlers[i++])&&!g.isImmediatePropagationStopped();)(!g.rnamespace||f.namespace===!1||g.rnamespace.test(f.namespace))&&(g.handleObj=f,g.data=f.data,s=((n.event.special[f.origType]||{}).handle||f.handler).apply(u.elem,v),s!==void 0&&(g.result=s)===!1&&(g.preventDefault(),g.stopPropagation()));return A.postDispatch&&A.postDispatch.call(this,g),g.result}},handlers:function(e,r){var i,s,u,f,h,v=[],g=r.delegateCount,T=e.target;if(g&&T.nodeType&&!(e.type==="click"&&e.button>=1)){for(;T!==this;T=T.parentNode||this)if(T.nodeType===1&&!(e.type==="click"&&T.disabled===!0)){for(f=[],h={},i=0;i<g;i++)s=r[i],u=s.selector+" ",h[u]===void 0&&(h[u]=s.needsContext?n(u,this).index(T)>-1:n.find(u,this,null,[T]).length),h[u]&&f.push(s);f.length&&v.push({elem:T,handlers:f})}}return T=this,g<r.length&&v.push({elem:T,handlers:r.slice(g)}),v},addProp:function(e,r){Object.defineProperty(n.Event.prototype,e,{enumerable:!0,configurable:!0,get:P(r)?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(i){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:i})}})},fix:function(e){return e[n.expando]?e:new n.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var r=this||e;return Gt.test(r.type)&&r.click&&O(r,"input")&&or(r,"click",!0),!1},trigger:function(e){var r=this||e;return Gt.test(r.type)&&r.click&&O(r,"input")&&or(r,"click"),!0},_default:function(e){var r=e.target;return Gt.test(r.type)&&r.click&&O(r,"input")&&Z.get(r,"click")||O(r,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function or(e,r,i){if(!i){Z.get(e,r)===void 0&&n.event.add(e,r,Nt);return}Z.set(e,r,!1),n.event.add(e,r,{namespace:!1,handler:function(s){var u,f=Z.get(this,r);if(s.isTrigger&1&&this[r]){if(f)(n.event.special[r]||{}).delegateType&&s.stopPropagation();else if(f=d.call(arguments),Z.set(this,r,f),this[r](),u=Z.get(this,r),Z.set(this,r,!1),f!==u)return s.stopImmediatePropagation(),s.preventDefault(),u}else f&&(Z.set(this,r,n.event.trigger(f[0],f.slice(1),this)),s.stopPropagation(),s.isImmediatePropagationStopped=Nt)}})}n.removeEvent=function(e,r,i){e.removeEventListener&&e.removeEventListener(r,i)},n.Event=function(e,r){if(!(this instanceof n.Event))return new n.Event(e,r);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?Nt:It,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,r&&n.extend(this,r),this.timeStamp=e&&e.timeStamp||Date.now(),this[n.expando]=!0},n.Event.prototype={constructor:n.Event,isDefaultPrevented:It,isPropagationStopped:It,isImmediatePropagationStopped:It,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Nt,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Nt,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Nt,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},n.event.addProp),n.each({focus:"focusin",blur:"focusout"},function(e,r){function i(s){if(x.documentMode){var u=Z.get(this,"handle"),f=n.event.fix(s);f.type=s.type==="focusin"?"focus":"blur",f.isSimulated=!0,u(s),f.target===f.currentTarget&&u(f)}else n.event.simulate(r,s.target,n.event.fix(s))}n.event.special[e]={setup:function(){var s;if(or(this,e,!0),x.documentMode)s=Z.get(this,r),s||this.addEventListener(r,i),Z.set(this,r,(s||0)+1);else return!1},trigger:function(){return or(this,e),!0},teardown:function(){var s;if(x.documentMode)s=Z.get(this,r)-1,s?Z.set(this,r,s):(this.removeEventListener(r,i),Z.remove(this,r));else return!1},_default:function(s){return Z.get(s.target,e)},delegateType:r},n.event.special[r]={setup:function(){var s=this.ownerDocument||this.document||this,u=x.documentMode?this:s,f=Z.get(u,r);f||(x.documentMode?this.addEventListener(r,i):s.addEventListener(e,i,!0)),Z.set(u,r,(f||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,u=x.documentMode?this:s,f=Z.get(u,r)-1;f?Z.set(u,r,f):(x.documentMode?this.removeEventListener(r,i):s.removeEventListener(e,i,!0),Z.remove(u,r))}}}),n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){n.event.special[e]={delegateType:r,bindType:r,handle:function(i){var s,u=this,f=i.relatedTarget,h=i.handleObj;return(!f||f!==u&&!n.contains(u,f))&&(i.type=h.origType,s=h.handler.apply(this,arguments),i.type=r),s}}}),n.fn.extend({on:function(e,r,i,s){return Or(this,e,r,i,s)},one:function(e,r,i,s){return Or(this,e,r,i,s,1)},off:function(e,r,i){var s,u;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,n(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if(typeof e=="object"){for(u in e)this.off(u,r,e[u]);return this}return(r===!1||typeof r=="function")&&(i=r,r=void 0),i===!1&&(i=It),this.each(function(){n.event.remove(this,e,i,r)})}});var Li=/<script|<style|<link/i,Pi=/checked\s*(?:[^=]|=\s*.checked.)/i,Bi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Tn(e,r){return O(e,"table")&&O(r.nodeType!==11?r:r.firstChild,"tr")&&n(e).children("tbody")[0]||e}function Ui(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Di(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function En(e,r){var i,s,u,f,h,v,g;if(r.nodeType===1){if(Z.hasData(e)&&(f=Z.get(e),g=f.events,g)){Z.remove(r,"handle events");for(u in g)for(i=0,s=g[u].length;i<s;i++)n.event.add(r,u,g[u][i])}_e.hasData(e)&&(h=_e.access(e),v=n.extend({},h),_e.set(r,v))}}function Fi(e,r){var i=r.nodeName.toLowerCase();i==="input"&&Gt.test(e.type)?r.checked=e.checked:(i==="input"||i==="textarea")&&(r.defaultValue=e.defaultValue)}function Ot(e,r,i,s){r=m(r);var u,f,h,v,g,T,A=0,M=e.length,w=M-1,_=r[0],oe=P(_);if(oe||M>1&&typeof _=="string"&&!B.checkClone&&Pi.test(_))return e.each(function(pe){var ce=e.eq(pe);oe&&(r[0]=_.call(this,pe,ce.html())),Ot(ce,r,i,s)});if(M&&(u=xn(r,e[0].ownerDocument,!1,e,s),f=u.firstChild,u.childNodes.length===1&&(u=f),f||s)){for(h=n.map(Le(u,"script"),Ui),v=h.length;A<M;A++)g=u,A!==w&&(g=n.clone(g,!0,!0),v&&n.merge(h,Le(g,"script"))),i.call(e[A],g,A);if(v)for(T=h[h.length-1].ownerDocument,n.map(h,Di),A=0;A<v;A++)g=h[A],vn.test(g.type||"")&&!Z.access(g,"globalEval")&&n.contains(T,g)&&(g.src&&(g.type||"").toLowerCase()!=="module"?n._evalUrl&&!g.noModule&&n._evalUrl(g.src,{nonce:g.nonce||g.getAttribute("nonce")},T):I(g.textContent.replace(Bi,""),g,T))}return e}function wn(e,r,i){for(var s,u=r?n.filter(r,e):e,f=0;(s=u[f])!=null;f++)!i&&s.nodeType===1&&n.cleanData(Le(s)),s.parentNode&&(i&&Ct(s)&&Ir(Le(s,"script")),s.parentNode.removeChild(s));return e}n.extend({htmlPrefilter:function(e){return e},clone:function(e,r,i){var s,u,f,h,v=e.cloneNode(!0),g=Ct(e);if(!B.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!n.isXMLDoc(e))for(h=Le(v),f=Le(e),s=0,u=f.length;s<u;s++)Fi(f[s],h[s]);if(r)if(i)for(f=f||Le(e),h=h||Le(v),s=0,u=f.length;s<u;s++)En(f[s],h[s]);else En(e,v);return h=Le(v,"script"),h.length>0&&Ir(h,!g&&Le(e,"script")),v},cleanData:function(e){for(var r,i,s,u=n.event.special,f=0;(i=e[f])!==void 0;f++)if(kt(i)){if(r=i[Z.expando]){if(r.events)for(s in r.events)u[s]?n.event.remove(i,s):n.removeEvent(i,s,r.handle);i[Z.expando]=void 0}i[_e.expando]&&(i[_e.expando]=void 0)}}}),n.fn.extend({detach:function(e){return wn(this,e,!0)},remove:function(e){return wn(this,e)},text:function(e){return Qe(this,function(r){return r===void 0?n.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=r)})},null,e,arguments.length)},append:function(){return Ot(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var r=Tn(this,e);r.appendChild(e)}})},prepend:function(){return Ot(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var r=Tn(this,e);r.insertBefore(e,r.firstChild)}})},before:function(){return Ot(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ot(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,r=0;(e=this[r])!=null;r++)e.nodeType===1&&(n.cleanData(Le(e,!1)),e.textContent="");return this},clone:function(e,r){return e=e??!1,r=r??e,this.map(function(){return n.clone(this,e,r)})},html:function(e){return Qe(this,function(r){var i=this[0]||{},s=0,u=this.length;if(r===void 0&&i.nodeType===1)return i.innerHTML;if(typeof r=="string"&&!Li.test(r)&&!De[(mn.exec(r)||["",""])[1].toLowerCase()]){r=n.htmlPrefilter(r);try{for(;s<u;s++)i=this[s]||{},i.nodeType===1&&(n.cleanData(Le(i,!1)),i.innerHTML=r);i=0}catch{}}i&&this.empty().append(r)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ot(this,arguments,function(r){var i=this.parentNode;n.inArray(this,e)<0&&(n.cleanData(Le(this)),i&&i.replaceChild(r,this))},e)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,r){n.fn[e]=function(i){for(var s,u=[],f=n(i),h=f.length-1,v=0;v<=h;v++)s=v===h?this:this.clone(!0),n(f[v])[r](s),y.apply(u,s.get());return this.pushStack(u)}});var _r=new RegExp("^("+pn+")(?!px)[a-z%]+$","i"),Lr=/^--/,ar=function(e){var r=e.ownerDocument.defaultView;return(!r||!r.opener)&&(r=t),r.getComputedStyle(e)},Rn=function(e,r,i){var s,u,f={};for(u in r)f[u]=e.style[u],e.style[u]=r[u];s=i.call(e);for(u in r)e.style[u]=f[u];return s},ki=new RegExp(Ze.join("|"),"i");(function(){function e(){if(T){g.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",T.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ht.appendChild(g).appendChild(T);var A=t.getComputedStyle(T);i=A.top!=="1%",v=r(A.marginLeft)===12,T.style.right="60%",f=r(A.right)===36,s=r(A.width)===36,T.style.position="absolute",u=r(T.offsetWidth/3)===12,ht.removeChild(g),T=null}}function r(A){return Math.round(parseFloat(A))}var i,s,u,f,h,v,g=x.createElement("div"),T=x.createElement("div");T.style&&(T.style.backgroundClip="content-box",T.cloneNode(!0).style.backgroundClip="",B.clearCloneStyle=T.style.backgroundClip==="content-box",n.extend(B,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),f},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),v},scrollboxSize:function(){return e(),u},reliableTrDimensions:function(){var A,M,w,_;return h==null&&(A=x.createElement("table"),M=x.createElement("tr"),w=x.createElement("div"),A.style.cssText="position:absolute;left:-11111px;border-collapse:separate",M.style.cssText="box-sizing:content-box;border:1px solid",M.style.height="1px",w.style.height="9px",w.style.display="block",ht.appendChild(A).appendChild(M).appendChild(w),_=t.getComputedStyle(M),h=parseInt(_.height,10)+parseInt(_.borderTopWidth,10)+parseInt(_.borderBottomWidth,10)===M.offsetHeight,ht.removeChild(A)),h}}))})();function Vt(e,r,i){var s,u,f,h,v=Lr.test(r),g=e.style;return i=i||ar(e),i&&(h=i.getPropertyValue(r)||i[r],v&&h&&(h=h.replace(ne,"$1")||void 0),h===""&&!Ct(e)&&(h=n.style(e,r)),!B.pixelBoxStyles()&&_r.test(h)&&ki.test(r)&&(s=g.width,u=g.minWidth,f=g.maxWidth,g.minWidth=g.maxWidth=g.width=h,h=i.width,g.width=s,g.minWidth=u,g.maxWidth=f)),h!==void 0?h+"":h}function An(e,r){return{get:function(){if(e()){delete this.get;return}return(this.get=r).apply(this,arguments)}}}var Sn=["Webkit","Moz","ms"],Cn=x.createElement("div").style,Mn={};function ji(e){for(var r=e[0].toUpperCase()+e.slice(1),i=Sn.length;i--;)if(e=Sn[i]+r,e in Cn)return e}function Pr(e){var r=n.cssProps[e]||Mn[e];return r||(e in Cn?e:Mn[e]=ji(e)||e)}var qi=/^(none|table(?!-c[ea]).+)/,Gi={position:"absolute",visibility:"hidden",display:"block"},Nn={letterSpacing:"0",fontWeight:"400"};function In(e,r,i){var s=qt.exec(r);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):r}function Br(e,r,i,s,u,f){var h=r==="width"?1:0,v=0,g=0,T=0;if(i===(s?"border":"content"))return 0;for(;h<4;h+=2)i==="margin"&&(T+=n.css(e,i+Ze[h],!0,u)),s?(i==="content"&&(g-=n.css(e,"padding"+Ze[h],!0,u)),i!=="margin"&&(g-=n.css(e,"border"+Ze[h]+"Width",!0,u))):(g+=n.css(e,"padding"+Ze[h],!0,u),i!=="padding"?g+=n.css(e,"border"+Ze[h]+"Width",!0,u):v+=n.css(e,"border"+Ze[h]+"Width",!0,u));return!s&&f>=0&&(g+=Math.max(0,Math.ceil(e["offset"+r[0].toUpperCase()+r.slice(1)]-f-g-v-.5))||0),g+T}function On(e,r,i){var s=ar(e),u=!B.boxSizingReliable()||i,f=u&&n.css(e,"boxSizing",!1,s)==="border-box",h=f,v=Vt(e,r,s),g="offset"+r[0].toUpperCase()+r.slice(1);if(_r.test(v)){if(!i)return v;v="auto"}return(!B.boxSizingReliable()&&f||!B.reliableTrDimensions()&&O(e,"tr")||v==="auto"||!parseFloat(v)&&n.css(e,"display",!1,s)==="inline")&&e.getClientRects().length&&(f=n.css(e,"boxSizing",!1,s)==="border-box",h=g in e,h&&(v=e[g])),v=parseFloat(v)||0,v+Br(e,r,i||(f?"border":"content"),h,s,v)+"px"}n.extend({cssHooks:{opacity:{get:function(e,r){if(r){var i=Vt(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,r,i,s){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var u,f,h,v=He(r),g=Lr.test(r),T=e.style;if(g||(r=Pr(v)),h=n.cssHooks[r]||n.cssHooks[v],i!==void 0){if(f=typeof i,f==="string"&&(u=qt.exec(i))&&u[1]&&(i=gn(e,r,u),f="number"),i==null||i!==i)return;f==="number"&&!g&&(i+=u&&u[3]||(n.cssNumber[v]?"":"px")),!B.clearCloneStyle&&i===""&&r.indexOf("background")===0&&(T[r]="inherit"),(!h||!("set"in h)||(i=h.set(e,i,s))!==void 0)&&(g?T.setProperty(r,i):T[r]=i)}else return h&&"get"in h&&(u=h.get(e,!1,s))!==void 0?u:T[r]}},css:function(e,r,i,s){var u,f,h,v=He(r),g=Lr.test(r);return g||(r=Pr(v)),h=n.cssHooks[r]||n.cssHooks[v],h&&"get"in h&&(u=h.get(e,!0,i)),u===void 0&&(u=Vt(e,r,s)),u==="normal"&&r in Nn&&(u=Nn[r]),i===""||i?(f=parseFloat(u),i===!0||isFinite(f)?f||0:u):u}}),n.each(["height","width"],function(e,r){n.cssHooks[r]={get:function(i,s,u){if(s)return qi.test(n.css(i,"display"))&&(!i.getClientRects().length||!i.getBoundingClientRect().width)?Rn(i,Gi,function(){return On(i,r,u)}):On(i,r,u)},set:function(i,s,u){var f,h=ar(i),v=!B.scrollboxSize()&&h.position==="absolute",g=v||u,T=g&&n.css(i,"boxSizing",!1,h)==="border-box",A=u?Br(i,r,u,T,h):0;return T&&v&&(A-=Math.ceil(i["offset"+r[0].toUpperCase()+r.slice(1)]-parseFloat(h[r])-Br(i,r,"border",!1,h)-.5)),A&&(f=qt.exec(s))&&(f[3]||"px")!=="px"&&(i.style[r]=s,s=n.css(i,r)),In(i,s,A)}}}),n.cssHooks.marginLeft=An(B.reliableMarginLeft,function(e,r){if(r)return(parseFloat(Vt(e,"marginLeft"))||e.getBoundingClientRect().left-Rn(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),n.each({margin:"",padding:"",border:"Width"},function(e,r){n.cssHooks[e+r]={expand:function(i){for(var s=0,u={},f=typeof i=="string"?i.split(" "):[i];s<4;s++)u[e+Ze[s]+r]=f[s]||f[s-2]||f[0];return u}},e!=="margin"&&(n.cssHooks[e+r].set=In)}),n.fn.extend({css:function(e,r){return Qe(this,function(i,s,u){var f,h,v={},g=0;if(Array.isArray(s)){for(f=ar(i),h=s.length;g<h;g++)v[s[g]]=n.css(i,s[g],!1,f);return v}return u!==void 0?n.style(i,s,u):n.css(i,s)},e,r,arguments.length>1)}});function Pe(e,r,i,s,u){return new Pe.prototype.init(e,r,i,s,u)}n.Tween=Pe,Pe.prototype={constructor:Pe,init:function(e,r,i,s,u,f){this.elem=e,this.prop=i,this.easing=u||n.easing._default,this.options=r,this.start=this.now=this.cur(),this.end=s,this.unit=f||(n.cssNumber[i]?"":"px")},cur:function(){var e=Pe.propHooks[this.prop];return e&&e.get?e.get(this):Pe.propHooks._default.get(this)},run:function(e){var r,i=Pe.propHooks[this.prop];return this.options.duration?this.pos=r=n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=r=e,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Pe.propHooks._default.set(this),this}},Pe.prototype.init.prototype=Pe.prototype,Pe.propHooks={_default:{get:function(e){var r;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(r=n.css(e.elem,e.prop,""),!r||r==="auto"?0:r)},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.nodeType===1&&(n.cssHooks[e.prop]||e.elem.style[Pr(e.prop)]!=null)?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Pe.propHooks.scrollTop=Pe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},n.fx=Pe.prototype.init,n.fx.step={};var _t,ur,Vi=/^(?:toggle|show|hide)$/,zi=/queueHooks$/;function Ur(){ur&&(x.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Ur):t.setTimeout(Ur,n.fx.interval),n.fx.tick())}function _n(){return t.setTimeout(function(){_t=void 0}),_t=Date.now()}function fr(e,r){var i,s=0,u={height:e};for(r=r?1:0;s<4;s+=2-r)i=Ze[s],u["margin"+i]=u["padding"+i]=e;return r&&(u.opacity=u.width=e),u}function Ln(e,r,i){for(var s,u=(qe.tweeners[r]||[]).concat(qe.tweeners["*"]),f=0,h=u.length;f<h;f++)if(s=u[f].call(i,r,e))return s}function Hi(e,r,i){var s,u,f,h,v,g,T,A,M="width"in r||"height"in r,w=this,_={},oe=e.style,pe=e.nodeType&&sr(e),ce=Z.get(e,"fxshow");i.queue||(h=n._queueHooks(e,"fx"),h.unqueued==null&&(h.unqueued=0,v=h.empty.fire,h.empty.fire=function(){h.unqueued||v()}),h.unqueued++,w.always(function(){w.always(function(){h.unqueued--,n.queue(e,"fx").length||h.empty.fire()})}));for(s in r)if(u=r[s],Vi.test(u)){if(delete r[s],f=f||u==="toggle",u===(pe?"hide":"show"))if(u==="show"&&ce&&ce[s]!==void 0)pe=!0;else continue;_[s]=ce&&ce[s]||n.style(e,s)}if(g=!n.isEmptyObject(r),!(!g&&n.isEmptyObject(_))){M&&e.nodeType===1&&(i.overflow=[oe.overflow,oe.overflowX,oe.overflowY],T=ce&&ce.display,T==null&&(T=Z.get(e,"display")),A=n.css(e,"display"),A==="none"&&(T?A=T:(Mt([e],!0),T=e.style.display||T,A=n.css(e,"display"),Mt([e]))),(A==="inline"||A==="inline-block"&&T!=null)&&n.css(e,"float")==="none"&&(g||(w.done(function(){oe.display=T}),T==null&&(A=oe.display,T=A==="none"?"":A)),oe.display="inline-block")),i.overflow&&(oe.overflow="hidden",w.always(function(){oe.overflow=i.overflow[0],oe.overflowX=i.overflow[1],oe.overflowY=i.overflow[2]})),g=!1;for(s in _)g||(ce?"hidden"in ce&&(pe=ce.hidden):ce=Z.access(e,"fxshow",{display:T}),f&&(ce.hidden=!pe),pe&&Mt([e],!0),w.done(function(){pe||Mt([e]),Z.remove(e,"fxshow");for(s in _)n.style(e,s,_[s])})),g=Ln(pe?ce[s]:0,s,w),s in ce||(ce[s]=g.start,pe&&(g.end=g.start,g.start=0))}}function Wi(e,r){var i,s,u,f,h;for(i in e)if(s=He(i),u=r[s],f=e[i],Array.isArray(f)&&(u=f[1],f=e[i]=f[0]),i!==s&&(e[s]=f,delete e[i]),h=n.cssHooks[s],h&&"expand"in h){f=h.expand(f),delete e[s];for(i in f)i in e||(e[i]=f[i],r[i]=u)}else r[s]=u}function qe(e,r,i){var s,u,f=0,h=qe.prefilters.length,v=n.Deferred().always(function(){delete g.elem}),g=function(){if(u)return!1;for(var M=_t||_n(),w=Math.max(0,T.startTime+T.duration-M),_=w/T.duration||0,oe=1-_,pe=0,ce=T.tweens.length;pe<ce;pe++)T.tweens[pe].run(oe);return v.notifyWith(e,[T,oe,w]),oe<1&&ce?w:(ce||v.notifyWith(e,[T,1,0]),v.resolveWith(e,[T]),!1)},T=v.promise({elem:e,props:n.extend({},r),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},i),originalProperties:r,originalOptions:i,startTime:_t||_n(),duration:i.duration,tweens:[],createTween:function(M,w){var _=n.Tween(e,T.opts,M,w,T.opts.specialEasing[M]||T.opts.easing);return T.tweens.push(_),_},stop:function(M){var w=0,_=M?T.tweens.length:0;if(u)return this;for(u=!0;w<_;w++)T.tweens[w].run(1);return M?(v.notifyWith(e,[T,1,0]),v.resolveWith(e,[T,M])):v.rejectWith(e,[T,M]),this}}),A=T.props;for(Wi(A,T.opts.specialEasing);f<h;f++)if(s=qe.prefilters[f].call(T,e,A,T.opts),s)return P(s.stop)&&(n._queueHooks(T.elem,T.opts.queue).stop=s.stop.bind(s)),s;return n.map(A,Ln,T),P(T.opts.start)&&T.opts.start.call(e,T),T.progress(T.opts.progress).done(T.opts.done,T.opts.complete).fail(T.opts.fail).always(T.opts.always),n.fx.timer(n.extend(g,{elem:e,anim:T,queue:T.opts.queue})),T}n.Animation=n.extend(qe,{tweeners:{"*":[function(e,r){var i=this.createTween(e,r);return gn(i.elem,e,qt.exec(r),i),i}]},tweener:function(e,r){P(e)?(r=e,e=["*"]):e=e.match(ze);for(var i,s=0,u=e.length;s<u;s++)i=e[s],qe.tweeners[i]=qe.tweeners[i]||[],qe.tweeners[i].unshift(r)},prefilters:[Hi],prefilter:function(e,r){r?qe.prefilters.unshift(e):qe.prefilters.push(e)}}),n.speed=function(e,r,i){var s=e&&typeof e=="object"?n.extend({},e):{complete:i||!i&&r||P(e)&&e,duration:e,easing:i&&r||r&&!P(r)&&r};return n.fx.off?s.duration=0:typeof s.duration!="number"&&(s.duration in n.fx.speeds?s.duration=n.fx.speeds[s.duration]:s.duration=n.fx.speeds._default),(s.queue==null||s.queue===!0)&&(s.queue="fx"),s.old=s.complete,s.complete=function(){P(s.old)&&s.old.call(this),s.queue&&n.dequeue(this,s.queue)},s},n.fn.extend({fadeTo:function(e,r,i,s){return this.filter(sr).css("opacity",0).show().end().animate({opacity:r},e,i,s)},animate:function(e,r,i,s){var u=n.isEmptyObject(e),f=n.speed(r,i,s),h=function(){var v=qe(this,n.extend({},e),f);(u||Z.get(this,"finish"))&&v.stop(!0)};return h.finish=h,u||f.queue===!1?this.each(h):this.queue(f.queue,h)},stop:function(e,r,i){var s=function(u){var f=u.stop;delete u.stop,f(i)};return typeof e!="string"&&(i=r,r=e,e=void 0),r&&this.queue(e||"fx",[]),this.each(function(){var u=!0,f=e!=null&&e+"queueHooks",h=n.timers,v=Z.get(this);if(f)v[f]&&v[f].stop&&s(v[f]);else for(f in v)v[f]&&v[f].stop&&zi.test(f)&&s(v[f]);for(f=h.length;f--;)h[f].elem===this&&(e==null||h[f].queue===e)&&(h[f].anim.stop(i),u=!1,h.splice(f,1));(u||!i)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var r,i=Z.get(this),s=i[e+"queue"],u=i[e+"queueHooks"],f=n.timers,h=s?s.length:0;for(i.finish=!0,n.queue(this,e,[]),u&&u.stop&&u.stop.call(this,!0),r=f.length;r--;)f[r].elem===this&&f[r].queue===e&&(f[r].anim.stop(!0),f.splice(r,1));for(r=0;r<h;r++)s[r]&&s[r].finish&&s[r].finish.call(this);delete i.finish})}}),n.each(["toggle","show","hide"],function(e,r){var i=n.fn[r];n.fn[r]=function(s,u,f){return s==null||typeof s=="boolean"?i.apply(this,arguments):this.animate(fr(r,!0),s,u,f)}}),n.each({slideDown:fr("show"),slideUp:fr("hide"),slideToggle:fr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){n.fn[e]=function(i,s,u){return this.animate(r,i,s,u)}}),n.timers=[],n.fx.tick=function(){var e,r=0,i=n.timers;for(_t=Date.now();r<i.length;r++)e=i[r],!e()&&i[r]===e&&i.splice(r--,1);i.length||n.fx.stop(),_t=void 0},n.fx.timer=function(e){n.timers.push(e),n.fx.start()},n.fx.interval=13,n.fx.start=function(){ur||(ur=!0,Ur())},n.fx.stop=function(){ur=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,r){return e=n.fx&&n.fx.speeds[e]||e,r=r||"fx",this.queue(r,function(i,s){var u=t.setTimeout(i,e);s.stop=function(){t.clearTimeout(u)}})},function(){var e=x.createElement("input"),r=x.createElement("select"),i=r.appendChild(x.createElement("option"));e.type="checkbox",B.checkOn=e.value!=="",B.optSelected=i.selected,e=x.createElement("input"),e.value="t",e.type="radio",B.radioValue=e.value==="t"}();var Pn,zt=n.expr.attrHandle;n.fn.extend({attr:function(e,r){return Qe(this,n.attr,e,r,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,r,i){var s,u,f=e.nodeType;if(!(f===3||f===8||f===2)){if(typeof e.getAttribute>"u")return n.prop(e,r,i);if((f!==1||!n.isXMLDoc(e))&&(u=n.attrHooks[r.toLowerCase()]||(n.expr.match.bool.test(r)?Pn:void 0)),i!==void 0){if(i===null){n.removeAttr(e,r);return}return u&&"set"in u&&(s=u.set(e,i,r))!==void 0?s:(e.setAttribute(r,i+""),i)}return u&&"get"in u&&(s=u.get(e,r))!==null?s:(s=n.find.attr(e,r),s??void 0)}},attrHooks:{type:{set:function(e,r){if(!B.radioValue&&r==="radio"&&O(e,"input")){var i=e.value;return e.setAttribute("type",r),i&&(e.value=i),r}}}},removeAttr:function(e,r){var i,s=0,u=r&&r.match(ze);if(u&&e.nodeType===1)for(;i=u[s++];)e.removeAttribute(i)}}),Pn={set:function(e,r,i){return r===!1?n.removeAttr(e,i):e.setAttribute(i,i),i}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,r){var i=zt[r]||n.find.attr;zt[r]=function(s,u,f){var h,v,g=u.toLowerCase();return f||(v=zt[g],zt[g]=h,h=i(s,u,f)!=null?g:null,zt[g]=v),h}});var $i=/^(?:input|select|textarea|button)$/i,Yi=/^(?:a|area)$/i;n.fn.extend({prop:function(e,r){return Qe(this,n.prop,e,r,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({prop:function(e,r,i){var s,u,f=e.nodeType;if(!(f===3||f===8||f===2))return(f!==1||!n.isXMLDoc(e))&&(r=n.propFix[r]||r,u=n.propHooks[r]),i!==void 0?u&&"set"in u&&(s=u.set(e,i,r))!==void 0?s:e[r]=i:u&&"get"in u&&(s=u.get(e,r))!==null?s:e[r]},propHooks:{tabIndex:{get:function(e){var r=n.find.attr(e,"tabindex");return r?parseInt(r,10):$i.test(e.nodeName)||Yi.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),B.optSelected||(n.propHooks.selected={get:function(e){var r=e.parentNode;return r&&r.parentNode&&r.parentNode.selectedIndex,null},set:function(e){var r=e.parentNode;r&&(r.selectedIndex,r.parentNode&&r.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});function dt(e){var r=e.match(ze)||[];return r.join(" ")}function pt(e){return e.getAttribute&&e.getAttribute("class")||""}function Dr(e){return Array.isArray(e)?e:typeof e=="string"?e.match(ze)||[]:[]}n.fn.extend({addClass:function(e){var r,i,s,u,f,h;return P(e)?this.each(function(v){n(this).addClass(e.call(this,v,pt(this)))}):(r=Dr(e),r.length?this.each(function(){if(s=pt(this),i=this.nodeType===1&&" "+dt(s)+" ",i){for(f=0;f<r.length;f++)u=r[f],i.indexOf(" "+u+" ")<0&&(i+=u+" ");h=dt(i),s!==h&&this.setAttribute("class",h)}}):this)},removeClass:function(e){var r,i,s,u,f,h;return P(e)?this.each(function(v){n(this).removeClass(e.call(this,v,pt(this)))}):arguments.length?(r=Dr(e),r.length?this.each(function(){if(s=pt(this),i=this.nodeType===1&&" "+dt(s)+" ",i){for(f=0;f<r.length;f++)for(u=r[f];i.indexOf(" "+u+" ")>-1;)i=i.replace(" "+u+" "," ");h=dt(i),s!==h&&this.setAttribute("class",h)}}):this):this.attr("class","")},toggleClass:function(e,r){var i,s,u,f,h=typeof e,v=h==="string"||Array.isArray(e);return P(e)?this.each(function(g){n(this).toggleClass(e.call(this,g,pt(this),r),r)}):typeof r=="boolean"&&v?r?this.addClass(e):this.removeClass(e):(i=Dr(e),this.each(function(){if(v)for(f=n(this),u=0;u<i.length;u++)s=i[u],f.hasClass(s)?f.removeClass(s):f.addClass(s);else(e===void 0||h==="boolean")&&(s=pt(this),s&&Z.set(this,"__className__",s),this.setAttribute&&this.setAttribute("class",s||e===!1?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var r,i,s=0;for(r=" "+e+" ";i=this[s++];)if(i.nodeType===1&&(" "+dt(pt(i))+" ").indexOf(r)>-1)return!0;return!1}});var Xi=/\r/g;n.fn.extend({val:function(e){var r,i,s,u=this[0];return arguments.length?(s=P(e),this.each(function(f){var h;this.nodeType===1&&(s?h=e.call(this,f,n(this).val()):h=e,h==null?h="":typeof h=="number"?h+="":Array.isArray(h)&&(h=n.map(h,function(v){return v==null?"":v+""})),r=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],(!r||!("set"in r)||r.set(this,h,"value")===void 0)&&(this.value=h))})):u?(r=n.valHooks[u.type]||n.valHooks[u.nodeName.toLowerCase()],r&&"get"in r&&(i=r.get(u,"value"))!==void 0?i:(i=u.value,typeof i=="string"?i.replace(Xi,""):i??"")):void 0}}),n.extend({valHooks:{option:{get:function(e){var r=n.find.attr(e,"value");return r??dt(n.text(e))}},select:{get:function(e){var r,i,s,u=e.options,f=e.selectedIndex,h=e.type==="select-one",v=h?null:[],g=h?f+1:u.length;for(f<0?s=g:s=h?f:0;s<g;s++)if(i=u[s],(i.selected||s===f)&&!i.disabled&&(!i.parentNode.disabled||!O(i.parentNode,"optgroup"))){if(r=n(i).val(),h)return r;v.push(r)}return v},set:function(e,r){for(var i,s,u=e.options,f=n.makeArray(r),h=u.length;h--;)s=u[h],(s.selected=n.inArray(n.valHooks.option.get(s),f)>-1)&&(i=!0);return i||(e.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,r){if(Array.isArray(r))return e.checked=n.inArray(n(e).val(),r)>-1}},B.checkOn||(n.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Ht=t.location,Bn={guid:Date.now()},Fr=/\?/;n.parseXML=function(e){var r,i;if(!e||typeof e!="string")return null;try{r=new t.DOMParser().parseFromString(e,"text/xml")}catch{}return i=r&&r.getElementsByTagName("parsererror")[0],(!r||i)&&n.error("Invalid XML: "+(i?n.map(i.childNodes,function(s){return s.textContent}).join(`
`):e)),r};var Un=/^(?:focusinfocus|focusoutblur)$/,Dn=function(e){e.stopPropagation()};n.extend(n.event,{trigger:function(e,r,i,s){var u,f,h,v,g,T,A,M,w=[i||x],_=Y.call(e,"type")?e.type:e,oe=Y.call(e,"namespace")?e.namespace.split("."):[];if(f=M=h=i=i||x,!(i.nodeType===3||i.nodeType===8)&&!Un.test(_+n.event.triggered)&&(_.indexOf(".")>-1&&(oe=_.split("."),_=oe.shift(),oe.sort()),g=_.indexOf(":")<0&&"on"+_,e=e[n.expando]?e:new n.Event(_,typeof e=="object"&&e),e.isTrigger=s?2:3,e.namespace=oe.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),r=r==null?[e]:n.makeArray(r,[e]),A=n.event.special[_]||{},!(!s&&A.trigger&&A.trigger.apply(i,r)===!1))){if(!s&&!A.noBubble&&!W(i)){for(v=A.delegateType||_,Un.test(v+_)||(f=f.parentNode);f;f=f.parentNode)w.push(f),h=f;h===(i.ownerDocument||x)&&w.push(h.defaultView||h.parentWindow||t)}for(u=0;(f=w[u++])&&!e.isPropagationStopped();)M=f,e.type=u>1?v:A.bindType||_,T=(Z.get(f,"events")||Object.create(null))[e.type]&&Z.get(f,"handle"),T&&T.apply(f,r),T=g&&f[g],T&&T.apply&&kt(f)&&(e.result=T.apply(f,r),e.result===!1&&e.preventDefault());return e.type=_,!s&&!e.isDefaultPrevented()&&(!A._default||A._default.apply(w.pop(),r)===!1)&&kt(i)&&g&&P(i[_])&&!W(i)&&(h=i[g],h&&(i[g]=null),n.event.triggered=_,e.isPropagationStopped()&&M.addEventListener(_,Dn),i[_](),e.isPropagationStopped()&&M.removeEventListener(_,Dn),n.event.triggered=void 0,h&&(i[g]=h)),e.result}},simulate:function(e,r,i){var s=n.extend(new n.Event,i,{type:e,isSimulated:!0});n.event.trigger(s,null,r)}}),n.fn.extend({trigger:function(e,r){return this.each(function(){n.event.trigger(e,r,this)})},triggerHandler:function(e,r){var i=this[0];if(i)return n.event.trigger(e,r,i,!0)}});var Ji=/\[\]$/,Fn=/\r?\n/g,Ki=/^(?:submit|button|image|reset|file)$/i,Qi=/^(?:input|select|textarea|keygen)/i;function kr(e,r,i,s){var u;if(Array.isArray(r))n.each(r,function(f,h){i||Ji.test(e)?s(e,h):kr(e+"["+(typeof h=="object"&&h!=null?f:"")+"]",h,i,s)});else if(!i&&U(r)==="object")for(u in r)kr(e+"["+u+"]",r[u],i,s);else s(e,r)}n.param=function(e,r){var i,s=[],u=function(f,h){var v=P(h)?h():h;s[s.length]=encodeURIComponent(f)+"="+encodeURIComponent(v??"")};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){u(this.name,this.value)});else for(i in e)kr(i,e[i],r,u);return s.join("&")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&Qi.test(this.nodeName)&&!Ki.test(e)&&(this.checked||!Gt.test(e))}).map(function(e,r){var i=n(this).val();return i==null?null:Array.isArray(i)?n.map(i,function(s){return{name:r.name,value:s.replace(Fn,`\r
`)}}):{name:r.name,value:i.replace(Fn,`\r
`)}}).get()}});var Zi=/%20/g,es=/#.*$/,ts=/([?&])_=[^&]*/,rs=/^(.*?):[ \t]*([^\r\n]*)$/mg,ns=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,is=/^(?:GET|HEAD)$/,ss=/^\/\//,kn={},jr={},jn="*/".concat("*"),qr=x.createElement("a");qr.href=Ht.href;function qn(e){return function(r,i){typeof r!="string"&&(i=r,r="*");var s,u=0,f=r.toLowerCase().match(ze)||[];if(P(i))for(;s=f[u++];)s[0]==="+"?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function Gn(e,r,i,s){var u={},f=e===jr;function h(v){var g;return u[v]=!0,n.each(e[v]||[],function(T,A){var M=A(r,i,s);if(typeof M=="string"&&!f&&!u[M])return r.dataTypes.unshift(M),h(M),!1;if(f)return!(g=M)}),g}return h(r.dataTypes[0])||!u["*"]&&h("*")}function Gr(e,r){var i,s,u=n.ajaxSettings.flatOptions||{};for(i in r)r[i]!==void 0&&((u[i]?e:s||(s={}))[i]=r[i]);return s&&n.extend(!0,e,s),e}function os(e,r,i){for(var s,u,f,h,v=e.contents,g=e.dataTypes;g[0]==="*";)g.shift(),s===void 0&&(s=e.mimeType||r.getResponseHeader("Content-Type"));if(s){for(u in v)if(v[u]&&v[u].test(s)){g.unshift(u);break}}if(g[0]in i)f=g[0];else{for(u in i){if(!g[0]||e.converters[u+" "+g[0]]){f=u;break}h||(h=u)}f=f||h}if(f)return f!==g[0]&&g.unshift(f),i[f]}function as(e,r,i,s){var u,f,h,v,g,T={},A=e.dataTypes.slice();if(A[1])for(h in e.converters)T[h.toLowerCase()]=e.converters[h];for(f=A.shift();f;)if(e.responseFields[f]&&(i[e.responseFields[f]]=r),!g&&s&&e.dataFilter&&(r=e.dataFilter(r,e.dataType)),g=f,f=A.shift(),f){if(f==="*")f=g;else if(g!=="*"&&g!==f){if(h=T[g+" "+f]||T["* "+f],!h){for(u in T)if(v=u.split(" "),v[1]===f&&(h=T[g+" "+v[0]]||T["* "+v[0]],h)){h===!0?h=T[u]:T[u]!==!0&&(f=v[0],A.unshift(v[1]));break}}if(h!==!0)if(h&&e.throws)r=h(r);else try{r=h(r)}catch(M){return{state:"parsererror",error:h?M:"No conversion from "+g+" to "+f}}}}return{state:"success",data:r}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ht.href,type:"GET",isLocal:ns.test(Ht.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,r){return r?Gr(Gr(e,n.ajaxSettings),r):Gr(n.ajaxSettings,e)},ajaxPrefilter:qn(kn),ajaxTransport:qn(jr),ajax:function(e,r){typeof e=="object"&&(r=e,e=void 0),r=r||{};var i,s,u,f,h,v,g,T,A,M,w=n.ajaxSetup({},r),_=w.context||w,oe=w.context&&(_.nodeType||_.jquery)?n(_):n.event,pe=n.Deferred(),ce=n.Callbacks("once memory"),Se=w.statusCode||{},Ae={},We={},$e="canceled",de={readyState:0,getResponseHeader:function(ye){var we;if(g){if(!f)for(f={};we=rs.exec(u);)f[we[1].toLowerCase()+" "]=(f[we[1].toLowerCase()+" "]||[]).concat(we[2]);we=f[ye.toLowerCase()+" "]}return we==null?null:we.join(", ")},getAllResponseHeaders:function(){return g?u:null},setRequestHeader:function(ye,we){return g==null&&(ye=We[ye.toLowerCase()]=We[ye.toLowerCase()]||ye,Ae[ye]=we),this},overrideMimeType:function(ye){return g==null&&(w.mimeType=ye),this},statusCode:function(ye){var we;if(ye)if(g)de.always(ye[de.status]);else for(we in ye)Se[we]=[Se[we],ye[we]];return this},abort:function(ye){var we=ye||$e;return i&&i.abort(we),gt(0,we),this}};if(pe.promise(de),w.url=((e||w.url||Ht.href)+"").replace(ss,Ht.protocol+"//"),w.type=r.method||r.type||w.method||w.type,w.dataTypes=(w.dataType||"*").toLowerCase().match(ze)||[""],w.crossDomain==null){v=x.createElement("a");try{v.href=w.url,v.href=v.href,w.crossDomain=qr.protocol+"//"+qr.host!=v.protocol+"//"+v.host}catch{w.crossDomain=!0}}if(w.data&&w.processData&&typeof w.data!="string"&&(w.data=n.param(w.data,w.traditional)),Gn(kn,w,r,de),g)return de;T=n.event&&w.global,T&&n.active++===0&&n.event.trigger("ajaxStart"),w.type=w.type.toUpperCase(),w.hasContent=!is.test(w.type),s=w.url.replace(es,""),w.hasContent?w.data&&w.processData&&(w.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(w.data=w.data.replace(Zi,"+")):(M=w.url.slice(s.length),w.data&&(w.processData||typeof w.data=="string")&&(s+=(Fr.test(s)?"&":"?")+w.data,delete w.data),w.cache===!1&&(s=s.replace(ts,"$1"),M=(Fr.test(s)?"&":"?")+"_="+Bn.guid+++M),w.url=s+M),w.ifModified&&(n.lastModified[s]&&de.setRequestHeader("If-Modified-Since",n.lastModified[s]),n.etag[s]&&de.setRequestHeader("If-None-Match",n.etag[s])),(w.data&&w.hasContent&&w.contentType!==!1||r.contentType)&&de.setRequestHeader("Content-Type",w.contentType),de.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+(w.dataTypes[0]!=="*"?", "+jn+"; q=0.01":""):w.accepts["*"]);for(A in w.headers)de.setRequestHeader(A,w.headers[A]);if(w.beforeSend&&(w.beforeSend.call(_,de,w)===!1||g))return de.abort();if($e="abort",ce.add(w.complete),de.done(w.success),de.fail(w.error),i=Gn(jr,w,r,de),!i)gt(-1,"No Transport");else{if(de.readyState=1,T&&oe.trigger("ajaxSend",[de,w]),g)return de;w.async&&w.timeout>0&&(h=t.setTimeout(function(){de.abort("timeout")},w.timeout));try{g=!1,i.send(Ae,gt)}catch(ye){if(g)throw ye;gt(-1,ye)}}function gt(ye,we,$t,zr){var Ye,Yt,Xe,nt,it,Fe=we;g||(g=!0,h&&t.clearTimeout(h),i=void 0,u=zr||"",de.readyState=ye>0?4:0,Ye=ye>=200&&ye<300||ye===304,$t&&(nt=os(w,de,$t)),!Ye&&n.inArray("script",w.dataTypes)>-1&&n.inArray("json",w.dataTypes)<0&&(w.converters["text script"]=function(){}),nt=as(w,nt,de,Ye),Ye?(w.ifModified&&(it=de.getResponseHeader("Last-Modified"),it&&(n.lastModified[s]=it),it=de.getResponseHeader("etag"),it&&(n.etag[s]=it)),ye===204||w.type==="HEAD"?Fe="nocontent":ye===304?Fe="notmodified":(Fe=nt.state,Yt=nt.data,Xe=nt.error,Ye=!Xe)):(Xe=Fe,(ye||!Fe)&&(Fe="error",ye<0&&(ye=0))),de.status=ye,de.statusText=(we||Fe)+"",Ye?pe.resolveWith(_,[Yt,Fe,de]):pe.rejectWith(_,[de,Fe,Xe]),de.statusCode(Se),Se=void 0,T&&oe.trigger(Ye?"ajaxSuccess":"ajaxError",[de,w,Ye?Yt:Xe]),ce.fireWith(_,[de,Fe]),T&&(oe.trigger("ajaxComplete",[de,w]),--n.active||n.event.trigger("ajaxStop")))}return de},getJSON:function(e,r,i){return n.get(e,r,i,"json")},getScript:function(e,r){return n.get(e,void 0,r,"script")}}),n.each(["get","post"],function(e,r){n[r]=function(i,s,u,f){return P(s)&&(f=f||u,u=s,s=void 0),n.ajax(n.extend({url:i,type:r,dataType:f,data:s,success:u},n.isPlainObject(i)&&i))}}),n.ajaxPrefilter(function(e){var r;for(r in e.headers)r.toLowerCase()==="content-type"&&(e.contentType=e.headers[r]||"")}),n._evalUrl=function(e,r,i){return n.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(s){n.globalEval(s,r,i)}})},n.fn.extend({wrapAll:function(e){var r;return this[0]&&(P(e)&&(e=e.call(this[0])),r=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&r.insertBefore(this[0]),r.map(function(){for(var i=this;i.firstElementChild;)i=i.firstElementChild;return i}).append(this)),this},wrapInner:function(e){return P(e)?this.each(function(r){n(this).wrapInner(e.call(this,r))}):this.each(function(){var r=n(this),i=r.contents();i.length?i.wrapAll(e):r.append(e)})},wrap:function(e){var r=P(e);return this.each(function(i){n(this).wrapAll(r?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){n(this).replaceWith(this.childNodes)}),this}}),n.expr.pseudos.hidden=function(e){return!n.expr.pseudos.visible(e)},n.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},n.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var us={0:200,1223:204},Wt=n.ajaxSettings.xhr();B.cors=!!Wt&&"withCredentials"in Wt,B.ajax=Wt=!!Wt,n.ajaxTransport(function(e){var r,i;if(B.cors||Wt&&!e.crossDomain)return{send:function(s,u){var f,h=e.xhr();if(h.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(f in e.xhrFields)h[f]=e.xhrFields[f];e.mimeType&&h.overrideMimeType&&h.overrideMimeType(e.mimeType),!e.crossDomain&&!s["X-Requested-With"]&&(s["X-Requested-With"]="XMLHttpRequest");for(f in s)h.setRequestHeader(f,s[f]);r=function(v){return function(){r&&(r=i=h.onload=h.onerror=h.onabort=h.ontimeout=h.onreadystatechange=null,v==="abort"?h.abort():v==="error"?typeof h.status!="number"?u(0,"error"):u(h.status,h.statusText):u(us[h.status]||h.status,h.statusText,(h.responseType||"text")!=="text"||typeof h.responseText!="string"?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=r(),i=h.onerror=h.ontimeout=r("error"),h.onabort!==void 0?h.onabort=i:h.onreadystatechange=function(){h.readyState===4&&t.setTimeout(function(){r&&i()})},r=r("abort");try{h.send(e.hasContent&&e.data||null)}catch(v){if(r)throw v}},abort:function(){r&&r()}}}),n.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var r,i;return{send:function(s,u){r=n("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(f){r.remove(),i=null,f&&u(f.type==="error"?404:200,f.type)}),x.head.appendChild(r[0])},abort:function(){i&&i()}}}});var Vn=[],Vr=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vn.pop()||n.expando+"_"+Bn.guid++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,r,i){var s,u,f,h=e.jsonp!==!1&&(Vr.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Vr.test(e.data)&&"data");if(h||e.dataTypes[0]==="jsonp")return s=e.jsonpCallback=P(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,h?e[h]=e[h].replace(Vr,"$1"+s):e.jsonp!==!1&&(e.url+=(Fr.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return f||n.error(s+" was not called"),f[0]},e.dataTypes[0]="json",u=t[s],t[s]=function(){f=arguments},i.always(function(){u===void 0?n(t).removeProp(s):t[s]=u,e[s]&&(e.jsonpCallback=r.jsonpCallback,Vn.push(s)),f&&P(u)&&u(f[0]),f=u=void 0}),"script"}),B.createHTMLDocument=function(){var e=x.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),n.parseHTML=function(e,r,i){if(typeof e!="string")return[];typeof r=="boolean"&&(i=r,r=!1);var s,u,f;return r||(B.createHTMLDocument?(r=x.implementation.createHTMLDocument(""),s=r.createElement("base"),s.href=x.location.href,r.head.appendChild(s)):r=x),u=At.exec(e),f=!i&&[],u?[r.createElement(u[1])]:(u=xn([e],r,f),f&&f.length&&n(f).remove(),n.merge([],u.childNodes))},n.fn.load=function(e,r,i){var s,u,f,h=this,v=e.indexOf(" ");return v>-1&&(s=dt(e.slice(v)),e=e.slice(0,v)),P(r)?(i=r,r=void 0):r&&typeof r=="object"&&(u="POST"),h.length>0&&n.ajax({url:e,type:u||"GET",dataType:"html",data:r}).done(function(g){f=arguments,h.html(s?n("<div>").append(n.parseHTML(g)).find(s):g)}).always(i&&function(g,T){h.each(function(){i.apply(this,f||[g.responseText,T,g])})}),this},n.expr.pseudos.animated=function(e){return n.grep(n.timers,function(r){return e===r.elem}).length},n.offset={setOffset:function(e,r,i){var s,u,f,h,v,g,T,A=n.css(e,"position"),M=n(e),w={};A==="static"&&(e.style.position="relative"),v=M.offset(),f=n.css(e,"top"),g=n.css(e,"left"),T=(A==="absolute"||A==="fixed")&&(f+g).indexOf("auto")>-1,T?(s=M.position(),h=s.top,u=s.left):(h=parseFloat(f)||0,u=parseFloat(g)||0),P(r)&&(r=r.call(e,i,n.extend({},v))),r.top!=null&&(w.top=r.top-v.top+h),r.left!=null&&(w.left=r.left-v.left+u),"using"in r?r.using.call(e,w):M.css(w)}},n.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(u){n.offset.setOffset(this,e,u)});var r,i,s=this[0];if(s)return s.getClientRects().length?(r=s.getBoundingClientRect(),i=s.ownerDocument.defaultView,{top:r.top+i.pageYOffset,left:r.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,r,i,s=this[0],u={top:0,left:0};if(n.css(s,"position")==="fixed")r=s.getBoundingClientRect();else{for(r=this.offset(),i=s.ownerDocument,e=s.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&n.css(e,"position")==="static";)e=e.parentNode;e&&e!==s&&e.nodeType===1&&(u=n(e).offset(),u.top+=n.css(e,"borderTopWidth",!0),u.left+=n.css(e,"borderLeftWidth",!0))}return{top:r.top-u.top-n.css(s,"marginTop",!0),left:r.left-u.left-n.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&n.css(e,"position")==="static";)e=e.offsetParent;return e||ht})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var i=r==="pageYOffset";n.fn[e]=function(s){return Qe(this,function(u,f,h){var v;if(W(u)?v=u:u.nodeType===9&&(v=u.defaultView),h===void 0)return v?v[r]:u[f];v?v.scrollTo(i?v.pageXOffset:h,i?h:v.pageYOffset):u[f]=h},e,s,arguments.length)}}),n.each(["top","left"],function(e,r){n.cssHooks[r]=An(B.pixelPosition,function(i,s){if(s)return s=Vt(i,r),_r.test(s)?n(i).position()[r]+"px":s})}),n.each({Height:"height",Width:"width"},function(e,r){n.each({padding:"inner"+e,content:r,"":"outer"+e},function(i,s){n.fn[s]=function(u,f){var h=arguments.length&&(i||typeof u!="boolean"),v=i||(u===!0||f===!0?"margin":"border");return Qe(this,function(g,T,A){var M;return W(g)?s.indexOf("outer")===0?g["inner"+e]:g.document.documentElement["client"+e]:g.nodeType===9?(M=g.documentElement,Math.max(g.body["scroll"+e],M["scroll"+e],g.body["offset"+e],M["offset"+e],M["client"+e])):A===void 0?n.css(g,T,v):n.style(g,T,A,v)},r,h?u:void 0,h)}})}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,r){n.fn[r]=function(i){return this.on(r,i)}}),n.fn.extend({bind:function(e,r,i){return this.on(e,null,r,i)},unbind:function(e,r){return this.off(e,null,r)},delegate:function(e,r,i,s){return this.on(r,e,i,s)},undelegate:function(e,r,i){return arguments.length===1?this.off(e,"**"):this.off(r,e||"**",i)},hover:function(e,r){return this.on("mouseenter",e).on("mouseleave",r||e)}}),n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){n.fn[r]=function(i,s){return arguments.length>0?this.on(r,null,i,s):this.trigger(r)}});var fs=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;n.proxy=function(e,r){var i,s,u;if(typeof r=="string"&&(i=e[r],r=e,e=i),!!P(e))return s=d.call(arguments,2),u=function(){return e.apply(r||this,s.concat(d.call(arguments)))},u.guid=e.guid=e.guid||n.guid++,u},n.holdReady=function(e){e?n.readyWait++:n.ready(!0)},n.isArray=Array.isArray,n.parseJSON=JSON.parse,n.nodeName=O,n.isFunction=P,n.isWindow=W,n.camelCase=He,n.type=U,n.now=Date.now,n.isNumeric=function(e){var r=n.type(e);return(r==="number"||r==="string")&&!isNaN(e-parseFloat(e))},n.trim=function(e){return e==null?"":(e+"").replace(fs,"$1")};var cs=t.jQuery,ls=t.$;return n.noConflict=function(e){return t.$===n&&(t.$=ls),e&&t.jQuery===n&&(t.jQuery=cs),n},typeof o>"u"&&(t.jQuery=t.$=n),n})}(xr)),xr.exports}var Ro=wo();const ii=To(Ro);class Ao{constructor(t){V(this,"canvas");V(this,"renderer");V(this,"scene");V(this,"keyLabel");V(this,"mouseXLabel");V(this,"mouseYLabel");V(this,"forwardsAmount");V(this,"rightAmount");V(this,"upAmount");V(this,"run",()=>{this.scene.update(),this.scene.movePlayer(this.forwardsAmount,this.rightAmount,this.upAmount),this.renderer.render(this.scene.getObjects()),requestAnimationFrame(this.run)});this.canvas=t,this.renderer=new yo(t),this.scene=new bo,this.keyLabel=document.getElementById("keyboardKey"),this.mouseXLabel=document.getElementById("mousex"),this.mouseYLabel=document.getElementById("mousey"),this.forwardsAmount=0,this.rightAmount=0,this.upAmount=0,ii(document).on("keydown",o=>{this.handleKeyPress(o)}),ii(document).on("keyup",o=>{this.handleKeyRelease(o)}),this.canvas.onclick=()=>{this.canvas.requestPointerLock()},this.canvas.addEventListener("mousemove",o=>{this.handleMouseMove(o)})}async init(){await this.renderer.init()}handleKeyPress(t){this.keyLabel.innerHTML=t.code,t.code==="KeyW"&&(this.forwardsAmount=.1),t.code==="KeyS"&&(this.forwardsAmount=-.1),t.code==="KeyA"&&(this.rightAmount=-.1),t.code==="KeyD"&&(this.rightAmount=.1),t.code==="KeyE"&&(this.upAmount+=.1),t.code==="KeyQ"&&(this.upAmount+=-.1)}handleKeyRelease(t){this.keyLabel.innerHTML=t.code,t.code==="KeyW"&&(this.forwardsAmount=0),t.code==="KeyS"&&(this.forwardsAmount=0),t.code==="KeyA"&&(this.rightAmount=0),t.code==="KeyD"&&(this.rightAmount=0),t.code==="KeyE"&&(this.upAmount=0),t.code==="KeyQ"&&(this.upAmount=0)}handleMouseMove(t){this.mouseXLabel.innerHTML=t.clientX.toString(),this.mouseYLabel.innerHTML=t.clientY.toString(),this.scene.spinPlayer(t.movementX/10,-t.movementY/10)}}const So=document.getElementById("gfx-main");(async()=>{const a=new Ao(So);await a.init(),a.run()})();
